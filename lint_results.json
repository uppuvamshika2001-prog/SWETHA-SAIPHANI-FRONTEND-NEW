[{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\clean_images.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\clean_images.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\fix_mock_data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\scripts\\optimize-images.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\admin\\ReportDetailsDialog.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":100,"column":29,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":100,"endColumn":42,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4020,4033],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":102,"column":33,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":102,"endColumn":46,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4112,4125],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":111,"column":29,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":111,"endColumn":42,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4513,4526],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":113,"column":33,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":113,"endColumn":46,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4605,4618],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":117,"column":37,"nodeType":"BlockStatement","messageId":"unexpected","endLine":117,"endColumn":40,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4822,4823],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":181,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":181,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[7261,7274],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":201,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":201,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[7955,7968],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, Printer, Download, Calendar, Loader2 } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { appointments, bills, doctors, patients } from \"@/data/mockData\";\nimport { toast } from \"sonner\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport function ReportDetailsDialog({ children }: { children: React.ReactNode }) {\n    const [isGenerating, setIsGenerating] = useState(false);\n    const today = new Date();\n\n    // Metrics calculation\n    const todayAppointments = appointments.filter(\n        (apt) => format(new Date(apt.date), 'yyyy-MM-dd') === format(today, 'yyyy-MM-dd')\n    ).length;\n\n    const activeDoctors = doctors.filter((d) => d.status === 'active').length;\n    const newPatients = patients.filter(\n        (p) => p.created_at && format(new Date(p.created_at), 'yyyy-MM-dd') === format(today, 'yyyy-MM-dd')\n    ).length;\n\n    const todayRevenue = bills\n        .filter((b) => b.status === 'paid')\n        .reduce((sum, b) => sum + b.paid_amount, 0);\n\n    const pendingBillsCount = bills.filter((b) => b.status === 'pending').length;\n\n    // Dept stats\n    const departments = Array.from(new Set(doctors.map(d => d.department)));\n    const departmentStats = departments.map(dept => {\n        const doctorsInDept = doctors.filter(d => d.department === dept && d.status === 'active').length;\n        const appointmentsInDept = appointments.filter(\n            (apt) => apt.department === dept && format(new Date(apt.date), 'yyyy-MM-dd') === format(today, 'yyyy-MM-dd')\n        ).length;\n        return {\n            name: dept,\n            activeDoctors: doctorsInDept,\n            todayAppointments: appointmentsInDept\n        };\n    });\n\n    const generateReport = async (action: 'download' | 'print') => {\n        setIsGenerating(true);\n        try {\n            const doc = new jsPDF();\n            const pageWidth = doc.internal.pageSize.getWidth();\n\n            // Helper: Image to Base64\n            const getBase64ImageFromUrl = async (imageUrl: string): Promise<string> => {\n                try {\n                    const res = await fetch(imageUrl);\n                    const blob = await res.blob();\n                    return new Promise((resolve, reject) => {\n                        const reader = new FileReader();\n                        reader.onload = () => resolve(reader.result as string);\n                        reader.onerror = () => reject(new Error(\"Failed to convert image to base64\"));\n                        reader.readAsDataURL(blob);\n                    });\n                } catch (error) {\n                    console.error(\"Error loading image:\", imageUrl, error);\n                    return \"\";\n                }\n            };\n\n            // Helper: Load Image\n            const loadImage = (src: string): Promise<HTMLImageElement> => {\n                return new Promise((resolve, reject) => {\n                    const img = new Image();\n                    img.onload = () => resolve(img);\n                    img.onerror = reject;\n                    img.src = src;\n                });\n            };\n\n            // Images\n            try {\n                const logoUrl = '/images/new_logo.png';\n                const base64Img = await getBase64ImageFromUrl(logoUrl);\n\n                if (base64Img) {\n                    // Watermark\n                    const wmImg = await loadImage(base64Img);\n                    if (wmImg.width > 0) {\n                        const wmWidth = 100;\n                        const wmHeight = (wmImg.height * wmWidth) / wmImg.width;\n                        const wmX = (pageWidth - wmWidth) / 2;\n                        const wmY = (doc.internal.pageSize.getHeight() - wmHeight) / 2;\n\n                        try {\n                            // @ts-ignore\n                            if (doc.GState) {\n                                // @ts-ignore\n                                const gState = new doc.GState({ opacity: 0.1 });\n                                doc.setGState(gState);\n                            }\n                        } catch (e) { console.warn(e); }\n\n                        doc.addImage(base64Img, 'PNG', wmX, wmY, wmWidth, wmHeight, undefined, 'FAST');\n\n                        try {\n                            // @ts-ignore\n                            if (doc.GState) {\n                                // @ts-ignore\n                                const gState = new doc.GState({ opacity: 1.0 });\n                                doc.setGState(gState);\n                            }\n                        } catch (e) { }\n                    }\n\n                    // Header Logo\n                    const logoImg = await loadImage(base64Img);\n                    const logoWidth = 35;\n                    const logoHeight = logoImg.height > 0 ? (logoImg.height * logoWidth) / logoImg.width : 35;\n                    doc.addImage(base64Img, 'PNG', 14, 8, logoWidth, logoHeight);\n                }\n            } catch (e) {\n                console.error(\"Error adding images\", e);\n            }\n\n            // Header Text\n            const textX = 55;\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.setTextColor(0, 51, 102);\n            doc.setFontSize(22);\n            doc.text(\"SWETHA SAIPHANI CLINIC\", textX, 18);\n\n            doc.setFontSize(14);\n            doc.text(\"THE BRAIN AND BONE CENTER\", textX, 26);\n\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.setFontSize(10);\n            doc.setTextColor(0, 0, 0);\n            doc.text(\"NEUROSURGERY | ORTHOROBOTICS | SPORTS INJURIES\", textX, 33);\n            doc.text(\"Karimnagar, Telangana | Ph: +91 98765 43210\", textX, 39);\n\n            doc.setDrawColor(200);\n            doc.line(14, 48, pageWidth - 14, 48);\n\n            // Report Title & Date\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.setFontSize(16);\n            doc.text(\"Daily Hospital Report\", 15, 58);\n\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.setFontSize(10);\n            doc.text(`Date: ${format(today, \"EEEE, MMMM d, yyyy\")}`, pageWidth - 15, 58, { align: \"right\" });\n\n            // Executive Summary\n            doc.setFontSize(14);\n            doc.setTextColor(44, 62, 80);\n            doc.text(\"Executive Summary\", 15, 70);\n\n            const summaryData = [\n                ['Appointments', todayAppointments.toString(), 'Revenue', `Rs. ${todayRevenue.toLocaleString()}`],\n                ['New Patients', newPatients.toString(), 'Active Doctors', activeDoctors.toString()]\n            ];\n\n            autoTable(doc, {\n                startY: 75,\n                head: [],\n                body: summaryData,\n                theme: 'grid',\n                styles: { fontSize: 10, cellPadding: 5 },\n                columnStyles: {\n                    0: { fontStyle: 'bold', fillColor: [240, 240, 240] },\n                    2: { fontStyle: 'bold', fillColor: [240, 240, 240] }\n                }\n            });\n\n            // Operational Highlights\n            // @ts-ignore\n            let yPos = doc.lastAutoTable.finalY + 15;\n            doc.setFontSize(14);\n            doc.text(\"Operational Highlights\", 15, yPos);\n\n            const highlightsData = [\n                ['Pending Bills', pendingBillsCount.toString()],\n                ['Critical Patients', '3'],\n                ['Pending Lab Reports', '5']\n            ];\n\n            autoTable(doc, {\n                startY: yPos + 5,\n                body: highlightsData,\n                theme: 'plain',\n                styles: { fontSize: 10, cellPadding: 2 },\n                columnStyles: { 0: { fontStyle: 'bold', cellWidth: 50 } }\n            });\n\n            // Department Status\n            // @ts-ignore\n            yPos = doc.lastAutoTable.finalY + 15;\n            doc.setFontSize(14);\n            doc.text(\"Department Status\", 15, yPos);\n\n            const deptColumns = [\"Department\", \"Active Doctors\", \"Today's Appointments\", \"Status\"];\n            const deptRows = departmentStats.map(dept => [\n                dept.name,\n                dept.activeDoctors.toString(),\n                dept.todayAppointments.toString(),\n                \"Active\"\n            ]);\n\n            autoTable(doc, {\n                startY: yPos + 5,\n                head: [deptColumns],\n                body: deptRows,\n                theme: 'striped',\n                headStyles: { fillColor: [66, 133, 244] },\n                styles: { fontSize: 10 }\n            });\n\n            // Footer\n            const pageCount = (doc as any).internal.getNumberOfPages();\n            for (let i = 1; i <= pageCount; i++) {\n                doc.setPage(i);\n                doc.setFontSize(8);\n                doc.setTextColor(150, 150, 150);\n                doc.text(\"Swetha Saiphani Clinic, Karimnagar, Telangana | Ph: +91 98765 43210\", pageWidth / 2, doc.internal.pageSize.height - 15, { align: \"center\" });\n                doc.text(`Generated on ${format(today, \"PPpp\")}`, 15, doc.internal.pageSize.height - 10);\n                doc.text(`Page ${i} of ${pageCount}`, pageWidth - 15, doc.internal.pageSize.height - 10, { align: \"right\" });\n            }\n\n            if (action === 'download') {\n                doc.save(`Daily_Report_${format(today, \"yyyy-MM-dd\")}.pdf`);\n                toast.success(\"Report Downloaded Successfully\");\n            } else {\n                doc.autoPrint();\n                window.open(doc.output('bloburl'), '_blank');\n                toast.success(\"Report opened for printing\");\n            }\n\n        } catch (error) {\n            console.error(\"Report generation failed:\", error);\n            toast.error(\"Failed to generate report\");\n        } finally {\n            setIsGenerating(false);\n        }\n    };\n\n    return (\n        <Dialog>\n            <DialogTrigger asChild>\n                {children}\n            </DialogTrigger>\n            <DialogContent className=\"max-w-3xl max-h-[85vh] overflow-y-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2 text-xl\">\n                        <TrendingUp className=\"h-5 w-5 text-indigo-600\" />\n                        Daily Hospital Report\n                    </DialogTitle>\n                    <DialogDescription>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                            <Calendar className=\"h-4 w-4\" />\n                            {format(today, \"EEEE, MMMM d, yyyy\")}\n                        </div>\n                    </DialogDescription>\n                </DialogHeader>\n\n                <div className=\"space-y-6 py-4\">\n                    {/* Executive Summary */}\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border\">\n                            <p className=\"text-sm text-muted-foreground\">Appointments</p>\n                            <p className=\"text-2xl font-bold\">{todayAppointments}</p>\n                        </div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border\">\n                            <p className=\"text-sm text-muted-foreground\">Revenue</p>\n                            <p className=\"text-2xl font-bold text-green-600\">â‚¹{todayRevenue.toLocaleString()}</p>\n                        </div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border\">\n                            <p className=\"text-sm text-muted-foreground\">New Patients</p>\n                            <p className=\"text-2xl font-bold\">{newPatients}</p>\n                        </div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border\">\n                            <p className=\"text-sm text-muted-foreground\">Active Doctors</p>\n                            <p className=\"text-2xl font-bold\">{activeDoctors}</p>\n                        </div>\n                    </div>\n\n                    {/* Detailed Sections */}\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                        <div className=\"space-y-3\">\n                            <h3 className=\"font-semibold text-lg border-b pb-2\">Operational Highlights</h3>\n                            <ul className=\"space-y-2 text-sm\">\n                                <li className=\"flex justify-between\">\n                                    <span>Pending Bills:</span>\n                                    <span className=\"font-medium\">{pendingBillsCount}</span>\n                                </li>\n                                <li className=\"flex justify-between\">\n                                    <span>Critical Patients:</span>\n                                    <span className=\"font-medium\">3</span>\n                                </li>\n                                <li className=\"flex justify-between\">\n                                    <span>Lab Reports Pending:</span>\n                                    <span className=\"font-medium\">5</span>\n                                </li>\n                            </ul>\n                        </div>\n                        <div className=\"space-y-3\">\n                            <h3 className=\"font-semibold text-lg border-b pb-2\">Department Status</h3>\n                            <div className=\"bg-slate-50 dark:bg-slate-900 rounded-lg border p-3\">\n                                <table className=\"w-full text-sm\">\n                                    <thead>\n                                        <tr className=\"text-left text-muted-foreground border-b\">\n                                            <th className=\"pb-2 font-medium\">Department</th>\n                                            <th className=\"pb-2 font-medium text-right\">Doctors</th>\n                                            <th className=\"pb-2 font-medium text-right\">Appts</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {departmentStats.filter((_, i) => i < 5).map((d, i) => (\n                                            <tr key={i} className=\"border-b last:border-0 border-slate-100 dark:border-slate-800\">\n                                                <td className=\"py-2\">{d.name}</td>\n                                                <td className=\"py-2 text-right\">{d.activeDoctors}</td>\n                                                <td className=\"py-2 text-right\">{d.todayAppointments}</td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                                {departmentStats.length > 5 && (\n                                    <p className=\"text-xs text-center mt-2 text-muted-foreground\">+ {departmentStats.length - 5} more departments</p>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Footer Info */}\n                    <div className=\"bg-muted/50 p-4 rounded-lg text-xs text-muted-foreground mt-6\">\n                        <p>Generated by Admin Portal on {format(new Date(), \"PPpp\")}</p>\n                        <p>Confidential Document - For Internal Use Only</p>\n                    </div>\n                </div>\n\n                <div className=\"flex justify-end gap-3 mt-4\">\n                    <Button\n                        variant=\"outline\"\n                        onClick={() => generateReport('print')}\n                        disabled={isGenerating}\n                    >\n                        {isGenerating ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Printer className=\"h-4 w-4 mr-2\" />}\n                        Print\n                    </Button>\n                    <Button\n                        onClick={() => generateReport('download')}\n                        disabled={isGenerating}\n                        className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\n                    >\n                        {isGenerating ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Download className=\"h-4 w-4 mr-2\" />}\n                        Download PDF\n                    </Button>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\appointments\\AppointmentBookingDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'predefinedDoctors'. Either include it or remove the dependency array.","line":99,"column":8,"nodeType":"ArrayExpression","endLine":99,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [predefinedDoctors]","fix":{"range":[3429,3431],"text":"[predefinedDoctors]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { toast } from \"sonner\";\nimport { Calendar as CalendarIcon, Clock, User, Phone, Search } from \"lucide-react\";\nimport { usePatients } from \"@/contexts/PatientContext\";\nimport { appointmentService } from \"@/services/appointmentService\";\nimport { staffService } from \"@/services/staffService\";\n\ninterface AppointmentBookingDialogProps {\n    children?: React.ReactNode;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    defaultTrigger?: boolean;\n    preSelectedDoctorId?: string;\n    preSelectedPatient?: {\n        uhid: string;\n        full_name: string;\n        phone: string;\n    };\n    onBook?: (appointment: any) => void;\n}\n\nexport function AppointmentBookingDialog({\n    children,\n    open,\n    onOpenChange,\n    defaultTrigger = true,\n    preSelectedDoctorId,\n    preSelectedPatient,\n    onBook\n}: AppointmentBookingDialogProps) {\n    const [internalOpen, setInternalOpen] = useState(false);\n    const isControlled = open !== undefined;\n    const showOpen = isControlled ? open : internalOpen;\n    const setShowOpen = isControlled ? onOpenChange : setInternalOpen;\n\n    const { patients } = usePatients();\n    const [doctors, setDoctors] = useState<any[]>([]);\n    const [step, setStep] = useState(1);\n    const [department, setDepartment] = useState(\"\");\n    const [selectedDoctor, setSelectedDoctor] = useState(\"\");\n    const [selectedPatientId, setSelectedPatientId] = useState(\"\");\n    const [patientSearch, setPatientSearch] = useState(\"\");\n    const [date, setDate] = useState(\"\");\n    const [time, setTime] = useState(\"\");\n    const [paymentMethod, setPaymentMethod] = useState(\"\");\n\n    // Initialize with preSelectedPatient if provided\n    useEffect(() => {\n        if (preSelectedPatient?.uhid) {\n            setSelectedPatientId(preSelectedPatient.uhid);\n        }\n    }, [preSelectedPatient]);\n\n    // Fetch doctors on mount\n    useEffect(() => {\n        const fetchDoctors = async () => {\n            try {\n                const staff = await staffService.getStaff();\n                const activeDoctors = staff.filter((s: any) => s.role === 'doctor');\n\n                // Merge API doctors with predefined doctors to ensure all 9 specific doctors are always visible\n                const mergedDoctors = [...activeDoctors.map(d => ({ ...d, isPredefined: false }))];\n\n                predefinedDoctors.forEach(fallback => {\n                    const exists = mergedDoctors.some(d =>\n                        normalizeName(d.full_name) === normalizeName(fallback.full_name)\n                    );\n                    if (!exists) {\n                        mergedDoctors.push({ ...fallback, isPredefined: true });\n                    }\n                });\n\n                setDoctors(mergedDoctors);\n            } catch (error) {\n                console.error(\"Failed to fetch doctors\", error);\n                toast.error(\"Failed to load doctor list\");\n            }\n        };\n        fetchDoctors();\n    }, []);\n\n    // Effect to handle pre-selection\n    useEffect(() => {\n        if (preSelectedDoctorId && doctors.length > 0) {\n            const doc = doctors.find(d => d.id === preSelectedDoctorId);\n            if (doc) {\n                setDepartment(doc.department);\n                setSelectedDoctor(doc.id);\n            }\n        }\n    }, [preSelectedDoctorId, open, internalOpen, doctors]);\n\n    // ... (rest of predefinedDepartments, predefinedDoctors, allDoctors logic same as original) ...\n    // Predefined departments as requested\n    const predefinedDepartments = [\n        \"Orthopaedics\",\n        \"Neurosurgeon\",\n        \"General Physician\",\n        \"Paediatric Orthopaedics\",\n        \"Pulmonology\",\n        \"Oncology\",\n        \"Paediatric Hemato-Oncology\"\n    ];\n\n    // Predefined doctors mapped to departments (with valid UUID format)\n    // These are only shown as fallback if no doctors are fetched from the database\n    const predefinedDoctors = [\n        { id: '00000000-0000-0000-0000-000000000001', full_name: 'Dr. Ravikanti Nagaraju', department: 'General Physician', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000002', full_name: 'Dr. Roshan Kumar Jaiswal', department: 'Paediatric Orthopaedics', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000003', full_name: 'Dr. Swetha Pendyala', department: 'Neurosurgeon', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000004', full_name: 'Dr. B. Sai Phani Chandra', department: 'Orthopaedics', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000005', full_name: 'Dr. Hariprakash', department: 'Orthopaedics', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000006', full_name: 'Dr. Mahesh Gudelli', department: 'Pulmonology', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000007', full_name: 'Dr. Sneha Sagar', department: 'Oncology', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000008', full_name: 'Dr. T Dheeraj', department: 'Oncology', role: 'doctor', isPredefined: true },\n        { id: '00000000-0000-0000-0000-000000000009', full_name: 'Dr. Navya Sri Yenigalla', department: 'Paediatric Hemato-Oncology', role: 'doctor', isPredefined: true },\n    ];\n\n    // Helper function to normalize name for comparison (remove extra spaces, lowercase)\n    const normalizeName = (name: string) => name?.toLowerCase().replace(/\\s+/g, '').trim() || '';\n\n    // If we have doctors from the database, use ONLY those (no merging with predefined)\n    // Only show predefined doctors as fallback when database returns empty\n    // Use the merged doctors list (state) which includes both API and Fallback\n    const allDoctors = doctors.length > 0 ? doctors : predefinedDoctors;\n\n    // Department mapping for staff/doctors that may have different department names\n    const getDepartmentMapping = (dept: string): string | null => {\n        const deptLower = (dept || \"\").toLowerCase();\n        if (deptLower.includes(\"oncology\") && !deptLower.includes(\"paediatric\")) return \"Oncology\";\n        if (deptLower.includes(\"pulmonology\")) return \"Pulmonology\";\n        if (deptLower.includes(\"hemato\") || deptLower.includes(\"paediatric hemato\")) return \"Paediatric Hemato-Oncology\";\n        if (deptLower.includes(\"ortho\") && !deptLower.includes(\"paediatric\")) return \"Orthopaedics\";\n        if (deptLower.includes(\"general physician\") || deptLower === \"general physician\" || deptLower.includes(\"general medicine\")) return \"General Physician\";\n        if (deptLower.includes(\"paediatric ortho\") || deptLower.includes(\"pediatric ortho\")) return \"Paediatric Orthopaedics\";\n        if (deptLower.includes(\"neuro\")) return \"Neurosurgeon\";\n        return null;\n    };\n\n    const departments = Array.from(new Set([\n        ...predefinedDepartments,\n        ...allDoctors.map(d => getDepartmentMapping(d.department)).filter(Boolean) as string[]\n    ])).filter(dept =>\n        dept &&\n        !['Neurology', 'Neurosurgen', 'Neurosurgern', 'Orthopedics'].includes(dept)\n    );\n\n    const availableDoctors = allDoctors.filter(d => !department || getDepartmentMapping(d.department) === department);\n\n    // Filter patients based on search\n    const filteredPatients = patients.filter(p =>\n        p.full_name.toLowerCase().includes(patientSearch.toLowerCase()) ||\n        p.phone.includes(patientSearch) ||\n        (p.uhid && p.uhid.toLowerCase().includes(patientSearch.toLowerCase()))\n    ).slice(0, 5); // Limit to 5 results for cleaner UI\n\n    // Use preSelectedPatient if available, otherwise find in list\n    const selectedPatient = preSelectedPatient?.uhid === selectedPatientId\n        ? (preSelectedPatient as any)\n        : patients.find(p => p.uhid === selectedPatientId);\n\n    const handleBook = async () => {\n        // Predefined doctors are now allowed for booking as they represent local fallback data\n        // which may still be valid for mock workflows.\n\n        try {\n            await appointmentService.createAppointment({\n                patientId: selectedPatientId,\n                doctorId: selectedDoctor,\n                scheduledAt: `${date}T${time}:00`,\n                duration: 10, // Default duration (10 mins)\n                notes: `Payment Method: ${paymentMethod}`\n            });\n\n            // Re-find doctor for consistent display\n            const bookedDoc = doctors.find(d => d.id === selectedDoctor) || predefinedDoctors.find(d => d.id === selectedDoctor);\n\n            toast.success(\"Appointment booked successfully!\", {\n                description: `Scheduled for ${selectedPatient?.full_name} with ${bookedDoc?.full_name} on ${date}.`\n            });\n\n            if (onBook) {\n                onBook({} as any); // Trigger refresh\n            }\n\n            // Reset and close\n            setStep(1);\n            setDepartment(\"\");\n            setSelectedDoctor(\"\");\n            if (!preSelectedPatient) {\n                setSelectedPatientId(\"\");\n                setPatientSearch(\"\");\n            }\n            setDate(\"\");\n            setTime(\"\");\n            setPaymentMethod(\"\");\n\n            if (setShowOpen) setShowOpen(false);\n\n        } catch (error) {\n            console.error(\"Booking failed\", error);\n\n            // Extract error message if available\n            let errorMessage = \"Please try again later.\";\n            if (error instanceof Error) {\n                errorMessage = error.message;\n            }\n\n            toast.error(\"Failed to book appointment\", {\n                description: errorMessage\n            });\n        }\n    };\n\n    const getStepTitle = () => {\n        switch (step) {\n            case 1: return \"Select Specialist\";\n            case 2: return \"Select Patient\";\n            case 3: return \"Choose Slot\";\n            case 4: return \"Payment\";\n            default: return \"Book Appointment\";\n        }\n    };\n\n    const getStepDescription = () => {\n        switch (step) {\n            case 1: return \"Select department and doctor.\";\n            case 2: return \"Search and select a registered patient.\";\n            case 3: return \"Choose a date and time.\";\n            case 4: return \"Select a payment method to confirm.\";\n            default: return \"\";\n        }\n    };\n\n    // Helper for navigation\n    const goNext = () => {\n        if (step === 1 && preSelectedPatient) {\n            // Skip patient selection if patient is pre-selected\n            setStep(3);\n        } else {\n            setStep(step + 1);\n        }\n    };\n\n    const goBack = () => {\n        if (step === 3 && preSelectedPatient) {\n            // Skip patient selection when going back too\n            setStep(1);\n        } else {\n            setStep(step - 1);\n        }\n    };\n\n    return (\n        <Dialog open={showOpen} onOpenChange={setShowOpen}>\n            {defaultTrigger && (\n                <DialogTrigger asChild>\n                    {children || <Button>Book Appointment</Button>}\n                </DialogTrigger>\n            )}\n            <DialogContent className=\"sm:max-w-[450px]\">\n                <DialogHeader>\n                    <DialogTitle>{getStepTitle()}</DialogTitle>\n                    <DialogDescription>\n                        {getStepDescription()}\n                    </DialogDescription>\n                </DialogHeader>\n\n                <div className=\"grid gap-4 py-4 min-h-[300px]\">\n                    {step === 1 && (\n                        <>\n                            <div className=\"grid gap-2\">\n                                <Label htmlFor=\"department\">Department</Label>\n                                <Select value={department} onValueChange={setDepartment}>\n                                    <SelectTrigger id=\"department\">\n                                        <SelectValue placeholder=\"Select department\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {departments.map((dept) => (\n                                            <SelectItem key={dept} value={dept}>{dept}</SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                            <div className=\"grid gap-2\">\n                                <Label htmlFor=\"doctor\">Doctor</Label>\n                                <Select value={selectedDoctor} onValueChange={setSelectedDoctor} disabled={!department}>\n                                    <SelectTrigger id=\"doctor\">\n                                        <SelectValue placeholder=\"Select doctor\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {availableDoctors.map((doc) => (\n                                            <SelectItem key={doc.id} value={doc.id}>{doc.full_name} ({doc.department})</SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                        </>\n                    )}\n\n                    {step === 2 && !preSelectedPatient && (\n                        <div className=\"space-y-4\">\n                            <div className=\"relative\">\n                                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                                <Input\n                                    placeholder=\"Search by name, phone or ID...\"\n                                    className=\"pl-9\"\n                                    value={patientSearch}\n                                    onChange={(e) => setPatientSearch(e.target.value)}\n                                />\n                            </div>\n\n                            <div className=\"space-y-2 max-h-[250px] overflow-y-auto border rounded-md p-2\">\n                                {selectedPatientId ? (\n                                    <div className=\"flex items-center justify-between p-3 bg-primary/10 border border-primary/20 rounded-lg\">\n                                        <div>\n                                            <p className=\"font-medium text-sm\">{selectedPatient?.full_name}</p>\n                                            <p className=\"text-xs text-muted-foreground\">{selectedPatient?.phone}</p>\n                                        </div>\n                                        <Button variant=\"ghost\" size=\"sm\" onClick={() => setSelectedPatientId(\"\")}>\n                                            Change\n                                        </Button>\n                                    </div>\n                                ) : (\n                                    filteredPatients.length > 0 ? (\n                                        filteredPatients.map((patient) => (\n                                            <div\n                                                key={patient.uhid}\n                                                className=\"flex items-center justify-between p-2 hover:bg-muted rounded-md cursor-pointer transition-colors\"\n                                                onClick={() => setSelectedPatientId(patient.uhid)}\n                                            >\n                                                <div className=\"flex items-center gap-3\">\n                                                    <div className=\"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center\">\n                                                        <User className=\"h-4 w-4 text-slate-500\" />\n                                                    </div>\n                                                    <div>\n                                                        <p className=\"text-sm font-medium\">{patient.full_name}</p>\n                                                        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                                                            <span className=\"flex items-center gap-0.5\"><Phone className=\"h-3 w-3\" /> {patient.phone}</span>\n                                                            <span>|</span>\n                                                            <span>{patient.uhid}</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <Button size=\"sm\" variant=\"ghost\">Select</Button>\n                                            </div>\n                                        ))\n                                    ) : (\n                                        <div className=\"text-center py-8 text-muted-foreground text-sm\">\n                                            {patientSearch ? \"No patients found.\" : \"Search to find a patient.\"}\n                                        </div>\n                                    )\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {step === 3 && (\n                        <>\n                            <div className=\"grid gap-2\">\n                                <Label htmlFor=\"date\">Date</Label>\n                                <div className=\"relative\">\n                                    <Input\n                                        id=\"date\"\n                                        type=\"date\"\n                                        value={date}\n                                        onChange={(e) => setDate(e.target.value)}\n                                        min={new Date().toISOString().split('T')[0]}\n                                    />\n                                    <CalendarIcon className=\"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none\" />\n                                </div>\n                            </div>\n                            <div className=\"grid gap-2\">\n                                <Label htmlFor=\"time\">Time</Label>\n                                <Select value={time} onValueChange={setTime}>\n                                    <SelectTrigger id=\"time\">\n                                        <SelectValue placeholder=\"Select time slot\" />\n                                    </SelectTrigger>\n                                    <SelectContent className=\"max-h-[200px]\">\n                                        {(() => {\n                                            const slots = [];\n                                            const periods = [\n                                                { start: 9, end: 13 }, // 9 AM - 1 PM\n                                                { start: 14, end: 20 } // 2 PM - 8 PM\n                                            ];\n\n                                            periods.forEach(({ start, end }) => {\n                                                for (let hour = start; hour < end; hour++) {\n                                                    for (let minute = 0; minute < 60; minute += 10) {\n                                                        const h = hour.toString().padStart(2, '0');\n                                                        const m = minute.toString().padStart(2, '0');\n                                                        const time24 = `${h}:${m}`;\n\n                                                        // Format for display\n                                                        const period = hour >= 12 ? 'PM' : 'AM';\n                                                        const displayHour = hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour);\n                                                        const displayTime = `${displayHour.toString().padStart(2, '0')}:${m} ${period}`;\n\n                                                        slots.push(\n                                                            <SelectItem key={time24} value={time24}>\n                                                                {displayTime}\n                                                            </SelectItem>\n                                                        );\n                                                    }\n                                                }\n                                            });\n                                            return slots;\n                                        })()}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                        </>\n                    )}\n\n                    {step === 4 && (\n                        <div className=\"space-y-4\">\n                            <div className=\"p-4 bg-slate-50 rounded-lg border border-slate-200\">\n                                <h4 className=\"font-semibold text-sm mb-2\">Appointment Summary</h4>\n                                <div className=\"text-sm space-y-1 text-slate-600\">\n                                    <p><span className=\"font-medium\">Patient:</span> {selectedPatient?.full_name}</p>\n                                    <p><span className=\"font-medium\">Doctor:</span> {doctors.find(d => d.id === selectedDoctor)?.full_name || predefinedDoctors.find(d => d.id === selectedDoctor)?.full_name}</p>\n                                    <p><span className=\"font-medium\">Date:</span> {date}</p>\n                                    <p><span className=\"font-medium\">Time:</span> {time}</p>\n                                    <p><span className=\"font-medium\">Consultation Fee:</span> Rs. 500</p>\n                                </div>\n                            </div>\n                            {/* ... payment method buttons simplified for brevity but kept in mind ... */}\n                            <div className=\"grid gap-2\">\n                                <Label>Select Payment Method</Label>\n                                <div className=\"grid grid-cols-1 gap-2\">\n                                    <Button\n                                        variant={paymentMethod === 'card' ? 'default' : 'outline'}\n                                        className=\"justify-start h-auto py-3 px-4\"\n                                        onClick={() => setPaymentMethod('card')}\n                                    >\n                                        <div className=\"flex flex-col items-start gap-1\">\n                                            <span className=\"font-semibold\">Credit/Debit Card</span>\n                                            <span className=\"text-xs font-normal opacity-80\">Pay securely with your card</span>\n                                        </div>\n                                    </Button>\n                                    <Button\n                                        variant={paymentMethod === 'upi' ? 'default' : 'outline'}\n                                        className=\"justify-start h-auto py-3 px-4\"\n                                        onClick={() => setPaymentMethod('upi')}\n                                    >\n                                        <div className=\"flex flex-col items-start gap-1\">\n                                            <span className=\"font-semibold\">UPI / Digital Wallet</span>\n                                            <span className=\"text-xs font-normal opacity-80\">Google Pay, PhonePe, Paytm</span>\n                                        </div>\n                                    </Button>\n                                    <Button\n                                        variant={paymentMethod === 'pay_at_clinic' ? 'default' : 'outline'}\n                                        className=\"justify-start h-auto py-3 px-4\"\n                                        onClick={() => setPaymentMethod('pay_at_clinic')}\n                                    >\n                                        <div className=\"flex flex-col items-start gap-1\">\n                                            <span className=\"font-semibold\">Pay at Clinic</span>\n                                            <span className=\"text-xs font-normal opacity-80\">Pay cash/card at the counter</span>\n                                        </div>\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <DialogFooter>\n                    {step > 1 && (\n                        <Button variant=\"outline\" onClick={goBack} className=\"mr-auto\">\n                            Back\n                        </Button>\n                    )}\n\n                    {step === 1 && (\n                        <Button onClick={goNext} disabled={!selectedDoctor}>\n                            Next\n                        </Button>\n                    )}\n\n                    {/* Step 2 buttons only show if not pre-selected */}\n                    {step === 2 && !preSelectedPatient && (\n                        <Button onClick={goNext} disabled={!selectedPatientId}>\n                            Next\n                        </Button>\n                    )}\n\n                    {step === 3 && (\n                        <Button onClick={goNext} disabled={!date || !time}>\n                            Proceed to Payment\n                        </Button>\n                    )}\n\n                    {step === 4 && (\n                        <Button onClick={handleBook} disabled={!paymentMethod}>\n                            Pay & Book\n                        </Button>\n                    )}\n                </DialogFooter>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\appointments\\AppointmentDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\auth\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\auth\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\billing\\BillDetailsDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBillDetails'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [showOpen, billId, fetchBillDetails]","fix":{"range":[1264,1282],"text":"[showOpen, billId, fetchBillDetails]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { CreditCard, Calendar, FileText, Loader2, Printer } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { StatusBadge } from \"@/components/dashboard/StatusBadge\";\nimport { billingService, Bill } from \"@/services/billingService\";\nimport { toast } from \"sonner\";\nimport { printInvoice } from \"@/utils/printInvoice\";\n\ninterface BillDetailsDialogProps {\n    children?: React.ReactNode;\n    billId: string;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n}\n\nexport function BillDetailsDialog({\n    children,\n    billId,\n    open,\n    onOpenChange\n}: BillDetailsDialogProps) {\n    const [internalOpen, setInternalOpen] = useState(false);\n    const isControlled = open !== undefined;\n    const showOpen = isControlled ? open : internalOpen;\n    const setShowOpen = isControlled ? onOpenChange : setInternalOpen;\n\n    const [bill, setBill] = useState<Bill | null>(null);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (showOpen && billId) {\n            fetchBillDetails();\n        }\n    }, [showOpen, billId]);\n\n    const fetchBillDetails = async () => {\n        setLoading(true);\n        try {\n            const data = await billingService.getBillById(billId);\n            setBill(data);\n        } catch (error) {\n            console.error(error);\n            toast.error(\"Failed to load bill details\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={showOpen} onOpenChange={setShowOpen}>\n            <DialogTrigger asChild>\n                {children || <Button variant=\"ghost\" size=\"sm\">View Bill</Button>}\n            </DialogTrigger>\n            <DialogContent className=\"sm:max-w-[500px]\">\n                <DialogHeader>\n                    <DialogTitle>Invoice Details</DialogTitle>\n                    <DialogDescription>\n                        Invoice #: {bill?.billNumber || \"...\"}\n                    </DialogDescription>\n                </DialogHeader>\n\n                {loading ? (\n                    <div className=\"flex justify-center py-8\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                    </div>\n                ) : bill ? (\n                    <div className=\"grid gap-6 py-4\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"space-y-1\">\n                                <span className=\"text-xs text-muted-foreground\">Date</span>\n                                <div className=\"font-medium flex items-center gap-2\">\n                                    <Calendar className=\"h-4 w-4\" />\n                                    {new Date(bill.createdAt).toLocaleDateString()}\n                                </div>\n                            </div>\n                            <div className=\"space-y-1\">\n                                <span className=\"text-xs text-muted-foreground\">Status</span>\n                                <div>\n                                    <StatusBadge status={bill.status.toLowerCase() as any} />\n                                </div>\n                            </div>\n                            <div className=\"space-y-1\">\n                                <span className=\"text-xs text-muted-foreground\">Patient</span>\n                                <div className=\"font-medium\">\n                                    {bill.patient.firstName} {bill.patient.lastName}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"border rounded-lg overflow-hidden\">\n                            <div className=\"bg-muted/50 p-3 border-b flex items-center gap-2\">\n                                <FileText className=\"h-4 w-4\" />\n                                <span className=\"font-semibold text-sm\">Bill Items</span>\n                            </div>\n                            <div className=\"divide-y max-h-[200px] overflow-y-auto\">\n                                {bill.items.map((item, index) => (\n                                    <div key={index} className=\"p-3 flex justify-between items-center text-sm\">\n                                        <div>\n                                            <p className=\"font-medium\">{item.description}</p>\n                                        </div>\n                                        <div className=\"font-medium\">\n                                            â‚¹{item.total}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                            <div className=\"bg-muted/50 p-4 border-t space-y-2\">\n                                <div className=\"flex justify-between text-sm\">\n                                    <span className=\"text-muted-foreground\">Subtotal</span>\n                                    <span>â‚¹{bill.subtotal}</span>\n                                </div>\n                                {bill.discount > 0 && (\n                                    <div className=\"flex justify-between text-sm text-green-600\">\n                                        <span>Discount</span>\n                                        <span>-â‚¹{bill.discount}</span>\n                                    </div>\n                                )}\n                                {bill.gstAmount > 0 && (\n                                    <div className=\"flex justify-between text-sm\">\n                                        <span>GST (18%)</span>\n                                        <span>â‚¹{bill.gstAmount}</span>\n                                    </div>\n                                )}\n                                <div className=\"flex justify-between font-bold text-lg pt-2 border-t border-slate-200 dark:border-slate-700\">\n                                    <span>Total</span>\n                                    <span>â‚¹{bill.grandTotal}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"py-4 text-center text-muted-foreground\">\n                        Bill not found\n                    </div>\n                )}\n                <div className=\"flex justify-end gap-2 pt-4 border-t mt-2\">\n                    <Button variant=\"outline\" onClick={() => setShowOpen(false)}>Close</Button>\n                    {bill && (\n                        <Button onClick={() => printInvoice(bill)}>\n                            <Printer className=\"h-4 w-4 mr-2\" /> Print\n                        </Button>\n                    )}\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\billing\\BillGenerationDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPendingLabOrders'. Either include it or remove the dependency array.","line":91,"column":8,"nodeType":"ArrayExpression","endLine":91,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPendingLabOrders, patientId]","fix":{"range":[2992,3003],"text":"[fetchPendingLabOrders, patientId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { toast } from \"sonner\";\nimport { FileText, Plus, Trash2, Loader2, IndianRupee } from \"lucide-react\";\nimport { patientService } from \"@/services/patientService\";\nimport { billingService } from \"@/services/billingService\";\nimport { labService } from \"@/services/labService\";\nimport { Patient } from \"@/types\";\nimport { Separator } from \"@/components/ui/separator\";\n\ninterface BillGenerationDialogProps {\n    children?: React.ReactNode;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    defaultTrigger?: boolean;\n    onSuccess?: () => void;\n}\n\nexport function BillGenerationDialog({\n    children,\n    open,\n    onOpenChange,\n    defaultTrigger = true,\n    onSuccess\n}: BillGenerationDialogProps) {\n    const [internalOpen, setInternalOpen] = useState(false);\n    const isControlled = open !== undefined;\n    const showOpen = isControlled ? open : internalOpen;\n    const setShowOpen = isControlled ? onOpenChange : setInternalOpen;\n\n    const [patientId, setPatientId] = useState(\"\");\n    const [patientList, setPatientList] = useState<Patient[]>([]);\n    const [loadingPatients, setLoadingPatients] = useState(false);\n    const [submitting, setSubmitting] = useState(false);\n\n    // Item State\n    const [items, setItems] = useState<{ description: string, quantity: number, unitPrice: number, total: number }[]>([]);\n    const [description, setDescription] = useState(\"\");\n    const [unitPrice, setUnitPrice] = useState(\"\");\n    const [quantity, setQuantity] = useState(\"1\");\n    const [discount, setDiscount] = useState(\"0\");\n\n    useEffect(() => {\n        if (showOpen) {\n            fetchPatients();\n        }\n    }, [showOpen]);\n\n    const fetchPatients = async () => {\n        setLoadingPatients(true);\n        try {\n            const data = await patientService.getPatients();\n            setPatientList(Array.isArray(data) ? data : (data.items || []));\n        } catch (error) {\n            console.error(error);\n            toast.error(\"Failed to load patients\");\n        } finally {\n            setLoadingPatients(false);\n        }\n    };\n\n    // Lab Orders Logic\n    const [pendingLabOrders, setPendingLabOrders] = useState<any[]>([]);\n    const [selectedLabOrderIds, setSelectedLabOrderIds] = useState<string[]>([]);\n\n    useEffect(() => {\n        if (patientId) {\n            fetchPendingLabOrders();\n        } else {\n            setPendingLabOrders([]);\n        }\n    }, [patientId]);\n\n    const fetchPendingLabOrders = async () => {\n        try {\n            // Fetch 'ORDERED' or 'PAYMENT_PENDING' orders\n            const orders = await labService.getLabOrders({ patientId, status: 'ORDERED' });\n            setPendingLabOrders(orders);\n        } catch (error) {\n            console.error(\"Failed to fetch lab orders\", error);\n        }\n    };\n\n    const handleAddLabOrder = (order: any) => {\n        if (selectedLabOrderIds.includes(order.id)) return;\n\n        // Add to items\n        const testNames = order.tests.map((t: any) => t.test_name).join(\", \");\n        const description = `Lab: ${testNames} (Order #${order.order_id})`;\n        const amount = 500; // Default or fetch price? Using placeholder for now, user can edit.\n\n        setItems([...items, { description, quantity: 1, unitPrice: amount, total: amount }]);\n        setSelectedLabOrderIds([...selectedLabOrderIds, order.id]);\n\n        toast.info(\"Lab order added. Please verify price.\");\n    };\n\n    const handleAddItem = () => {\n        if (!description || !unitPrice || !quantity) return;\n        const qty = parseInt(quantity);\n        const price = parseFloat(unitPrice);\n\n        if (qty <= 0 || price < 0) {\n            toast.error(\"Invalid quantity or price\");\n            return;\n        }\n\n        const total = qty * price;\n        setItems([...items, { description, quantity: qty, unitPrice: price, total }]);\n\n        // Reset fields\n        setDescription(\"\");\n        setUnitPrice(\"\");\n        setQuantity(\"1\");\n    };\n\n    const handleRemoveItem = (index: number) => {\n        const newItems = [...items];\n        newItems.splice(index, 1);\n        setItems(newItems);\n    };\n\n    const calculateSubtotal = () => {\n        return items.reduce((sum, item) => sum + item.total, 0);\n    };\n\n    const calculateDiscountAmount = () => {\n        const subtotal = calculateSubtotal();\n        const percentage = parseFloat(discount) || 0;\n        return (subtotal * percentage) / 100;\n    };\n\n    const calculateBaseAmount = () => {\n        return calculateSubtotal() - calculateDiscountAmount();\n    };\n\n    // Check if bill contains lab services (no GST for lab bills)\n    const isLabBill = () => {\n        return items.some(item => item.description.toLowerCase().includes('lab'));\n    };\n\n    const calculateGST = () => {\n        // GST removed for OPD/Lab bills as per requirement (Only Pharmacy has GST)\n        return 0;\n    };\n\n    const calculateTotal = () => {\n        return calculateBaseAmount() + calculateGST();\n    };\n\n    const handleGenerateBill = async () => {\n        if (!patientId || items.length === 0) {\n            toast.error(\"Please select a patient and add at least one item\");\n            return;\n        }\n\n        setSubmitting(true);\n        try {\n            await billingService.createBill({\n                patientId,\n                items: items.map(item => ({\n                    description: item.description,\n                    quantity: item.quantity,\n                    unitPrice: item.unitPrice\n                })),\n                discount: calculateDiscountAmount(),\n                notes: calculateGST() > 0\n                    ? `GST (18%): â‚¹${calculateGST().toFixed(2)} | Total with GST: â‚¹${calculateTotal().toFixed(2)}`\n                    : `Total: â‚¹${calculateTotal().toFixed(2)}`,\n                gstPercent: 0, // Explicitly set GST to 0 for Lab/OPD bills\n                labOrderIds: selectedLabOrderIds\n            } as any);\n\n            toast.success(\"Bill generated successfully!\");\n\n            // Reset and close\n            setPatientId(\"\");\n            setItems([]);\n            setSelectedLabOrderIds([]);\n            if (setShowOpen) setShowOpen(false);\n            if (onSuccess) onSuccess();\n\n        } catch (error: any) {\n            console.error(error);\n            toast.error(error.message || \"Failed to generate bill\");\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    return (\n        <Dialog open={showOpen} onOpenChange={setShowOpen}>\n            {defaultTrigger && (\n                <DialogTrigger asChild>\n                    {children || <Button className=\"bg-teal-600 hover:bg-teal-700 text-white\"><FileText className=\"mr-2 h-4 w-4\" /> Generate Bill</Button>}\n                </DialogTrigger>\n            )}\n            <DialogContent className=\"sm:max-w-[700px] max-h-[85vh] flex flex-col p-0 gap-0 overflow-hidden\">\n                <DialogHeader className=\"px-6 py-4 border-b border-slate-100 dark:border-slate-800 shrink-0\">\n                    <DialogTitle className=\"text-xl font-semibold text-slate-800 dark:text-white flex items-center gap-2\">\n                        <FileText className=\"h-5 w-5 text-teal-600\" />\n                        Generate OPD Bill\n                    </DialogTitle>\n                    <DialogDescription className=\"text-slate-500\">\n                        Create a new invoice for outpatient services.\n                    </DialogDescription>\n                </DialogHeader>\n\n                <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n                    {/* Patient Selection */}\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"patient\" className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Select Patient</Label>\n                        <Select value={patientId} onValueChange={setPatientId} disabled={loadingPatients}>\n                            <SelectTrigger id=\"patient\" className=\"h-11 border-slate-200 focus:ring-teal-500\">\n                                <SelectValue placeholder={loadingPatients ? \"Loading patients...\" : \"Search or select patient\"} />\n                            </SelectTrigger>\n                            <SelectContent>\n                                {patientList.map((p) => (\n                                    <SelectItem key={p.uhid} value={p.uhid}>{p.full_name} ({p.uhid})</SelectItem>\n                                ))}\n                            </SelectContent>\n                        </Select>\n                    </div>\n\n                    <Separator className=\"bg-slate-100 dark:bg-slate-800\" />\n\n                    {/* Pending Lab Orders */}\n                    {pendingLabOrders.length > 0 && (\n                        <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800\">\n                            <h4 className=\"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2\">\n                                <FileText className=\"h-4 w-4\" /> Pending Lab Orders\n                            </h4>\n                            <div className=\"space-y-2\">\n                                {pendingLabOrders.map(order => (\n                                    <div key={order.id} className=\"flex justify-between items-center bg-white dark:bg-slate-950 p-3 rounded border border-blue-200 dark:border-blue-800\">\n                                        <div>\n                                            <div className=\"font-medium text-sm\">{order.order_id}</div>\n                                            <div className=\"text-xs text-muted-foreground\">\n                                                {order.tests.map((t: any) => t.test_name).join(\", \")}\n                                            </div>\n                                        </div>\n                                        <Button\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"h-8 border-blue-200 hover:bg-blue-50 text-blue-700\"\n                                            onClick={() => handleAddLabOrder(order)}\n                                            disabled={selectedLabOrderIds.includes(order.id)}\n                                        >\n                                            {selectedLabOrderIds.includes(order.id) ? \"Added\" : \"Add to Bill\"}\n                                        </Button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Add Item Section */}\n                    <div className=\"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-800 space-y-4\">\n                        <h4 className=\"text-sm font-semibold text-slate-800 dark:text-slate-200\">Add Service Item</h4>\n                        <div className=\"grid grid-cols-12 gap-4 items-end\">\n                            <div className=\"col-span-12 md:col-span-5 space-y-1.5\">\n                                <Label htmlFor=\"desc\" className=\"text-xs text-slate-500\">Service Description</Label>\n                                <Select value={description} onValueChange={setDescription}>\n                                    <SelectTrigger id=\"desc\" className=\"bg-white dark:bg-slate-950 h-9\">\n                                        <SelectValue placeholder=\"Select service\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        <SelectItem value=\"Consultation Fee\">Consultation Fee</SelectItem>\n                                        <SelectItem value=\"Lab Fee\">Lab Fee</SelectItem>\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                            <div className=\"col-span-4 md:col-span-2 space-y-1.5\">\n                                <Label htmlFor=\"qty\" className=\"text-xs text-slate-500\">Qty</Label>\n                                <Input\n                                    id=\"qty\"\n                                    type=\"number\"\n                                    min=\"1\"\n                                    value={quantity}\n                                    onChange={(e) => setQuantity(e.target.value)}\n                                    className=\"bg-white dark:bg-slate-950 h-9 text-right\"\n                                />\n                            </div>\n                            <div className=\"col-span-8 md:col-span-3 space-y-1.5\">\n                                <Label htmlFor=\"price\" className=\"text-xs text-slate-500\">Unit Price (â‚¹)</Label>\n                                <Input\n                                    id=\"price\"\n                                    type=\"number\"\n                                    value={unitPrice}\n                                    onChange={(e) => setUnitPrice(e.target.value)}\n                                    placeholder=\"0.00\"\n                                    className=\"bg-white dark:bg-slate-950 h-9 text-right\"\n                                />\n                            </div>\n                            <div className=\"col-span-12 md:col-span-2\">\n                                <Button onClick={handleAddItem} size=\"sm\" className=\"w-full bg-slate-800 hover:bg-slate-900 text-white dark:bg-slate-700 dark:hover:bg-slate-600 h-9\">\n                                    <Plus className=\"h-3.5 w-3.5 mr-1.5\" /> Add\n                                </Button>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Items Table */}\n                    <div className=\"border rounded-lg overflow-hidden border-slate-200 dark:border-slate-800\">\n                        <Table>\n                            <TableHeader className=\"bg-slate-50 dark:bg-slate-900\">\n                                <TableRow>\n                                    <TableHead className=\"w-[40%] pl-4\">Description</TableHead>\n                                    <TableHead className=\"text-right w-[15%]\">Qty</TableHead>\n                                    <TableHead className=\"text-right w-[20%]\">Price</TableHead>\n                                    <TableHead className=\"text-right w-[20%]\">Total</TableHead>\n                                    <TableHead className=\"w-[5%]\"></TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {items.length === 0 ? (\n                                    <TableRow>\n                                        <TableCell colSpan={5} className=\"h-24 text-center text-slate-500 text-sm italic\">\n                                            No items added yet. Add a service above.\n                                        </TableCell>\n                                    </TableRow>\n                                ) : (\n                                    items.map((item, index) => (\n                                        <TableRow key={index} className=\"hover:bg-slate-50/50 dark:hover:bg-slate-800/50\">\n                                            <TableCell className=\"pl-4 font-medium text-slate-700 dark:text-slate-300\">\n                                                {item.description}\n                                            </TableCell>\n                                            <TableCell className=\"text-right text-slate-600\">{item.quantity}</TableCell>\n                                            <TableCell className=\"text-right text-slate-600\">â‚¹{item.unitPrice.toFixed(2)}</TableCell>\n                                            <TableCell className=\"text-right font-medium text-slate-900 dark:text-white\">â‚¹{item.total.toFixed(2)}</TableCell>\n                                            <TableCell>\n                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-slate-400 hover:text-red-500 hover:bg-red-50\" onClick={() => handleRemoveItem(index)}>\n                                                    <Trash2 className=\"h-4 w-4\" />\n                                                </Button>\n                                            </TableCell>\n                                        </TableRow>\n                                    ))\n                                )}\n                            </TableBody>\n                        </Table>\n                    </div>\n\n                    {/* Totals Section */}\n                    {items.length > 0 && (\n                        <div className=\"flex flex-col items-end gap-3 pt-2\">\n                            <div className=\"w-full max-w-[280px] space-y-3\">\n                                <div className=\"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400\">\n                                    <span>Subtotal</span>\n                                    <span className=\"font-medium\">â‚¹{calculateSubtotal().toFixed(2)}</span>\n                                </div>\n                                <div className=\"flex justify-between items-center text-sm\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className=\"text-slate-600 dark:text-slate-400\">Discount%</span>\n                                        <Input\n                                            type=\"number\"\n                                            className=\"w-16 h-7 text-right text-xs px-2\"\n                                            value={discount}\n                                            onChange={(e) => setDiscount(e.target.value)}\n                                            min=\"0\"\n                                            max=\"100\"\n                                        />\n                                    </div>\n                                    <span className=\"text-red-500 font-medium\">- â‚¹{calculateDiscountAmount().toFixed(2)}</span>\n                                </div>\n                                <Separator className=\"my-1\" />\n                                <div className=\"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400\">\n                                    <span>Base Amount</span>\n                                    <span className=\"font-medium\">â‚¹{calculateBaseAmount().toFixed(2)}</span>\n                                </div>\n                                {calculateGST() > 0 && (\n                                    <div className=\"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400\">\n                                        <span>GST (18%)</span>\n                                        <span className=\"font-medium text-blue-600 dark:text-blue-400\">+ â‚¹{calculateGST().toFixed(2)}</span>\n                                    </div>\n                                )}\n                                <Separator className=\"my-1\" />\n                                <div className=\"flex justify-between items-center text-base font-bold text-slate-900 dark:text-white\">\n                                    <span>Grand Total</span>\n                                    <span className=\"text-teal-700 dark:text-teal-400\">\n                                        â‚¹{calculateTotal().toFixed(2)}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <DialogFooter className=\"px-6 py-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/20 shrink-0\">\n                    <Button variant=\"outline\" onClick={() => setShowOpen(false)} className=\"mr-2\">Cancel</Button>\n                    <Button\n                        onClick={handleGenerateBill}\n                        disabled={submitting || items.length === 0 || !patientId}\n                        className=\"bg-teal-600 hover:bg-teal-700 text-white min-w-[140px]\"\n                    >\n                        {submitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                        Generate Bill\n                    </Button>\n                </DialogFooter>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\billing\\UnifiedBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\dashboard\\DataTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\dashboard\\StatsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\dashboard\\StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\doctor\\ConsultationActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\AboutSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\DoctorsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\HomeNavbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\PatientFeedbackSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\ServicesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\home\\TestimonialsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\lab\\LabResultDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\lab\\LabResultEntryDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\labels\\ClinicLabel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\layout\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\layout\\FooterBrandPartner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\medical\\AddMedicalRecordDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\medical\\ConsultationDetailsDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initialRecord'. Either include it or remove the dependency array.","line":84,"column":8,"nodeType":"ArrayExpression","endLine":84,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [showOpen, recordId, initialRecord]","fix":{"range":[2629,2649],"text":"[showOpen, recordId, initialRecord]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n    FileText,\n    Calendar,\n    User,\n    Stethoscope,\n    Pill,\n    Activity,\n    Clock,\n    AlertCircle,\n    CheckCircle2,\n    Loader2\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { medicalRecordService, MedicalRecord } from \"@/services/medicalRecordService\";\nimport { format } from \"date-fns\";\nimport { toast } from \"sonner\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { generateConsultationPDF } from \"@/utils/consultationUtils\";\nimport { Download, Printer } from \"lucide-react\";\n\ninterface ConsultationDetailsDialogProps {\n    children?: React.ReactNode;\n    recordId?: string;\n    initialRecord?: MedicalRecord | null;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n}\n\nexport function ConsultationDetailsDialog({\n    children,\n    recordId,\n    initialRecord = null,\n    open,\n    onOpenChange\n}: ConsultationDetailsDialogProps) {\n    const [internalOpen, setInternalOpen] = useState(false);\n    const isControlled = open !== undefined;\n    const showOpen = isControlled ? open : internalOpen;\n    const setShowOpen = (newOpen: boolean) => {\n        if (onOpenChange) onOpenChange(newOpen);\n        else setInternalOpen(newOpen);\n    };\n\n    const [record, setRecord] = useState<MedicalRecord | null>(initialRecord);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    useEffect(() => {\n        if (initialRecord) {\n            setRecord(initialRecord);\n        }\n    }, [initialRecord]);\n\n    useEffect(() => {\n        if (showOpen && recordId && !initialRecord) {\n            const fetchRecord = async () => {\n                setLoading(true);\n                setError(\"\");\n                try {\n                    const data = await medicalRecordService.getRecordById(recordId);\n                    setRecord(data);\n                } catch (err) {\n                    console.error(\"Failed to fetch medical record:\", err);\n                    setError(\"Failed to load consultation details.\");\n                    toast.error(\"Could not load medical record details\");\n                } finally {\n                    setLoading(false);\n                }\n            };\n            fetchRecord();\n        }\n    }, [showOpen, recordId]);\n\n    const formatDate = (dateString?: string) => {\n        if (!dateString) return \"N/A\";\n        try {\n            return format(new Date(dateString), 'dd MMM yyyy, h:mm a');\n        } catch {\n            return dateString;\n        }\n    };\n\n    const getInitials = (firstName: string, lastName: string) => {\n        return `${firstName?.charAt(0) || ''}${lastName?.charAt(0) || ''}`.toUpperCase();\n    };\n\n    return (\n        <Dialog open={showOpen} onOpenChange={setShowOpen}>\n            {children && (\n                <DialogTrigger asChild>\n                    {children}\n                </DialogTrigger>\n            )}\n            <DialogContent className=\"max-w-4xl max-h-[90vh] p-0 gap-0 overflow-hidden flex flex-col\">\n                {loading ? (\n                    <div className=\"h-64 flex flex-col items-center justify-center gap-4 text-muted-foreground\">\n                        <Loader2 className=\"h-8 w-8 animate-spin\" />\n                        <p>Loading consultation record...</p>\n                    </div>\n                ) : error ? (\n                    <div className=\"h-64 flex flex-col items-center justify-center gap-4 text-destructive p-6 text-center\">\n                        <AlertCircle className=\"h-8 w-8\" />\n                        <p>{error}</p>\n                        <Button variant=\"outline\" onClick={() => setShowOpen(false)}>Close</Button>\n                    </div>\n                ) : record ? (\n                    <>\n                        <DialogHeader className=\"p-6 pb-2 border-b bg-muted/20\">\n                            <div className=\"flex items-start justify-between\">\n                                <div>\n                                    <DialogTitle className=\"text-xl flex items-center gap-2\">\n                                        <FileText className=\"h-5 w-5 text-primary\" />\n                                        Medical Consultation Record\n                                    </DialogTitle>\n                                    <DialogDescription className=\"mt-1 flex items-center gap-3\">\n                                        <Badge variant=\"outline\" className=\"gap-1\">\n                                            <Calendar className=\"h-3 w-3\" />\n                                            {formatDate(record.date || record.createdAt)}\n                                        </Badge>\n                                        <Badge variant=\"secondary\" className=\"gap-1\">\n                                            OPD Consultation\n                                        </Badge>\n                                    </DialogDescription>\n                                </div>\n                                <div className=\"text-right text-sm text-muted-foreground\">\n                                    <div className=\"font-medium text-foreground\">\n                                        Dr. {record.doctor.firstName} {record.doctor.lastName}\n                                    </div>\n                                    <div className=\"text-xs\">Attending Physician</div>\n                                </div>\n                            </div>\n                        </DialogHeader>\n\n                        <ScrollArea className=\"flex-1 overflow-y-auto\">\n                            <div className=\"p-6 space-y-6\">\n                                {/* Patient Information Card */}\n                                <Card className=\"border-l-4 border-l-primary/50 shadow-sm bg-card\">\n                                    <CardContent className=\"p-5\">\n                                        <div className=\"flex flex-col md:flex-row gap-6 items-start md:items-center justify-between\">\n                                            {/* Patient Name & Avatar */}\n                                            <div className=\"flex items-center gap-4 min-w-0 flex-1\">\n                                                <div className=\"h-12 w-12 shrink-0 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg\">\n                                                    {getInitials(record.patient.firstName, record.patient.lastName)}\n                                                </div>\n                                                <div className=\"min-w-0\">\n                                                    <p className=\"text-xs text-muted-foreground uppercase font-semibold tracking-wider\">Patient</p>\n                                                    <p className=\"font-semibold text-lg truncate\">\n                                                        {record.patient.firstName} {record.patient.lastName}\n                                                    </p>\n                                                </div>\n                                            </div>\n\n                                            {/* IDs Section - Flex wrapper to keep them together but wrap on small screens */}\n                                            <div className=\"flex flex-wrap gap-8 items-center\">\n                                                <div className=\"min-w-[100px]\">\n                                                    <p className=\"text-xs text-muted-foreground uppercase font-semibold tracking-wider\">Patient ID</p>\n                                                    <p className=\"font-medium font-mono text-sm tracking-tight\">{record.patientId.toUpperCase()}</p>\n                                                </div>\n                                                <div className=\"min-w-[100px]\">\n                                                    <p className=\"text-xs text-muted-foreground uppercase font-semibold tracking-wider\">Record ID</p>\n                                                    <p className=\"font-medium font-mono text-sm text-muted-foreground tracking-tight\">#{record.id}</p>\n                                                </div>\n                                                <Button variant=\"outline\" size=\"sm\" className=\"gap-2 shrink-0 hidden sm:flex\" disabled>\n                                                    <Activity className=\"h-4 w-4\" />\n                                                    Vitals History\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    </CardContent>\n                                </Card>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                    {/* Left Column: Assessment */}\n                                    <div className=\"md:col-span-2 space-y-6\">\n                                        {/* Symptoms & Vitals Section */}\n                                        <section>\n                                            <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2 text-primary\">\n                                                <Stethoscope className=\"h-4 w-4\" />\n                                                Symptoms & Vitals\n                                            </h3>\n                                            <Card>\n                                                <CardContent className=\"p-4 space-y-4\">\n                                                    <div>\n                                                        <span className=\"text-xs font-semibold text-muted-foreground uppercase\">Chief Complaint / Symptoms</span>\n                                                        <p className=\"mt-1 text-sm leading-relaxed\">\n                                                            {record.chiefComplaint || \"No symptoms recorded.\"}\n                                                        </p>\n                                                    </div>\n\n                                                    {record.vitals && (\n                                                        <>\n                                                            <Separator />\n                                                            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2\">\n                                                                {record.vitals.bloodPressureSystolic && (\n                                                                    <div className=\"bg-muted/30 p-2 rounded-md\">\n                                                                        <span className=\"text-xs text-muted-foreground block\">Blood Pressure</span>\n                                                                        <span className=\"font-semibold text-sm\">\n                                                                            {record.vitals.bloodPressureSystolic}/{record.vitals.bloodPressureDiastolic} mmHg\n                                                                        </span>\n                                                                    </div>\n                                                                )}\n                                                                {record.vitals.heartRate && (\n                                                                    <div className=\"bg-muted/30 p-2 rounded-md\">\n                                                                        <span className=\"text-xs text-muted-foreground block\">Heart Rate</span>\n                                                                        <span className=\"font-semibold text-sm\">{record.vitals.heartRate} bpm</span>\n                                                                    </div>\n                                                                )}\n                                                                {record.vitals.temperature && (\n                                                                    <div className=\"bg-muted/30 p-2 rounded-md\">\n                                                                        <span className=\"text-xs text-muted-foreground block\">Temperature</span>\n                                                                        <span className=\"font-semibold text-sm\">{record.vitals.temperature}Â°F</span>\n                                                                    </div>\n                                                                )}\n                                                                {record.vitals.weight && (\n                                                                    <div className=\"bg-muted/30 p-2 rounded-md\">\n                                                                        <span className=\"text-xs text-muted-foreground block\">Weight</span>\n                                                                        <span className=\"font-semibold text-sm\">{record.vitals.weight} kg</span>\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        </>\n                                                    )}\n                                                </CardContent>\n                                            </Card>\n                                        </section>\n\n                                        {/* Diagnosis Section */}\n                                        <section>\n                                            <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2 text-primary\">\n                                                <Activity className=\"h-4 w-4\" />\n                                                Diagnosis\n                                            </h3>\n                                            <div className=\"bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900 rounded-lg p-4\">\n                                                <p className=\"font-medium text-lg text-blue-900 dark:text-blue-100\">\n                                                    {record.diagnosis}\n                                                </p>\n                                                {record.icdCode && (\n                                                    <Badge className=\"mt-2\" variant=\"outline\">{record.icdCode}</Badge>\n                                                )}\n                                            </div>\n                                        </section>\n\n                                        {/* Treatment Information */}\n                                        <section>\n                                            <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2 text-primary\">\n                                                <FileText className=\"h-4 w-4\" />\n                                                Treatment Plan & Notes\n                                            </h3>\n                                            <Card>\n                                                <CardContent className=\"p-4 text-sm leading-relaxed whitespace-pre-wrap\">\n                                                    {record.treatmentNotes || \"No treatment notes recorded.\"}\n                                                </CardContent>\n                                            </Card>\n                                        </section>\n                                    </div>\n\n                                    {/* Right Column: Prescriptions */}\n                                    <div className=\"md:col-span-1\">\n                                        <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2 text-primary\">\n                                            <Pill className=\"h-4 w-4\" />\n                                            Prescriptions\n                                        </h3>\n                                        {record.prescriptions && record.prescriptions.length > 0 ? (\n                                            <div className=\"space-y-3\">\n                                                {record.prescriptions.map((med, idx) => (\n                                                    <Card key={idx} className=\"overflow-hidden border-l-4 border-l-green-500 shadow-sm hover:shadow-md transition-shadow\">\n                                                        <CardContent className=\"p-3\">\n                                                            <div className=\"font-semibold text-base\">{med.medicineName}</div>\n                                                            <div className=\"text-sm text-muted-foreground mt-1\">\n                                                                {med.dosage} â€¢ {med.frequency}\n                                                            </div>\n                                                            <div className=\"flex items-center gap-2 mt-2 text-xs\">\n                                                                <Clock className=\"h-3 w-3 text-muted-foreground\" />\n                                                                <span>{med.duration}</span>\n                                                            </div>\n                                                            {med.instructions && (\n                                                                <div className=\"mt-2 pt-2 border-t text-xs text-muted-foreground italic\">\n                                                                    \"{med.instructions}\"\n                                                                </div>\n                                                            )}\n                                                        </CardContent>\n                                                    </Card>\n                                                ))}\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-sm text-muted-foreground text-center p-8 bg-muted/20 rounded-lg border border-dashed\">\n                                                No prescriptions ordered\n                                            </div>\n                                        )}\n\n                                        {/* Lab Orders Section if available */}\n                                        {record.labOrders && record.labOrders.length > 0 && (\n                                            <div className=\"mt-6\">\n                                                <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2 text-primary\">\n                                                    <Activity className=\"h-4 w-4\" />\n                                                    Lab Orders\n                                                </h3>\n                                                <div className=\"flex flex-wrap gap-2\">\n                                                    {record.labOrders.map((lab, idx) => (\n                                                        <Badge key={idx} variant=\"secondary\" className=\"px-3 py-1\">\n                                                            {lab}\n                                                        </Badge>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </ScrollArea>\n\n                        <div className=\"p-4 border-t bg-muted/20 flex flex-col sm:flex-row justify-between items-center gap-4\">\n                            <div className=\"flex gap-4 text-xs text-muted-foreground mr-auto\">\n                                <span>Created: {formatDate(record.createdAt)}</span>\n                                {record.updatedAt && record.updatedAt !== record.createdAt && (\n                                    <span>Updated: {formatDate(record.updatedAt)}</span>\n                                )}\n                            </div>\n                            <div className=\"flex gap-2 w-full sm:w-auto\">\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    className=\"gap-2 flex-1 sm:flex-initial\"\n                                    onClick={() => generateConsultationPDF(record, { action: 'print' })}\n                                >\n                                    <Printer className=\"h-4 w-4\" />\n                                    Print\n                                </Button>\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    className=\"gap-2 flex-1 sm:flex-initial\"\n                                    onClick={() => generateConsultationPDF(record, { action: 'download' })}\n                                >\n                                    <Download className=\"h-4 w-4\" />\n                                    Download\n                                </Button>\n                                <Button size=\"sm\" onClick={() => setShowOpen(false)} className=\"flex-1 sm:flex-initial\">Close Record</Button>\n                            </div>\n                        </div>\n                    </>\n                ) : null}\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\medical\\CreateLabOrderDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\medical\\GeneratePrescriptionDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\medical\\PrescriptionDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\opd\\FollowUpDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\patients\\FilterChips.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\patients\\PatientDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\patients\\PatientFilterPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\patients\\PatientRegistrationDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'formData.state'. Either include it or remove the dependency array.","line":125,"column":8,"nodeType":"ArrayExpression","endLine":125,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [formData.country, formData.state]","fix":{"range":[3794,3812],"text":"[formData.country, formData.state]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'formData.district'. Either include it or remove the dependency array.","line":139,"column":8,"nodeType":"ArrayExpression","endLine":139,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [formData.district, formData.state]","fix":{"range":[4326,4342],"text":"[formData.district, formData.state]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'formData.mandal'. Either include it or remove the dependency array.","line":153,"column":8,"nodeType":"ArrayExpression","endLine":153,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [formData.district, formData.mandal]","fix":{"range":[4831,4850],"text":"[formData.district, formData.mandal]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initialFormState'. Either include it or remove the dependency array.","line":218,"column":8,"nodeType":"ArrayExpression","endLine":218,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [initialFormState, open, patientToEdit]","fix":{"range":[7618,7639],"text":"[initialFormState, open, patientToEdit]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'FALLBACK_DOCTORS'. Either include it or remove the dependency array.","line":348,"column":8,"nodeType":"ArrayExpression","endLine":348,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [FALLBACK_DOCTORS]","fix":{"range":[14250,14252],"text":"[FALLBACK_DOCTORS]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Button } from \"@/components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport { CheckCircle2, Download, Printer } from \"lucide-react\";\nimport { staffService } from \"@/services/staffService\";\nimport { usePatients } from \"@/contexts/PatientContext\";\nimport {\n    addWatermark,\n    addHeaderLogo,\n    generatePdfFilename,\n    maskData,\n    getTransparentTableStyles,\n    getBase64ImageFromUrl\n} from \"@/utils/pdfUtils\";\nimport {\n    getSortedCountries,\n    getStatesByCountry,\n    getDistrictsByState,\n    getMandalsByDistrict,\n    getPhoneCodeByCountry,\n    Country,\n    State,\n    District,\n    Mandal,\n    states,\n    districts,\n    mandals\n} from \"@/data/geoData\";\n\ninterface PatientRegistrationDialogProps {\n    children: React.ReactNode;\n    onRegister?: (patient: any) => void;\n    patientToEdit?: any;\n}\n\nexport function PatientRegistrationDialog({ children, onRegister, patientToEdit }: PatientRegistrationDialogProps) {\n    const [open, setOpen] = useState(false);\n    const [showReceipt, setShowReceipt] = useState(false);\n    const { toast } = useToast();\n    const { addPatient, updatePatient } = usePatients();\n\n    // Initial State\n    const initialFormState = {\n        uhid: 'P-' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + '-' + Math.floor(1000 + Math.random() * 9000),\n        title: '',\n        firstName: '',\n        lastName: '',\n        gender: '',\n        age: '',\n        bloodGroup: '',\n        phoneCode: '+91',\n        phone: '',\n        altPhone: '',\n        email: '',\n        address: '',\n        country: 'IN',\n        state: '',\n        district: '',\n        mandal: '',\n        village: '',\n        pincode: '',\n        idType: '',\n        idNumber: '',\n        referredBy: '',\n        referredPerson: '',\n        consultingDoctor: '',\n        department: '', // Added department field\n        paymentType: '',\n        paymentMode: '',\n        emergencyName: '',\n        emergencyPhone: '',\n        relation: '',\n        registrationFee: '500'\n    };\n\n    const [formData, setFormData] = useState(initialFormState);\n\n    // Geographic data - dynamic based on selection\n    const sortedCountries = useMemo(() => getSortedCountries(), []);\n    const [availableStates, setAvailableStates] = useState<State[]>([]);\n    const [availableDistricts, setAvailableDistricts] = useState<District[]>([]);\n    const [availableMandals, setAvailableMandals] = useState<Mandal[]>([]);\n\n    // Update phone code when country changes\n    useEffect(() => {\n        if (formData.country) {\n            const phoneCode = getPhoneCodeByCountry(formData.country);\n            setFormData(prev => ({ ...prev, phoneCode }));\n        }\n    }, [formData.country]);\n\n    // Update available states when country changes\n    useEffect(() => {\n        if (formData.country) {\n            const states = getStatesByCountry(formData.country);\n            setAvailableStates(states);\n            // Reset state, district, mandal when country changes\n            if (!states.find(s => s.code === formData.state)) {\n                setFormData(prev => ({ ...prev, state: '', district: '', mandal: '' }));\n            }\n        } else {\n            setAvailableStates([]);\n        }\n    }, [formData.country]);\n\n    // Update available districts when state changes\n    useEffect(() => {\n        if (formData.state) {\n            const districts = getDistrictsByState(formData.state);\n            setAvailableDistricts(districts);\n            // Reset district, mandal when state changes\n            if (!districts.find(d => d.code === formData.district)) {\n                setFormData(prev => ({ ...prev, district: '', mandal: '' }));\n            }\n        } else {\n            setAvailableDistricts([]);\n        }\n    }, [formData.state]);\n\n    // Update available mandals when district changes\n    useEffect(() => {\n        if (formData.district) {\n            const mandals = getMandalsByDistrict(formData.district);\n            setAvailableMandals(mandals);\n            // Reset mandal when district changes\n            if (!mandals.find(m => m.code === formData.mandal)) {\n                setFormData(prev => ({ ...prev, mandal: '' }));\n            }\n        } else {\n            setAvailableMandals([]);\n        }\n    }, [formData.district]);\n\n    // Effect to populate form when patientToEdit changes or dialog opens\n    useEffect(() => {\n        if (open && patientToEdit) {\n            // Split full name if possible, or just use as first name\n            const nameParts = patientToEdit.full_name ? patientToEdit.full_name.split(' ') : ['', ''];\n\n            // Parse address components\n            let address = patientToEdit.address || '';\n            let village = '';\n            let mandal = '';\n            let district = '';\n            let state = '';\n            let pincode = '';\n\n            if (address && address.includes(',')) {\n                const parts = address.split(',').map((p: string) => p.trim());\n                if (parts.length >= 5) {\n                    // Start from the end: State - Pincode\n                    const statePin = parts[parts.length - 1];\n                    const statePinParts = statePin.split('-');\n\n                    if (statePinParts.length === 2) {\n                        state = statePinParts[0].trim();\n                        pincode = statePinParts[1].trim();\n                        // Work backwards\n                        district = parts[parts.length - 2];\n                        mandal = parts[parts.length - 3];\n                        village = parts[parts.length - 4];\n                        // Everything before village is the street address\n                        address = parts.slice(0, parts.length - 4).join(', ');\n                    }\n                }\n            }\n\n            setFormData({\n                ...initialFormState,\n                ...patientToEdit,\n                uhid: patientToEdit.patient_id || patientToEdit.uhid,\n                firstName: nameParts[0] || '',\n                lastName: nameParts.slice(1).join(' ') || '',\n                age: patientToEdit.age ? String(patientToEdit.age) : '',\n                bloodGroup: patientToEdit.blood_group || '',\n                phone: patientToEdit.phone || '',\n                email: patientToEdit.email || '',\n\n                // Mapped address fields\n                address,\n                village,\n                mandal,\n                district,\n                state,\n                pincode,\n\n                // Map other potential fields if they exist in patient object\n                gender: patientToEdit.gender ? patientToEdit.gender.charAt(0).toUpperCase() + patientToEdit.gender.slice(1) : '',\n            });\n        } else if (open && !patientToEdit) {\n            // Reset to new form if opening in \"Add\" mode\n            setFormData({\n                ...initialFormState,\n                uhid: 'P-' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + '-' + Math.floor(1000 + Math.random() * 9000),\n            });\n        }\n    }, [open, patientToEdit]);\n\n    const handleChange = (field: string, value: string) => {\n        setFormData(prev => ({ ...prev, [field]: value }));\n    };\n\n    const handlePhoneChange = (e: React.ChangeEvent<HTMLInputElement>, field: string = 'phone') => {\n        const value = e.target.value;\n        const isIndia = formData.country === 'IN';\n        const maxLength = isIndia ? 10 : 15;\n\n        // Only allow numbers and max length\n        if (value === '' || (/^\\d+$/.test(value) && value.length <= maxLength)) {\n            handleChange(field, value);\n        }\n    };\n\n    const handlePincodeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = e.target.value;\n        // Allow alphanumeric for international postal codes (max 10 characters)\n        if (value === '' || (/^[a-zA-Z0-9\\s-]+$/.test(value) && value.length <= 10)) {\n            handleChange('pincode', value);\n        }\n    };\n\n    const handleIdNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = e.target.value;\n        const idType = formData.idType;\n\n        if (idType === 'aadhaar') {\n            // Allow numbers only, max 12 digits\n            if (value === '' || (/^\\d+$/.test(value) && value.length <= 12)) {\n                handleChange('idNumber', value);\n            }\n        } else if (idType === 'pan' || idType === 'passport') {\n            // Allow alphanumeric only\n            if (value === '' || /^[a-zA-Z0-9]*$/.test(value)) {\n                // Limit PAN to 10 chars\n                if (idType === 'pan' && value.length > 10) return;\n                // Limit Passport to 8 chars\n                if (idType === 'passport' && value.length > 8) return;\n\n                handleChange('idNumber', value.toUpperCase());\n            } else {\n                if (value !== '') {\n                    toast({\n                        title: \"Validation Error\",\n                        description: idType === 'passport'\n                            ? \"Special characters are not allowed in Passport number.\"\n                            : \"Special characters are not allowed in PAN number.\",\n                        variant: \"destructive\"\n                    });\n                }\n            }\n        } else {\n            // Default fallthrough if no type selected or other\n            handleChange('idNumber', value);\n        }\n    };\n    const PREDEFINED_DEPARTMENTS = [\n        \"Orthopaedics\",\n        \"Neurosurgeon\",\n        \"General Physician\",\n        \"Paediatric Orthopaedics\",\n        \"Pulmonology\",\n        \"Oncology\",\n        \"Paediatric Hemato-Oncology\"\n    ];\n\n    const [doctorsList, setDoctorsList] = useState<any[]>([]);\n\n    // Department mapping for staff/doctors that may have different department names\n    const getDepartmentMapping = (dept: string): string | null => {\n        const deptLower = (dept || \"\").toLowerCase();\n        if (deptLower.includes(\"oncology\") && !deptLower.includes(\"paediatric\")) return \"Oncology\";\n        if (deptLower.includes(\"pulmonology\")) return \"Pulmonology\";\n        if (deptLower.includes(\"hemato\") || deptLower.includes(\"paediatric hemato\")) return \"Paediatric Hemato-Oncology\";\n        if (deptLower.includes(\"ortho\") && !deptLower.includes(\"paediatric\")) return \"Orthopaedics\";\n        if (deptLower.includes(\"general physician\") || deptLower === \"general physician\") return \"General Physician\";\n        if (deptLower.includes(\"paediatric ortho\") || deptLower.includes(\"pediatric ortho\")) return \"Paediatric Orthopaedics\";\n        if (deptLower.includes(\"neuro\")) return \"Neurosurgeon\";\n        return null;\n    };\n\n    // Helper function to normalize name for comparison (remove extra spaces, lowercase)\n    const normalizeName = (name: string) => name?.toLowerCase().replace(/\\s+/g, '').trim() || '';\n\n    const FALLBACK_DOCTORS = [\n        { id: '1', full_name: 'Dr. B. Sai Phani Chandra', specialization: 'Consultant Orthopaedics', department: 'Orthopaedics', role: 'doctor', status: 'active' },\n        { id: '4', full_name: 'Dr. Hariprakash', specialization: 'Consultant Orthopaedic', department: 'Orthopaedics', role: 'doctor', status: 'active' },\n        { id: '2', full_name: 'Dr. Swetha Pendyala', specialization: 'Neurosurgeon', department: 'Neurosurgeon', role: 'doctor', status: 'active' },\n        { id: '3', full_name: 'Dr. Roshan Kumar Jaiswal', specialization: 'Paediatric Orthopaedic', department: 'Paediatric Orthopaedics', role: 'doctor', status: 'active' },\n        { id: '5', full_name: 'Dr. Ravikanti Nagaraju', specialization: 'General Physician', department: 'General Physician', role: 'doctor', status: 'active' },\n        { id: '7', full_name: 'Dr. Mahesh Gudelli', specialization: 'Pulmonology', department: 'Pulmonology', role: 'doctor', status: 'active' },\n        { id: '8', full_name: 'Dr. Sneha Sagar', specialization: 'Medical Oncology', department: 'Oncology', role: 'doctor', status: 'active' },\n        { id: '9', full_name: 'Dr. T Dheeraj', specialization: 'Surgical Oncology', department: 'Oncology', role: 'doctor', status: 'active' },\n        { id: '10', full_name: 'Dr. Navya Sri Yenigalla', specialization: 'Paediatric Hemato-Oncology', department: 'Paediatric Hemato-Oncology', role: 'doctor', status: 'active' },\n    ];\n\n    useEffect(() => {\n        const fetchDoctors = async () => {\n            try {\n                const staff = await staffService.getStaff();\n                // Filter for doctors, loosen status check to include 'active' or if generic\n                const activeDoctors = staff.filter((s: any) => s.role === 'doctor');\n\n                // Merge API doctors with fallback doctors to ensure all 9 specific doctors are always visible\n                const mergedDoctors = [...activeDoctors];\n\n                FALLBACK_DOCTORS.forEach(fallback => {\n                    const exists = mergedDoctors.some(d =>\n                        normalizeName(d.full_name) === normalizeName(fallback.full_name)\n                    );\n                    if (!exists) {\n                        mergedDoctors.push({ ...fallback, isPredefined: true });\n                    }\n                });\n\n                if (mergedDoctors.length > 0) {\n                    setDoctorsList(mergedDoctors);\n                } else {\n                    console.warn(\"No doctors found from API or fallback list.\");\n                    setDoctorsList(FALLBACK_DOCTORS);\n                }\n            } catch (error) {\n                console.error(\"Failed to fetch doctors, using fallback\", error);\n                setDoctorsList(FALLBACK_DOCTORS);\n            }\n        };\n        fetchDoctors();\n    }, []);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        // Basic required fields - mandal is only required for India\n        const isIndia = formData.country === 'IN';\n        const mandalRequired = isIndia && availableMandals.length > 0;\n\n        if (!formData.firstName || !formData.phone || !formData.email || !formData.address || !formData.country || !formData.state || !formData.village || !formData.pincode) {\n            toast({\n                title: \"Validation Error\",\n                description: \"Please fill in all required fields.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        // District validation - if state is selected and districts are available, district is required\n        if (formData.state && availableDistricts.length > 0 && !formData.district) {\n            toast({\n                title: \"Validation Error\",\n                description: \"Please select a district.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        // Phone validation - flexible for international numbers\n        if (isIndia && formData.phone.length !== 10) {\n            toast({\n                title: \"Validation Error\",\n                description: \"Phone number must be exactly 10 digits for India.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        if (!isIndia && formData.phone.length < 6) {\n            toast({\n                title: \"Validation Error\",\n                description: \"Please enter a valid phone number (minimum 6 digits).\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        // ID Validation - Only validate if BOTH idType AND idNumber are provided (Identification is optional)\n        if (formData.idType && formData.idNumber) {\n            if (formData.idType === 'aadhaar' && formData.idNumber.length !== 12) {\n                toast({\n                    title: \"Validation Error\",\n                    description: \"Aadhaar number must be exactly 12 digits.\",\n                    variant: \"destructive\"\n                });\n                return;\n            }\n\n            if (formData.idType === 'pan') {\n                const panRegex = /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/;\n                // Check if length is wrong\n                if (formData.idNumber.length !== 10) {\n                    toast({\n                        title: \"Validation Error\",\n                        description: \"PAN number must be exactly 10 characters.\",\n                        variant: \"destructive\"\n                    });\n                    return;\n                }\n                // Check if only numeric\n                if (/^\\d+$/.test(formData.idNumber)) {\n                    toast({\n                        title: \"Validation Error\",\n                        description: \"PAN number must be alphanumeric (e.g., ABCDE1234F).\",\n                        variant: \"destructive\"\n                    });\n                    return;\n                }\n                // Check full regex\n                if (!panRegex.test(formData.idNumber)) {\n                    toast({\n                        title: \"Validation Error\",\n                        description: \"Invalid PAN format. Must be 5 letters, 4 digits, 1 letter (e.g., ABCDE1234F).\",\n                        variant: \"destructive\"\n                    });\n                    return;\n                }\n            }\n\n            if (formData.idType === 'passport') {\n                if (!/^[a-zA-Z0-9]+$/.test(formData.idNumber)) {\n                    toast({\n                        title: \"Validation Error\",\n                        description: \"Special characters are not allowed in Passport number.\",\n                        variant: \"destructive\"\n                    });\n                    return;\n                }\n\n                if (formData.idNumber.length > 8) {\n                    toast({\n                        title: \"Validation Error\",\n                        description: \"Passport number must be maximum 8 characters.\",\n                        variant: \"destructive\"\n                    });\n                    return;\n                }\n            }\n        }\n\n        if (formData.altPhone && isIndia && formData.altPhone.length !== 10) {\n            toast({\n                title: \"Validation Error\",\n                description: \"Alternate phone number must be exactly 10 digits.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n\n\n        // Resolve names from codes for legible address storage\n        const stateName = states.find(s => s.code === formData.state)?.name || formData.state;\n        const districtName = districts.find(d => d.code === formData.district)?.name || formData.district;\n        const mandalName = mandals.find(m => m.code === formData.mandal)?.name || formData.mandal;\n\n        const submissionData = {\n            ...formData,\n            state: stateName,\n            district: districtName,\n            mandal: mandalName,\n            full_name: `${formData.title} ${formData.firstName} ${formData.lastName}`.trim(),\n            date_of_birth: new Date(new Date().getFullYear() - parseInt(formData.age || '0'), 0, 1).toISOString(),\n            gender: formData.gender,\n            blood_group: formData.bloodGroup,\n            allergies: []\n        };\n\n        try {\n            if (patientToEdit && updatePatient) {\n                await updatePatient(patientToEdit.uhid, submissionData);\n                toast({\n                    title: \"Patient Updated\",\n                    description: \"Patient details have been successfully updated.\",\n                });\n                setOpen(false); // Close dialog after update\n            } else {\n                await addPatient(submissionData);\n\n                if (onRegister) {\n                    // logic for callback\n                }\n\n                toast({\n                    title: \"Patient Registered\",\n                    description: \"New patient has been successfully registered.\",\n                });\n                setShowReceipt(true);\n            }\n\n        } catch (error: any) {\n            console.error(\"Registration error:\", error);\n            // api.ts throws an Error object with the extracted message\n            const errorMessage = error.message || \"Could not register patient. Please try again.\";\n\n            toast({\n                variant: \"destructive\",\n                title: \"Registration Failed\",\n                description: errorMessage\n            });\n        }\n    };\n\n    const generateReceiptDoc = async () => {\n        const doc = new jsPDF();\n\n        // Generate filename and check if masked\n        const patientName = `${formData.title} ${formData.firstName} ${formData.lastName}`.trim();\n        const { filename, isMasked } = generatePdfFilename(patientName, formData.uhid, formData.uhid);\n\n        try {\n            // Add Full Page Background Template\n            const headerUrl = '/header_template.jpg';\n            const headerBase64 = await getBase64ImageFromUrl(headerUrl);\n            doc.addImage(headerBase64, 'JPEG', 0, 0, 210, 297);\n        } catch (error) {\n            console.error(\"Failed to load background template\", error);\n            // Fallback if image fails? We'll just proceed with white background but keeping content\n        }\n\n        /* \n           Manual Header, Footer, and Watermark removed as they are part of the background template.\n        */\n\n        // Title - Positioned below the header area of the background image\n        // Adjust Y coordinate as needed based on the template's header height\n        const contentStartY = 45;\n\n        doc.setFontSize(12);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setTextColor(0, 0, 0);\n        doc.text(isMasked ? \"Registration Receipt (Masked Copy)\" : \"Registration Receipt\", 105, contentStartY, { align: \"center\" });\n\n        // Prepare data (apply masking if this is 2nd+ download)\n        const displayName = isMasked ? maskData(patientName, 'name') : patientName;\n        const displayPhone = isMasked ? maskData(formData.phone, 'phone') : formData.phone;\n\n        // Resolve names for the PDF document\n        const stateName = states.find(s => s.code === formData.state)?.name || formData.state;\n        const districtName = districts.find(d => d.code === formData.district)?.name || formData.district;\n        const mandalName = mandals.find(m => m.code === formData.mandal)?.name || formData.mandal;\n\n        const addressString = `${formData.address}, ${formData.village}, ${mandalName}, ${districtName}, ${stateName} â€“ ${formData.pincode}`;\n        const displayAddress = isMasked ? maskData(addressString, 'address') : addressString;\n\n        // Patient Details Table\n        const tableData = [\n            [\"UHID\", formData.uhid],\n            [\"Patient Name\", displayName],\n            [\"Age/Gender\", `${formData.age} Years / ${formData.gender}`],\n            [\"Phone\", displayPhone],\n            [\"Consulting Doctor\", formData.consultingDoctor || \"Not Selected\"],\n            [\"Address\", displayAddress],\n            [\"Date\", new Date().toLocaleString()],\n        ];\n\n        const tableStyles = getTransparentTableStyles();\n        autoTable(doc, {\n            startY: contentStartY + 5,\n            head: [['Field', 'Details']],\n            body: tableData,\n            theme: 'grid',\n            ...tableStyles,\n            columnStyles: { 0: { fontStyle: 'bold', cellWidth: 45 } }\n        });\n\n        // Payment Details\n        const paymentY = (doc as any).lastAutoTable.finalY + 6;\n\n        doc.setFontSize(10);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(\"Payment Details\", 14, paymentY);\n\n        autoTable(doc, {\n            startY: paymentY + 3,\n            head: [['Description', 'Amount']],\n            body: [\n                ['Registration Fee', `Rs. ${formData.registrationFee}`],\n                ['Total Paid', `Rs. ${formData.registrationFee}`]\n            ],\n            theme: 'grid',\n            ...tableStyles\n        });\n\n        // Patient Portal Credentials (only show on first download)\n        if (!isMasked) {\n            const credentialsY = (doc as any).lastAutoTable.finalY + 6;\n\n            doc.setDrawColor(59, 130, 246);\n            doc.setLineWidth(0.5);\n            doc.rect(14, credentialsY, 182, 28);\n\n            doc.setFontSize(9);\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.setTextColor(30, 64, 175);\n            doc.text(\"PATIENT PORTAL LOGIN CREDENTIALS\", 20, credentialsY + 7);\n\n            doc.setFontSize(8);\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.setTextColor(0, 0, 0);\n            doc.text(`Email (Username): ${formData.email}`, 20, credentialsY + 14);\n            doc.text(`Temporary Password: ${formData.phone}`, 20, credentialsY + 20);\n\n            doc.setFontSize(7);\n            doc.setTextColor(100, 100, 100);\n            doc.text(\"Please change your password after first login at the Patient Portal.\", 20, credentialsY + 26);\n        }\n\n        // Footer removed (included in background)\n\n        return { doc, filename, isMasked };\n    };\n\n    const handleDownloadReceipt = async () => {\n        try {\n            const { doc, filename, isMasked } = await generateReceiptDoc();\n            doc.save(filename);\n            toast({\n                title: isMasked ? \"Masked Receipt Downloaded\" : \"Receipt Downloaded\",\n                description: isMasked\n                    ? \"Masked copy saved. Sensitive data is hidden for privacy.\"\n                    : \"Registration receipt has been saved to your device.\"\n            });\n        } catch (error) {\n            console.error(\"Download failed\", error);\n            toast({\n                title: \"Download Failed\",\n                description: \"Could not generate receipt PDF.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n\n    const handlePrintReceipt = async () => {\n        try {\n            const { doc } = await generateReceiptDoc();\n            // Open print dialog\n            doc.autoPrint();\n            window.open(doc.output('bloburl'), '_blank');\n        } catch (error) {\n            console.error(\"Print failed\", error);\n            toast({\n                title: \"Print Failed\",\n                description: \"Could not generate receipt for printing.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n        setShowReceipt(false);\n        // Reset form data logic here if needed (omitted for brevity as it's just resetting state)\n        setFormData({\n            uhid: 'P-' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + '-' + Math.floor(1000 + Math.random() * 9000),\n            title: '',\n            firstName: '',\n            lastName: '',\n            gender: '',\n            age: '',\n            department: '', // Reset department\n            bloodGroup: '',\n            phoneCode: '+91',\n            phone: '',\n            altPhone: '',\n            email: '',\n            address: '',\n            country: 'IN',\n            state: '',\n            district: '',\n            mandal: '',\n            village: '',\n            pincode: '',\n            idType: '',\n            idNumber: '',\n            referredBy: '',\n            referredPerson: '',\n            consultingDoctor: '',\n            paymentType: '',\n            paymentMode: '',\n            emergencyName: '',\n            emergencyPhone: '',\n            relation: '',\n            registrationFee: '500'\n        });\n    };\n\n    return (\n        <Dialog open={open} onOpenChange={(val) => {\n            if (!val) handleClose();\n            setOpen(val);\n        }}>\n            <DialogTrigger asChild>{children}</DialogTrigger>\n            <DialogContent className=\"max-w-5xl max-h-[90vh] overflow-y-auto\">\n\n                {!showReceipt ? (\n                    <>\n                        <DialogHeader>\n                            <DialogTitle>{patientToEdit ? \"Edit Patient Details\" : \"New Patient Registration\"}</DialogTitle>\n                            <DialogDescription>\n                                {patientToEdit ? \"Update existing patient record.\" : \"Enter patient details to create a new record.\"}\n                            </DialogDescription>\n                        </DialogHeader>\n                        <form onSubmit={handleSubmit} className=\"space-y-6 py-4\">\n                            {/* Personal Information */}\n                            <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                <h3 className=\"font-semibold text-lg\">Personal Information</h3>\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"uhid\">UHID *</Label>\n                                        <Input id=\"uhid\" value={formData.uhid} disabled className=\"bg-slate-50 dark:bg-slate-900 border-primary/20 text-primary font-medium\" />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"title\">Title *</Label>\n                                        <Select value={formData.title} onValueChange={(v) => handleChange('title', v)}>\n                                            <SelectTrigger id=\"title\">\n                                                <SelectValue placeholder=\"Select\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                                <SelectItem value=\"Mr\">Mr.</SelectItem>\n                                                <SelectItem value=\"Mrs\">Mrs.</SelectItem>\n                                                <SelectItem value=\"Ms\">Ms.</SelectItem>\n                                                <SelectItem value=\"Dr\">Dr.</SelectItem>\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"firstName\">First Name *</Label>\n                                        <Input id=\"firstName\" value={formData.firstName} placeholder=\"First name\" required onChange={(e) => handleChange('firstName', e.target.value)} />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"lastName\">Last Name *</Label>\n                                        <Input id=\"lastName\" value={formData.lastName} placeholder=\"Last name\" required onChange={(e) => handleChange('lastName', e.target.value)} />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"gender\">Gender *</Label>\n                                        <Select value={formData.gender} required onValueChange={(v) => handleChange('gender', v)}>\n                                            <SelectTrigger id=\"gender\">\n                                                <SelectValue placeholder=\"Select\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                                <SelectItem value=\"Male\">Male</SelectItem>\n                                                <SelectItem value=\"Female\">Female</SelectItem>\n                                                <SelectItem value=\"Other\">Other</SelectItem>\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"age\">Age (Years) *</Label>\n                                        <Input id=\"age\" value={formData.age} placeholder=\"Age\" required onChange={(e) => handleChange('age', e.target.value)} />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"bloodGroup\">Blood Group</Label>\n                                        <Select value={formData.bloodGroup} onValueChange={(v) => handleChange('bloodGroup', v)}>\n                                            <SelectTrigger id=\"bloodGroup\">\n                                                <SelectValue placeholder=\"Select\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                                <SelectItem value=\"A+\">A+</SelectItem>\n                                                <SelectItem value=\"A-\">A-</SelectItem>\n                                                <SelectItem value=\"B+\">B+</SelectItem>\n                                                <SelectItem value=\"B-\">B-</SelectItem>\n                                                <SelectItem value=\"AB+\">AB+</SelectItem>\n                                                <SelectItem value=\"AB-\">AB-</SelectItem>\n                                                <SelectItem value=\"O+\">O+</SelectItem>\n                                                <SelectItem value=\"O-\">O-</SelectItem>\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Contact Information */}\n                            <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                <h3 className=\"font-semibold text-lg\">Contact Information</h3>\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"phone\">Phone Number *</Label>\n                                        <div className=\"flex\">\n                                            <Select value={formData.phoneCode} onValueChange={(v) => handleChange('phoneCode', v)}>\n                                                <SelectTrigger className=\"w-[100px] rounded-r-none border-r-0\">\n                                                    <SelectValue placeholder=\"Code\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    {sortedCountries.map((country) => (\n                                                        <SelectItem key={country.code} value={country.phoneCode}>\n                                                            {country.flag} {country.phoneCode}\n                                                        </SelectItem>\n                                                    ))}\n                                                </SelectContent>\n                                            </Select>\n                                            <Input\n                                                id=\"phone\"\n                                                value={formData.phone}\n                                                placeholder=\"9876543210\"\n                                                required\n                                                onChange={(e) => handlePhoneChange(e, 'phone')}\n                                                className=\"rounded-l-none\"\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"altPhone\">Alternate Phone</Label>\n                                        <div className=\"flex\">\n                                            <div className=\"flex items-center px-3 border border-r-0 rounded-l-md bg-muted text-muted-foreground text-sm\">\n                                                {formData.phoneCode}\n                                            </div>\n                                            <Input\n                                                id=\"altPhone\"\n                                                value={formData.altPhone}\n                                                placeholder=\"9876543210\"\n                                                onChange={(e) => handlePhoneChange(e, 'altPhone')}\n                                                className=\"rounded-l-none\"\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"email\">Email *</Label>\n                                        <Input id=\"email\" value={formData.email} type=\"email\" placeholder=\"patient@email.com\" required onChange={(e) => handleChange('email', e.target.value)} />\n                                    </div>\n                                    <div className=\"col-span-1 md:col-span-3 space-y-2\">\n                                        <Label htmlFor=\"address\">Address *</Label>\n                                        <Textarea id=\"address\" value={formData.address} placeholder=\"Enter complete address\" required onChange={(e) => handleChange('address', e.target.value)} />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"country\">Country *</Label>\n                                        <Select value={formData.country} required onValueChange={(v) => handleChange('country', v)}>\n                                            <SelectTrigger id=\"country\">\n                                                <SelectValue placeholder=\"Select Country\" />\n                                            </SelectTrigger>\n                                            <SelectContent className=\"max-h-[300px]\">\n                                                {sortedCountries.map((country) => (\n                                                    <SelectItem key={country.code} value={country.code}>\n                                                        {country.name}\n                                                    </SelectItem>\n                                                ))}\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"state\">State *</Label>\n                                        <Select\n                                            value={formData.state}\n                                            required\n                                            onValueChange={(v) => handleChange('state', v)}\n                                            disabled={availableStates.length === 0}\n                                        >\n                                            <SelectTrigger id=\"state\">\n                                                <SelectValue placeholder={availableStates.length === 0 ? \"Select country first\" : \"Select State\"} />\n                                            </SelectTrigger>\n                                            <SelectContent className=\"max-h-[300px]\">\n                                                {availableStates.map((state) => (\n                                                    <SelectItem key={state.code} value={state.code}>\n                                                        {state.name}\n                                                    </SelectItem>\n                                                ))}\n                                                {availableStates.length === 0 && (\n                                                    <SelectItem value=\"other\" disabled>No states available</SelectItem>\n                                                )}\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"district\">District *</Label>\n                                        <Select\n                                            value={formData.district}\n                                            required\n                                            onValueChange={(v) => handleChange('district', v)}\n                                            disabled={availableDistricts.length === 0}\n                                        >\n                                            <SelectTrigger id=\"district\">\n                                                <SelectValue placeholder={availableDistricts.length === 0 ? \"Select state first\" : \"Select District\"} />\n                                            </SelectTrigger>\n                                            <SelectContent className=\"max-h-[300px]\">\n                                                {availableDistricts.map((district) => (\n                                                    <SelectItem key={district.code} value={district.code}>\n                                                        {district.name}\n                                                    </SelectItem>\n                                                ))}\n                                                {availableDistricts.length === 0 && formData.state && (\n                                                    <SelectItem value=\"other\">Other</SelectItem>\n                                                )}\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"mandal\">Mandal / Region</Label>\n                                        {availableMandals.length > 0 ? (\n                                            <Select value={formData.mandal} onValueChange={(v) => handleChange('mandal', v)}>\n                                                <SelectTrigger id=\"mandal\">\n                                                    <SelectValue placeholder=\"Select Mandal\" />\n                                                </SelectTrigger>\n                                                <SelectContent className=\"max-h-[300px]\">\n                                                    {availableMandals.map((mandal) => (\n                                                        <SelectItem key={mandal.code} value={mandal.code}>\n                                                            {mandal.name}\n                                                        </SelectItem>\n                                                    ))}\n                                                    <SelectItem value=\"other\">Other</SelectItem>\n                                                </SelectContent>\n                                            </Select>\n                                        ) : (\n                                            <Input\n                                                id=\"mandal\"\n                                                value={formData.mandal}\n                                                placeholder=\"Enter mandal/region\"\n                                                onChange={(e) => handleChange('mandal', e.target.value)}\n                                            />\n                                        )}\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"village\">Village / City *</Label>\n                                        <Input id=\"village\" value={formData.village} placeholder=\"Village or City\" required onChange={(e) => handleChange('village', e.target.value)} />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"pincode\">PIN / ZIP Code *</Label>\n                                        <Input id=\"pincode\" value={formData.pincode} placeholder=\"PIN Code\" required onChange={handlePincodeChange} />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                {/* Identification */}\n                                <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                    <h3 className=\"font-semibold text-lg\">Identification</h3>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"idType\">ID Type</Label>\n                                            <Select value={formData.idType} onValueChange={(v) => {\n                                                handleChange('idType', v);\n                                                handleChange('idNumber', ''); // Clear number on type change\n                                            }}>\n                                                <SelectTrigger id=\"idType\">\n                                                    <SelectValue placeholder=\"Select\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    <SelectItem value=\"aadhaar\">Aadhaar</SelectItem>\n                                                    <SelectItem value=\"pan\">PAN Card</SelectItem>\n                                                    <SelectItem value=\"passport\">Passport</SelectItem>\n                                                </SelectContent>\n                                            </Select>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"idNumber\">ID Number</Label>\n                                            <Input id=\"idNumber\" value={formData.idNumber} placeholder=\"ID Number\" onChange={handleIdNumberChange} />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Referral */}\n                                <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                    <h3 className=\"font-semibold text-lg\">Referral</h3>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"referredBy\">Referred By</Label>\n                                            <Select value={formData.referredBy} onValueChange={(v) => handleChange('referredBy', v)}>\n                                                <SelectTrigger id=\"referredBy\">\n                                                    <SelectValue placeholder=\"Select\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    <SelectItem value=\"doctor\">Doctor</SelectItem>\n                                                    <SelectItem value=\"friend\">Friend/Family</SelectItem>\n                                                    <SelectItem value=\"newspaper\">Newspaper</SelectItem>\n                                                    <SelectItem value=\"social_media\">Social Media</SelectItem>\n                                                </SelectContent>\n                                            </Select>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"referredPerson\">Referred Person</Label>\n                                            <Input id=\"referredPerson\" value={formData.referredPerson} placeholder=\"Name\" onChange={(e) => handleChange('referredPerson', e.target.value)} />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Consultation */}\n                            <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                <h3 className=\"font-semibold text-lg\">Consultation</h3>\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"reg-department\">Department</Label>\n                                        <Select value={formData.department} onValueChange={(v) => {\n                                            handleChange('department', v);\n                                            handleChange('consultingDoctor', ''); // Reset doctor when department changes\n                                        }}>\n                                            <SelectTrigger id=\"reg-department\">\n                                                <SelectValue placeholder=\"Select Department\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                                {PREDEFINED_DEPARTMENTS.map(dept => (\n                                                    <SelectItem key={dept} value={dept}>{dept}</SelectItem>\n                                                ))}\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"consultingDoctor\">Consulting Doctor</Label>\n                                        <Select value={formData.consultingDoctor} onValueChange={(v) => handleChange('consultingDoctor', v)}>\n                                            <SelectTrigger id=\"consultingDoctor\">\n                                                <SelectValue placeholder=\"Select Doctor\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                                {doctorsList\n                                                    .filter(d => !formData.department || getDepartmentMapping(d.department) === formData.department)\n                                                    .map((doctor) => (\n                                                        <SelectItem key={doctor.id} value={doctor.full_name}>\n                                                            {doctor.full_name} ({doctor.specialization})\n                                                        </SelectItem>\n                                                    ))}\n                                            </SelectContent>\n                                        </Select>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                {/* Payment */}\n                                <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                    <h3 className=\"font-semibold text-lg\">Payment Details</h3>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"paymentMode\">Payment Mode</Label>\n                                            <Select value={formData.paymentMode} onValueChange={(v) => handleChange('paymentMode', v)}>\n                                                <SelectTrigger id=\"paymentMode\">\n                                                    <SelectValue placeholder=\"Select\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    <SelectItem value=\"cash\">Cash</SelectItem>\n                                                    <SelectItem value=\"card\">Card</SelectItem>\n                                                    <SelectItem value=\"upi\">UPI</SelectItem>\n                                                    <SelectItem value=\"pay_at_clinic\">Pay at Clinic</SelectItem>\n                                                </SelectContent>\n                                            </Select>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"registrationFee\">Registration Fee</Label>\n                                            <Input id=\"registrationFee\" value={formData.registrationFee} placeholder=\"Enter Fee\" onChange={(e) => handleChange('registrationFee', e.target.value)} className=\"bg-white dark:bg-slate-950 border-input\" />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Emergency Contact */}\n                                <div className=\"space-y-4 rounded-lg border p-4 bg-muted/20\">\n                                    <h3 className=\"font-semibold text-lg\">Emergency Contact</h3>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"emergencyName\">Name</Label>\n                                            <Input id=\"emergencyName\" value={formData.emergencyName} placeholder=\"Emergency contact name\" onChange={(e) => handleChange('emergencyName', e.target.value)} />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"emergencyPhone\">Phone</Label>\n                                            <Input id=\"emergencyPhone\" value={formData.emergencyPhone} placeholder=\"Emergency contact phone\" onChange={(e) => handlePhoneChange(e, 'emergencyPhone')} />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"relation\">Relation</Label>\n                                            <Input id=\"relation\" value={formData.relation} placeholder=\"Relation to patient\" onChange={(e) => handleChange('relation', e.target.value)} />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <DialogFooter>\n                                <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\n                                    Cancel\n                                </Button>\n                                <Button type=\"submit\">{patientToEdit ? \"Update Details\" : \"Register Patient\"}</Button>\n                            </DialogFooter>\n                        </form>\n                    </>\n                ) : (\n                    <div className=\"flex flex-col items-center justify-center py-10 space-y-6\">\n                        <div className=\"h-24 w-24 rounded-full bg-green-100 flex items-center justify-center\">\n                            <CheckCircle2 className=\"h-12 w-12 text-green-600\" />\n                        </div>\n                        <div className=\"text-center space-y-2\">\n                            <h2 className=\"text-2xl font-bold\">Registration Successful!</h2>\n                            <p className=\"text-muted-foreground\">Patient has been registered with UHID: <span className=\"font-mono font-bold text-primary\">{formData.uhid}</span></p>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-4 w-full max-w-md bg-slate-50 dark:bg-slate-900 p-6 rounded-lg border\">\n                            <div>\n                                <p className=\"text-sm text-muted-foreground\">Patient Name</p>\n                                <p className=\"font-medium\">{formData.title} {formData.firstName} {formData.lastName}</p>\n                            </div>\n                            <div className=\"text-right\">\n                                <p className=\"text-sm text-muted-foreground\">Registration Date</p>\n                                <p className=\"font-medium\">{new Date().toLocaleDateString()}</p>\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-muted-foreground\">Payment Status</p>\n                                <p className=\"font-medium text-green-600\">Paid (Rs. {formData.registrationFee})</p>\n                            </div>\n                            <div className=\"text-right\">\n                                <p className=\"text-sm text-muted-foreground\">Phone</p>\n                                <p className=\"font-medium\">{formData.phone}</p>\n                            </div>\n                        </div>\n\n                        {/* Patient Portal Login Credentials */}\n                        <div className=\"w-full max-w-md bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800\">\n                            <h3 className=\"font-semibold text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fillRule=\"evenodd\" d=\"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z\" clipRule=\"evenodd\" />\n                                </svg>\n                                Patient Portal Login Credentials\n                            </h3>\n                            <div className=\"space-y-2 text-sm\">\n                                <div className=\"flex justify-between items-center\">\n                                    <span className=\"text-muted-foreground\">Email (Username):</span>\n                                    <span className=\"font-mono font-bold text-blue-800 dark:text-blue-200\">{formData.email}</span>\n                                </div>\n                                <div className=\"flex justify-between items-center\">\n                                    <span className=\"text-muted-foreground\">Temporary Password:</span>\n                                    <span className=\"font-mono font-bold text-blue-800 dark:text-blue-200\">{formData.phone}</span>\n                                </div>\n                            </div>\n                            <p className=\"text-xs text-muted-foreground mt-3\">\n                                âš ï¸ Please inform the patient to change their password after first login at the Patient Portal.\n                            </p>\n                        </div>\n\n                        <div className=\"flex gap-4\">\n                            <Button variant=\"outline\" onClick={handleClose}>\n                                Close\n                            </Button>\n                            <Button onClick={handleDownloadReceipt} className=\"gap-2\">\n                                <Download className=\"h-4 w-4\" />\n                                Download Receipt\n                            </Button>\n                            <Button variant=\"secondary\" className=\"gap-2\" onClick={handlePrintReceipt}>\n                                <Printer className=\"h-4 w-4\" />\n                                Print Receipt\n                            </Button>\n                        </div>\n                    </div>\n                )\n                }\n            </DialogContent >\n        </Dialog >\n    );\n}\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\patients\\SavedViews.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\pharmacy\\AddMedicineDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\pharmacy\\MedicineDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\pharmacy\\PharmacyDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\OptimizedImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\date-picker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"@/components/ui/label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\n\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => {\n    const id = React.useId();\n\n    return (\n      <FormItemContext.Provider value={{ id }}>\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n      </FormItemContext.Provider>\n    );\n  },\n);\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\n  ({ ...props }, ref) => {\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n    return (\n      <Slot\n        ref={ref}\n        id={formItemId}\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\n        aria-invalid={!!error}\n        {...props}\n      />\n    );\n  },\n);\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => {\n    const { formDescriptionId } = useFormField();\n\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\n  },\n);\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, children, ...props }, ref) => {\n    const { error, formMessageId } = useFormField();\n    const body = error ? String(error?.message) : children;\n\n    if (!body) {\n      return null;\n    }\n\n    return (\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\n        {body}\n      </p>\n    );\n  },\n);\nFormMessage.displayName = \"FormMessage\";\n\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\nimport { cva } from \"class-variance-authority\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n));\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\n    {...props}\n  />\n));\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\n);\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n));\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\n      className,\n    )}\n    {...props}\n  />\n));\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n));\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className,\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n));\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { VariantProps, cva } from \"class-variance-authority\";\nimport { PanelLeft } from \"lucide-react\";\n\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  }\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContext>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n});\nSidebarProvider.displayName = \"SidebarProvider\";\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\";\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n  }\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"group peer hidden text-sidebar-foreground md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\n        )}\n      />\n      <div\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = \"Sidebar\";\n\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\n  ({ className, onClick, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <Button\n        ref={ref}\n        data-sidebar=\"trigger\"\n        variant=\"ghost\"\n        size=\"icon\"\n        className={cn(\"h-7 w-7\", className)}\n        onClick={(event) => {\n          onClick?.(event);\n          toggleSidebar();\n        }}\n        {...props}\n      >\n        <PanelLeft />\n        <span className=\"sr-only\">Toggle Sidebar</span>\n      </Button>\n    );\n  },\n);\nSidebarTrigger.displayName = \"SidebarTrigger\";\n\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = \"SidebarRail\";\n\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInset.displayName = \"SidebarInset\";\n\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Input\n        ref={ref}\n        data-sidebar=\"input\"\n        className={cn(\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInput.displayName = \"SidebarInput\";\n\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarHeader.displayName = \"SidebarHeader\";\n\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarFooter.displayName = \"SidebarFooter\";\n\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Separator\n        ref={ref}\n        data-sidebar=\"separator\"\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarSeparator.displayName = \"SidebarSeparator\";\n\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarContent.displayName = \"SidebarContent\";\n\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarGroup.displayName = \"SidebarGroup\";\n\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"div\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-label\"\n        className={cn(\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\n\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-action\"\n        className={cn(\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          // Increases the hit area of the button on mobile.\n          \"after:absolute after:-inset-2 after:md:hidden\",\n          \"group-data-[collapsible=icon]:hidden\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\n\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\n  ),\n);\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\n\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\n));\nSidebarMenu.displayName = \"SidebarMenu\";\n\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\n));\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\n    </Tooltip>\n  );\n});\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\n\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\n\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\n\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\n  <li ref={ref} {...props} />\n));\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean;\n    size?: \"sm\" | \"md\";\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\nimport { Toaster as Sonner, toast } from \"sonner\";\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Toaster, toast };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\config\\permissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":241,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":241,"endColumn":24}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUserProfile'. Either include it or remove the dependency array.","line":105,"column":6,"nodeType":"ArrayExpression","endLine":105,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUserProfile]","fix":{"range":[3820,3822],"text":"[fetchUserProfile]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport { AppRole, Profile } from '@/types';\nimport { api, User as ApiUser } from '@/services/api';\n\n// Adapt types to maintain compatibility or define new ones\n// We intentionally diverge from Supabase types here.\ntype User = ApiUser\n\ninterface AuthContextType {\n  user: User | null;\n  // Session is legacy from Supabase, we'll keep it as object or null for compatibility if needed,\n  // but strictly we don't have a Supabase session. We'll mark it any or null.\n  session: any | null;\n  profile: Profile | null;\n  role: AppRole | null;\n  loading: boolean;\n  signIn: (email: string, password: string, expectedRole: AppRole) => Promise<{ error: string | null }>;\n  signUp: (email: string, password: string, fullName: string, role: AppRole) => Promise<{ error: string | null }>;\n  signOut: () => Promise<void>;\n  resetPassword: (email: string) => Promise<{ error: string | null }>;\n  refreshProfile: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<any | null>(null);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [role, setRole] = useState<AppRole | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Guard to prevent multiple bootstrap attempts\n  const bootstrapAttempted = React.useRef(false);\n\n  const fetchUserProfile = useCallback(async () => {\n    try {\n      console.log('[AUTH_BOOTSTRAP] Calling /auth/me...');\n      const userData = await api.getMe();\n      const userRole = userData.role.toLowerCase() as AppRole;\n\n      const currentUser: User = {\n        id: userData.userId,\n        email: userData.email,\n        role: userRole,\n      };\n\n      setUser(currentUser);\n      setRole(userRole);\n\n      // Mock profile/session since backend user structure differs from Supabase\n      // In a real app, you'd fetch /api/users/profile or similar\n      const names = userData.email.split('@')[0];\n      setProfile({\n        id: userData.userId,\n        user_id: userData.userId,\n        full_name: names, // Temporary fallback\n        email: userData.email,\n        status: 'active',\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      });\n\n      setSession({\n        user: currentUser,\n        access_token: localStorage.getItem('accessToken'),\n      });\n\n      console.log('[AUTH_BOOTSTRAP_SUCCESS] User authenticated:', userRole);\n\n    } catch (error) {\n      console.error('[AUTH_BOOTSTRAP_ERROR] Error fetching profile:', error);\n      // Token might be invalid\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      setUser(null);\n      setRole(null);\n      setSession(null);\n      setProfile(null);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Prevent multiple bootstrap attempts (e.g., from StrictMode double-render)\n    if (bootstrapAttempted.current) {\n      console.log('[AUTH_BOOTSTRAP] Already attempted, skipping...');\n      return;\n    }\n    bootstrapAttempted.current = true;\n\n    console.log('[AUTH_BOOTSTRAP_START] Checking for existing session...');\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      console.log('[AUTH_BOOTSTRAP] Token found, fetching user profile...');\n      fetchUserProfile().then(() => {\n        console.log('[AUTH_BOOTSTRAP_END] Profile fetch complete');\n      });\n    } else {\n      console.log('[AUTH_BOOTSTRAP_END] No token found, user is not authenticated');\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Empty dependency array - bootstrap runs EXACTLY once\n\n  const signIn = async (email: string, password: string, expectedRole: AppRole): Promise<{ error: string | null }> => {\n    try {\n      const { user: authUser, tokens } = await api.login(email, password);\n\n      localStorage.setItem('accessToken', tokens.accessToken);\n      localStorage.setItem('refreshToken', tokens.refreshToken);\n\n      const userRole = authUser.role.toLowerCase() as AppRole;\n\n      if (userRole !== expectedRole) {\n        // In strict mode we might logout, but here we just warn if needed or block.\n        // Actually, if backend allows login, we are logged in.\n        // But front-end logic requires strict portal separation.\n        // We'll check compatibility.\n        if (userRole !== expectedRole) {\n          await signOut();\n          return { error: `This login page is for ${expectedRole.replace('_', ' ')}s only.` };\n        }\n      }\n\n      const currentUser: User = {\n        id: authUser.id,\n        email: authUser.email,\n        role: userRole,\n      };\n\n      setUser(currentUser);\n      setRole(userRole);\n\n      // Mock profile/session logic duplicated from fetchUserProfile\n      const names = authUser.email.split('@')[0];\n      setProfile({\n        id: authUser.id,\n        user_id: authUser.id,\n        full_name: names,\n        email: authUser.email,\n        status: 'active',\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      });\n\n      setSession({\n        user: currentUser,\n        access_token: tokens.accessToken,\n      });\n\n      return { error: null };\n    } catch (error: any) {\n      console.error('Sign in error:', error);\n      return { error: error.message || 'Authentication failed' };\n    }\n  };\n\n  const signUp = async (email: string, password: string, fullName: string, role: AppRole): Promise<{ error: string | null }> => {\n    try {\n      const [firstName, ...rest] = fullName.split(' ');\n      const lastName = rest.join(' ') || 'User';\n\n      await api.register(email, password, firstName, lastName, role);\n\n      // Auto login after register? Backend register returns tokens?\n      // Check backend controller: register returns result.\n      // authService.register returns { user, tokens }.\n      // So yes, we can auto login.\n\n      // For now, let's just return success and let user login or auto-trigger login.\n      // Actually, standard is to require login or just set tokens.\n      // I'll require login for simplicity or just return null error.\n\n      return { error: null };\n    } catch (error: any) {\n      console.error('Sign up error:', error);\n      return { error: error.message || 'Registration failed' };\n    }\n  };\n\n  const signOut = async () => {\n    // Capture current role before clearing state\n    const currentRole = role;\n\n    const refreshToken = localStorage.getItem('refreshToken');\n    if (refreshToken) {\n      try {\n        await api.logout(refreshToken);\n      } catch (e) {\n        console.error('Logout error', e);\n      }\n    }\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n    setUser(null);\n    setSession(null);\n    setProfile(null);\n    setRole(null);\n\n    // Redirect to role-specific login page\n    let loginPath = '/';\n    if (currentRole === 'admin') loginPath = '/admin/login';\n    else if (currentRole === 'doctor') loginPath = '/doctor/login';\n    else if (currentRole === 'receptionist') loginPath = '/reception/login';\n    else if (currentRole === 'pharmacist') loginPath = '/pharmacy/login';\n    else if (currentRole === 'lab_technician') loginPath = '/lab/login';\n    else if (currentRole === 'patient') loginPath = '/patient/login';\n\n    console.log(`[AUTH] Signed out, redirecting to ${loginPath}`);\n    window.location.href = loginPath;\n  };\n\n  const resetPassword = async (email: string): Promise<{ error: string | null }> => {\n    return { error: 'Please contact administrator to reset password.' };\n  };\n\n\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        session,\n        profile,\n        role,\n        loading,\n        signIn,\n        signUp,\n        signOut,\n        resetPassword,\n        refreshProfile: fetchUserProfile,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\contexts\\LabContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":211,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":211,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { api } from '@/services/api';\nimport { useAuth } from './AuthContext';\n\n// Types\nexport interface LabOrder {\n    id: string;\n    patientId: string;\n    orderedById: string;\n    testName: string;\n    testCode: string | null;\n    priority: string;\n    status: 'ORDERED' | 'SAMPLE_COLLECTED' | 'IN_PROGRESS' | 'COMPLETED' | 'CANCELLED' | 'PAYMENT_PENDING' | 'READY_FOR_SAMPLE_COLLECTION';\n    notes: string | null;\n    patient: { firstName: string; lastName: string };\n    orderedBy: { firstName: string; lastName: string };\n    bill?: {\n        status: 'PENDING' | 'PAID' | 'PARTIALLY_PAID' | 'CANCELLED';\n        id: string;\n    } | null;\n    result?: LabResult | null;\n    createdAt: string;\n}\n\nexport interface LabResult {\n    id: string;\n    orderId: string;\n    technicianId: string;\n    result: {\n        parameters: Array<{\n            name: string;\n            value: string;\n            unit?: string;\n            normalRange?: string;\n        }>;\n    };\n    interpretation: string | null;\n    attachments: string[] | null;\n    completedAt: string;\n}\n\nexport interface CreateLabOrderInput {\n    patientId: string;\n    testName: string;\n    testCode?: string;\n    priority?: 'normal' | 'urgent' | 'stat';\n    notes?: string;\n}\n\nexport interface CreateLabResultInput {\n    orderId: string;\n    result: {\n        parameters: Array<{\n            name: string;\n            value: string;\n            unit?: string;\n            normalRange?: string;\n        }>;\n    };\n    interpretation?: string;\n    attachments?: string[];\n}\n\ninterface LabContextType {\n    // State\n    labOrders: LabOrder[];\n    myLabOrders: LabOrder[];\n    loading: boolean;\n    error: string | null;\n\n    // Actions\n    fetchLabOrders: (status?: string) => Promise<void>;\n    fetchMyLabOrders: () => Promise<void>;\n    createLabOrder: (input: CreateLabOrderInput) => Promise<LabOrder>;\n    updateOrderStatus: (orderId: string, status: string) => Promise<LabOrder>;\n    submitResult: (input: CreateLabResultInput) => Promise<LabResult>;\n    uploadFile: (file: File) => Promise<{ url: string; filename: string }>;\n    refreshOrders: () => Promise<void>;\n}\n\nconst LabContext = createContext<LabContextType | undefined>(undefined);\n\nexport const LabProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n    const { user, loading: authLoading } = useAuth();\n    const [labOrders, setLabOrders] = useState<LabOrder[]>([]);\n    const [myLabOrders, setMyLabOrders] = useState<LabOrder[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [hasFetchedOrders, setHasFetchedOrders] = useState(false);\n    const [hasFetchedMyOrders, setHasFetchedMyOrders] = useState(false);\n\n    // Fetch all lab orders (for lab technicians)\n    const fetchLabOrders = useCallback(async (status?: string) => {\n        setLoading(true);\n        setError(null);\n        try {\n            const params = new URLSearchParams({ limit: '50' });\n            if (status) params.append('status', status);\n\n            const response = await api.get<{ items: LabOrder[] }>(`/lab/orders?${params}`);\n            setLabOrders(response.items || []);\n            setHasFetchedOrders(true);\n        } catch (err: any) {\n            setError(err.message || 'Failed to fetch lab orders');\n            console.error('[LabContext] fetchLabOrders error:', err);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    // Fetch doctor's own orders\n    const fetchMyLabOrders = useCallback(async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const response = await api.get<{ items: LabOrder[] }>('/lab/orders/my-orders?limit=50');\n            setMyLabOrders(response.items || []);\n            setHasFetchedMyOrders(true);\n        } catch (err: any) {\n            setError(err.message || 'Failed to fetch my lab orders');\n            console.error('[LabContext] fetchMyLabOrders error:', err);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    // Create a new lab order\n    const createLabOrder = useCallback(async (input: CreateLabOrderInput): Promise<LabOrder> => {\n        const order = await api.post<LabOrder>('/lab/orders', input);\n        // Refresh lists\n        fetchLabOrders();\n        fetchMyLabOrders();\n        return order;\n    }, [fetchLabOrders, fetchMyLabOrders]);\n\n    // Update order status\n    const updateOrderStatus = useCallback(async (orderId: string, status: string): Promise<LabOrder> => {\n        const order = await api.patch<LabOrder>(`/lab/orders/${orderId}/status`, { status });\n        // Refresh lists\n        fetchLabOrders();\n        return order;\n    }, [fetchLabOrders]);\n\n    // Submit lab result\n    const submitResult = useCallback(async (input: CreateLabResultInput): Promise<LabResult> => {\n        const result = await api.post<LabResult>('/lab/results', input);\n        // Refresh lists\n        fetchLabOrders();\n        fetchMyLabOrders();\n        return result;\n    }, [fetchLabOrders, fetchMyLabOrders]);\n\n    // Upload result file\n    const uploadFile = useCallback(async (file: File): Promise<{ url: string; filename: string }> => {\n        const formData = new FormData();\n        formData.append('file', file);\n        return await api.post<{ url: string; filename: string }>('/upload', formData);\n    }, []);\n\n    // Refresh all orders (manual refresh resets hasFetched)\n    const refreshOrders = useCallback(async () => {\n        setHasFetchedOrders(false);\n        setHasFetchedMyOrders(false);\n        await Promise.all([fetchLabOrders(), fetchMyLabOrders()]);\n    }, [fetchLabOrders, fetchMyLabOrders]);\n\n    // Auto-fetch on mount based on user role (with hasFetched guard)\n    useEffect(() => {\n        // Wait for auth to finish loading\n        if (authLoading) return;\n\n        // Reset state if user logs out\n        if (!user) {\n            setLabOrders([]);\n            setMyLabOrders([]);\n            setHasFetchedOrders(false);\n            setHasFetchedMyOrders(false);\n            return;\n        }\n\n        // Fetch my orders for doctor/admin (only if not already fetched)\n        if ((user.role === 'doctor' || user.role === 'admin') && !hasFetchedMyOrders) {\n            fetchMyLabOrders();\n        }\n\n        // Fetch all orders for lab tech/admin/receptionist (only if not already fetched)\n        if ((user.role === 'lab_technician' || user.role === 'admin' || user.role === 'receptionist') && !hasFetchedOrders) {\n            fetchLabOrders();\n        }\n    }, [user, authLoading, hasFetchedOrders, hasFetchedMyOrders, fetchLabOrders, fetchMyLabOrders]);\n\n    return (\n        <LabContext.Provider value={{\n            labOrders,\n            myLabOrders,\n            loading,\n            error,\n            fetchLabOrders,\n            fetchMyLabOrders,\n            createLabOrder,\n            updateOrderStatus,\n            submitResult,\n            uploadFile,\n            refreshOrders,\n        }}>\n            {children}\n        </LabContext.Provider>\n    );\n};\n\nexport const useLab = (): LabContextType => {\n    const context = useContext(LabContext);\n    if (!context) {\n        throw new Error('useLab must be used within a LabProvider');\n    }\n    return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\contexts\\PatientContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":106,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":106,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, ReactNode, useEffect, useCallback } from 'react';\nimport { Patient } from '@/types';\nimport { patientService } from '@/services/patientService';\nimport { toast } from 'sonner';\nimport { useAuth } from './AuthContext';\n\ninterface PatientContextType {\n    patients: Patient[];\n    loading: boolean;\n    refreshPatients: () => Promise<void>;\n    addPatient: (patient: any) => Promise<void>;\n    updatePatient: (id: string, data: any) => Promise<void>;\n}\n\nconst PatientContext = createContext<PatientContextType | undefined>(undefined);\n\nexport const PatientProvider = ({ children }: { children: ReactNode }) => {\n    const [patients, setPatients] = useState<Patient[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [hasFetched, setHasFetched] = useState(false);\n\n    // Get auth state to know when user is logged in\n    const { user, loading: authLoading } = useAuth();\n\n    const fetchPatients = useCallback(async () => {\n        // Check if we have an access token before fetching\n        const token = localStorage.getItem('accessToken');\n        if (!token) {\n            setLoading(false);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            // Fetch patients with max allowed limit (100)\n            const data = await patientService.getPatients({\n                page: 1,\n                pageSize: 100,\n                sortBy: 'created_at',\n                sortDir: 'desc',\n            });\n            setPatients(data.items || (Array.isArray(data) ? data : []));\n            setHasFetched(true);\n        } catch (error) {\n            console.error('Error loading patients:', error);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    // Fetch patients when user becomes available (after login)\n    useEffect(() => {\n        // Only fetch if:\n        // 1. Auth is done loading\n        // 2. User is logged in\n        // 3. We haven't successfully fetched yet\n        if (!authLoading && user && !hasFetched) {\n            fetchPatients();\n        }\n\n        // If user logs out, reset state\n        if (!authLoading && !user) {\n            setPatients([]);\n            setHasFetched(false);\n            setLoading(false);\n        }\n    }, [user, authLoading, hasFetched, fetchPatients]);\n\n    const addPatient = async (patientData: any) => {\n        try {\n            const newPatient = await patientService.createPatient(patientData);\n            setPatients(prev => [newPatient, ...prev]);\n            toast.success('Patient added successfully');\n        } catch (error) {\n            console.error('Error adding patient:', error);\n            toast.error('Failed to add patient');\n            throw error;\n        }\n    };\n\n    // Manual refresh function that resets hasFetched\n    const refreshPatients = async () => {\n        setHasFetched(false);\n        await fetchPatients();\n    };\n\n    const updatePatient = async (id: string, patientData: any) => {\n        try {\n            await patientService.updatePatient(id, patientData);\n            setPatients(prev => prev.map(p => p.id === id ? { ...p, ...patientData } : p));\n            toast.success('Patient updated successfully');\n        } catch (error) {\n            console.error('Error updating patient:', error);\n            toast.error('Failed to update patient');\n            throw error;\n        }\n    }\n\n    return (\n        <PatientContext.Provider value={{ patients, loading, refreshPatients, addPatient, updatePatient }}>\n            {children}\n        </PatientContext.Provider>\n    );\n};\n\nexport const usePatients = () => {\n    const context = useContext(PatientContext);\n    if (context === undefined) {\n        throw new Error('usePatients must be used within a PatientProvider');\n    }\n    return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\contexts\\PrescriptionContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":152,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":152,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, ReactNode, useEffect, useCallback } from 'react';\nimport { medicalRecordService, CreateMedicalRecordInput, MedicalRecord } from '@/services/medicalRecordService';\nimport { toast } from 'sonner';\nimport { api } from '@/services/api';\nimport { useAuth } from './AuthContext';\n\nexport interface PrescriptionItem {\n    medicine_id: string;\n    medicine_name: string;\n    dosage: string;\n    frequency: string;\n    duration: string;\n    instructions?: string;\n    quantity: number;\n    unit_price: number;\n    total_price: number;\n}\n\nexport interface Prescription {\n    id: string;\n    order_id: string;\n    patient_id: string;\n    patient_name: string;\n    doctor_id: string;\n    doctor_name: string;\n    diagnosis: string;\n    items: PrescriptionItem[];\n    total_amount: number;\n    status: 'pending' | 'processing' | 'dispensed' | 'cancelled';\n    created_at: string;\n}\n\ninterface PrescriptionContextType {\n    prescriptions: Prescription[];\n    loading: boolean;\n    addPrescription: (prescriptionData: any) => Promise<void>;\n    getPrescriptionsByPatientId: (patientId: string) => Prescription[];\n    refreshPrescriptions: () => Promise<void>;\n}\n\nconst PrescriptionContext = createContext<PrescriptionContextType | undefined>(undefined);\n\nexport const PrescriptionProvider = ({ children }: { children: ReactNode }) => {\n    const { user, loading: authLoading } = useAuth();\n    const [prescriptions, setPrescriptions] = useState<Prescription[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [hasFetched, setHasFetched] = useState(false);\n\n    const fetchPrescriptions = useCallback(async () => {\n        if (!localStorage.getItem('accessToken')) return;\n\n        try {\n            setLoading(true);\n            const records = await medicalRecordService.getRecords();\n            // Filter records that have prescriptions\n            const validPrescriptions = records\n                .filter(record => record.prescriptions && record.prescriptions.length > 0)\n                .map(record => ({\n                    id: record.id,\n                    order_id: record.id, // Use UUID as Order ID\n                    patient_id: record.patientId,\n                    patient_name: `${record.patient.firstName} ${record.patient.lastName}`,\n                    doctor_id: record.doctorId,\n                    doctor_name: `${record.doctor.firstName} ${record.doctor.lastName}`,\n                    diagnosis: record.diagnosis,\n                    items: (record.prescriptions || []).map((item: any, idx: number) => ({\n                        medicine_id: item.medicineId || `med-${idx}`,\n                        medicine_name: item.medicineName,\n                        dosage: item.dosage,\n                        frequency: item.frequency,\n                        duration: item.duration,\n                        instructions: item.instructions || '',\n                        quantity: 0,\n                        unit_price: 0,\n                        total_price: 0\n                    })),\n                    total_amount: 0,\n                    status: (record as any).prescriptionStatus || 'pending', // Use status from backend\n                    created_at: record.createdAt\n                })) as Prescription[];\n\n            setPrescriptions(validPrescriptions);\n            setHasFetched(true);\n        } catch (error) {\n            console.error('Failed to fetch prescriptions:', error);\n            // toast.error('Failed to load prescriptions'); // specific to component mount, maybe redundant toast\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        // Only fetch prescriptions for roles that have permission\n        const allowedRoles = ['ADMIN', 'DOCTOR', 'PHARMACIST'];\n        const userRole = user?.role?.toUpperCase();\n\n        if (!authLoading && user && !hasFetched && allowedRoles.includes(userRole || '')) {\n            fetchPrescriptions();\n        }\n\n        if (!authLoading && !user) {\n            setPrescriptions([]);\n            setHasFetched(false);\n        }\n    }, [user, authLoading, hasFetched, fetchPrescriptions]);\n\n    const addPrescription = async (prescriptionData: any) => {\n        try {\n            // Map UI format to Backend Create Input\n            const input: CreateMedicalRecordInput = {\n                patientId: prescriptionData.patient_id,\n                doctorId: '', // Backend uses logged in user\n                diagnosis: prescriptionData.diagnosis,\n                treatmentNotes: 'Prescription Generated',\n                chiefComplaint: 'Prescription Request',\n                prescriptions: prescriptionData.items.map((item: any) => ({\n                    medicineName: item.medicine_name,\n                    dosage: item.dosage,\n                    frequency: item.frequency,\n                    duration: item.duration,\n                    instructions: ''\n                }))\n            };\n\n            await medicalRecordService.createRecord(input);\n            toast.success('Prescription created successfully');\n            fetchPrescriptions(); // Refresh list\n        } catch (error) {\n            console.error('Failed to create prescription:', error);\n            toast.error('Failed to create prescription');\n            throw error;\n        }\n    };\n\n    const getPrescriptionsByPatientId = (patientId: string): Prescription[] => {\n        return prescriptions.filter(p => p.patient_id === patientId);\n    };\n\n    return (\n        <PrescriptionContext.Provider value={{\n            prescriptions,\n            loading,\n            addPrescription,\n            getPrescriptionsByPatientId,\n            refreshPrescriptions: fetchPrescriptions\n        }}>\n            {children}\n        </PrescriptionContext.Provider>\n    );\n};\n\nexport const usePrescriptions = () => {\n    const context = useContext(PrescriptionContext);\n    if (context === undefined) {\n        throw new Error('usePrescriptions must be used within a PrescriptionProvider');\n    }\n    return context;\n};\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\data\\geoData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\data\\mockData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\data\\mockData_fixed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\data\\servicesData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\hooks\\usePermissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\ApiTest.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\BookAppointment.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\ForgotPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\InvoicePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\ServiceDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\Unauthorized.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminAnalytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminAppointments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminDashboard.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDashboardData'. Either include it or remove the dependency array.","line":106,"column":6,"nodeType":"ArrayExpression","endLine":106,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [currentDate, fetchDashboardData]","fix":{"range":[3971,3984],"text":"[currentDate, fetchDashboardData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DashboardLayout } from '@/components/layout/DashboardLayout';\nimport { StatsCard } from '@/components/dashboard/StatsCard';\nimport { DataTable } from '@/components/dashboard/DataTable';\nimport { StatusBadge } from '@/components/dashboard/StatusBadge';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  Users,\n  UserCheck,\n  Calendar,\n  IndianRupee,\n  AlertTriangle,\n  TrendingUp,\n  ArrowUpRight,\n  Clock,\n  Activity\n} from 'lucide-react';\nimport { format } from 'date-fns';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { toast } from \"sonner\";\nimport { ReportDetailsDialog } from \"@/components/admin/ReportDetailsDialog\";\n\nimport { usePatients } from \"@/contexts/PatientContext\";\nimport { useEffect, useState } from 'react';\nimport { appointmentService } from '@/services/appointmentService';\nimport { staffService } from '@/services/staffService';\nimport { billingService, Bill } from '@/services/billingService';\nimport { patientService } from '@/services/patientService';\nimport { Appointment, StaffMember, Patient } from '@/types';\n\nexport default function AdminDashboard() {\n  const navigate = useNavigate();\n  // const { patients } = usePatients(); // Use API for this too if possible, but context is okay for now if it fetches real data. \n  // However, PatientContext usually fetches its own data. \n  // Let's assume PatientContext is not yet fully using API for *all* patients list in a way scalable for admin dashboard stats if it loads everything.\n  // Actually, let's fetch counts directly if possible or compute from lists.\n\n  // State\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [staff, setStaff] = useState<StaffMember[]>([]);\n  const [bills, setBills] = useState<Bill[]>([]);\n  const [patients, setPatients] = useState<Patient[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n  const [currentDate, setCurrentDate] = useState<string>(format(new Date(), 'yyyy-MM-dd'));\n\n  const fetchDashboardData = async (showLoading = true) => {\n    if (showLoading) setLoading(true);\n    try {\n      const [fetchedAppointments, fetchedStaff, fetchedBills, fetchedPatients] = await Promise.all([\n        appointmentService.getAppointments(),\n        staffService.getStaff(),\n        billingService.getBills(),\n        patientService.getPatients()\n      ]);\n      setAppointments(fetchedAppointments);\n      setStaff(fetchedStaff);\n      setBills(fetchedBills.items || []);\n      // Handle paginated or array response for patients\n      const patientsData: any = fetchedPatients;\n      setPatients(Array.isArray(patientsData) ? patientsData : (patientsData.items || []));\n      setLastUpdated(new Date());\n\n      // Update current date reference\n      const today = format(new Date(), 'yyyy-MM-dd');\n      if (today !== currentDate) {\n        setCurrentDate(today);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch dashboard data\", error);\n      toast.error(\"Failed to load dashboard data\");\n    } finally {\n      if (showLoading) setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchDashboardData();\n\n    // Polling every 30 seconds for \"live\" data\n    const pollingInterval = setInterval(() => {\n      fetchDashboardData(false);\n    }, 30000);\n\n    // Check for day change every minute to update the \"Today\" reference\n    const dateInterval = setInterval(() => {\n      const now = format(new Date(), 'yyyy-MM-dd');\n      if (now !== currentDate) {\n        console.log(\"Day changed, refreshing dashboard...\");\n        fetchDashboardData(true);\n      }\n    }, 60000);\n\n    return () => {\n      clearInterval(pollingInterval);\n      clearInterval(dateInterval);\n    };\n  }, [currentDate]);\n\n  const todayAppointments = appointments.filter(\n    (apt) => format(new Date(apt.date), 'yyyy-MM-dd') === currentDate\n  );\n\n  // Using real patient count from API - filtering for today's registrations\n  const activePatientsToday = patients.filter(\n    (p) => p.status === 'active' && format(new Date(p.created_at || ''), 'yyyy-MM-dd') === currentDate\n  ).length;\n\n  const activeDoctors = staff.filter((d) => d.role === 'doctor' && d.status === 'active').length;\n\n  // Total pending bills across all dates (usually important for admin)\n  const pendingBillsTotal = bills.filter((b) => b.status === 'PENDING').length;\n\n  // Pending appointments today\n  const pendingAppointmentsToday = appointments.filter(\n    (a) => a.status === 'scheduled' && format(new Date(a.date), 'yyyy-MM-dd') === currentDate\n  ).length;\n\n  // Calculate today's revenue from paid bills created today\n  const todayRevenue = bills\n    .filter((b) => b.status === 'PAID' && format(new Date(b.createdAt), 'yyyy-MM-dd') === currentDate)\n    .reduce((sum, b) => sum + Number(b.grandTotal || 0), 0);\n\n  const recentAppointments = appointments.slice(0, 5);\n  const recentBills = bills.slice(0, 5);\n\n\n  const appointmentColumns = [\n    { key: 'patient_name', header: 'Patient' },\n    { key: 'doctor_name', header: 'Doctor' },\n    {\n      key: 'time',\n      header: 'Time',\n      render: (apt: typeof appointments[0]) => (\n        <span className=\"text-muted-foreground\">{apt.time}</span>\n      )\n    },\n    {\n      key: 'status',\n      header: 'Status',\n      render: (apt: typeof appointments[0]) => (\n        <StatusBadge status={apt.status} />\n      )\n    },\n  ];\n\n  const billColumns = [\n    {\n      key: 'patient',\n      header: 'Patient',\n      render: (bill: typeof bills[0]) => (\n        <span>{bill.patient?.firstName} {bill.patient?.lastName}</span>\n      )\n    },\n    {\n      key: 'grandTotal',\n      header: 'Amount',\n      render: (bill: typeof bills[0]) => (\n        <span className=\"font-medium\">â‚¹{Number(bill.grandTotal).toLocaleString()}</span>\n      )\n    },\n    {\n      key: 'status',\n      header: 'Status',\n      render: (bill: typeof bills[0]) => (\n        <StatusBadge status={bill.status.toLowerCase() as any} />\n      )\n    },\n  ];\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Hospital Overview</h1>\n            <div className=\"flex items-center gap-2\">\n              <p className=\"text-muted-foreground\">\n                {format(new Date(), 'EEEE, MMMM d, yyyy')}\n              </p>\n              <span className=\"h-1 w-1 rounded-full bg-muted-foreground/50\"></span>\n              <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                <Activity className=\"h-3 w-3 animate-pulse text-green-500\" />\n                Live: {format(lastUpdated, 'HH:mm:ss')}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            <Dialog>\n              <DialogTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\">\n                  <Clock className=\"h-4 w-4 mr-2\" />\n                  View Schedule\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n                <DialogHeader>\n                  <DialogTitle>Hospital Schedule</DialogTitle>\n                  <DialogDescription>\n                    Overview of today's shifts and appointments\n                  </DialogDescription>\n                </DialogHeader>\n                <div className=\"space-y-4\">\n                  <div className=\"border rounded-md p-4\">\n                    <h3 className=\"font-semibold mb-2\">Doctor Shifts</h3>\n                    <div className=\"grid gap-2\">\n                      {staff.filter(d => d.role === 'doctor' && d.status === 'active').map(doc => (\n                        <div key={doc.id} className=\"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-900 rounded\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"h-2 w-2 rounded-full bg-green-500\"></div>\n                            <span>{doc.full_name}</span>\n                            <span className=\"text-xs text-muted-foreground\">({doc.department})</span>\n                          </div>\n                          <div className=\"flex flex-col items-end\">\n                            <span className=\"text-xs font-medium bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded\">09:00 - 17:00</span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </DialogContent>\n            </Dialog>\n\n            <ReportDetailsDialog>\n              <Button size=\"sm\">\n                <TrendingUp className=\"h-4 w-4 mr-2\" />\n                Generate Report\n              </Button>\n            </ReportDetailsDialog>\n          </div>\n        </div>\n\n        {/* Modules Grid - Quick Access */}\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n          {[\n            { title: 'Staff', icon: <UserCheck className=\"h-5 w-5\" />, path: '/admin/staff', color: 'text-blue-600', bg: 'bg-blue-50 dark:bg-blue-900/20' },\n            { title: 'Patients', icon: <Users className=\"h-5 w-5\" />, path: '/admin/patients', color: 'text-green-600', bg: 'bg-green-50 dark:bg-green-900/20' },\n            { title: 'Appts', icon: <Calendar className=\"h-5 w-5\" />, path: '/admin/appointments', color: 'text-purple-600', bg: 'bg-purple-50 dark:bg-purple-900/20' },\n            { title: 'Depts', icon: <Activity className=\"h-5 w-5\" />, path: '/admin/departments', color: 'text-orange-600', bg: 'bg-orange-50 dark:bg-orange-900/20' },\n            { title: 'Billing', icon: <IndianRupee className=\"h-5 w-5\" />, path: '/admin/billing', color: 'text-pink-600', bg: 'bg-pink-50 dark:bg-pink-900/20' },\n            { title: 'Reports', icon: <TrendingUp className=\"h-5 w-5\" />, path: '/admin/reports', color: 'text-indigo-600', bg: 'bg-indigo-50 dark:bg-indigo-900/20' },\n          ].map((module) => (\n            <Card key={module.path} className=\"hover:shadow-md transition-shadow cursor-pointer\" onClick={() => navigate(module.path)}>\n              <CardContent className=\"p-4 flex flex-col items-center justify-center text-center gap-2\">\n                <div className={`p-2 rounded-full ${module.bg}`}>\n                  <div className={module.color}>{module.icon}</div>\n                </div>\n                <span className=\"text-xs font-medium\">{module.title}</span>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          <StatsCard\n            title=\"New Patients\"\n            value={activePatientsToday}\n            icon={<Users className=\"h-5 w-5\" />}\n            trend={{ value: 12, isPositive: true }}\n            description=\"Registered today\"\n          />\n          <StatsCard\n            title=\"Doctors on Duty\"\n            value={activeDoctors}\n            icon={<UserCheck className=\"h-5 w-5\" />}\n            description=\"Available for consultations\"\n            variant=\"primary\"\n          />\n          <StatsCard\n            title=\"Today's Appointments\"\n            value={todayAppointments.length}\n            icon={<Calendar className=\"h-5 w-5\" />}\n            trend={{ value: 5, isPositive: true }}\n            description=\"Scheduled for today\"\n          />\n          <StatsCard\n            title=\"Today's Revenue\"\n            value={`â‚¹${todayRevenue.toLocaleString()}`}\n            icon={<IndianRupee className=\"h-5 w-5\" />}\n            trend={{ value: 8.2, isPositive: true }}\n            description=\"From paid bills\"\n            variant=\"success\"\n          />\n        </div>\n\n        {/* Secondary Stats */}\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <StatsCard\n            title=\"Pending Bills\"\n            value={pendingBillsTotal}\n            icon={<AlertTriangle className=\"h-5 w-5\" />}\n            description=\"Awaiting payment (total)\"\n            variant=\"warning\"\n          />\n          <StatsCard\n            title=\"Pending Appointments\"\n            value={pendingAppointmentsToday}\n            icon={<Activity className=\"h-5 w-5\" />}\n            description=\"Today's pending check-ins\"\n            variant=\"destructive\"\n          />\n        </div>\n\n        {/* Tables Grid */}\n        <div className=\"grid gap-6 lg:grid-cols-2\">\n          {/* Recent Appointments */}\n          <Card className=\"glass\">\n            <CardHeader className=\"flex flex-row items-center justify-between\">\n              <div>\n                <CardTitle className=\"text-lg\">Recent Appointments</CardTitle>\n                <CardDescription>Today's scheduled consultations</CardDescription>\n              </div>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-1\">\n                View All <ArrowUpRight className=\"h-4 w-4\" />\n              </Button>\n            </CardHeader>\n            <CardContent>\n              <DataTable\n                data={recentAppointments}\n                columns={appointmentColumns}\n                emptyMessage=\"No appointments scheduled\"\n              />\n            </CardContent>\n          </Card>\n\n          {/* Recent Bills */}\n          <Card className=\"glass\">\n            <CardHeader className=\"flex flex-row items-center justify-between\">\n              <div>\n                <CardTitle className=\"text-lg\">Recent Bills</CardTitle>\n                <CardDescription>Latest billing activity</CardDescription>\n              </div>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-1\">\n                View All <ArrowUpRight className=\"h-4 w-4\" />\n              </Button>\n            </CardHeader>\n            <CardContent>\n              <DataTable\n                data={recentBills}\n                columns={billColumns}\n                emptyMessage=\"No bills found\"\n              />\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Alerts Section */}\n        <Card className=\"border-warning/30 bg-warning/5\">\n          <CardHeader>\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5 text-warning\" />\n              System Alerts\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {pendingBillsTotal > 0 && (\n                <div className=\"flex items-center justify-between p-3 rounded-lg bg-card/50\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"h-2 w-2 rounded-full bg-warning animate-pulse\" />\n                    <span className=\"text-sm\">{pendingBillsTotal} bills pending payment</span>\n                  </div>\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('/admin/billing')}>Review</Button>\n                </div>\n              )}\n              {pendingAppointmentsToday > 0 && (\n                <div className=\"flex items-center justify-between p-3 rounded-lg bg-card/50\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"h-2 w-2 rounded-full bg-primary animate-pulse\" />\n                    <span className=\"text-sm\">{pendingAppointmentsToday} appointments waiting for check-in today</span>\n                  </div>\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('/admin/appointments')}>Review</Button>\n                </div>\n              )}\n              {pendingBillsTotal === 0 && pendingAppointmentsToday === 0 && (\n                <div className=\"flex items-center gap-3 p-3 rounded-lg bg-card/50\">\n                  <div className=\"h-2 w-2 rounded-full bg-green-500\" />\n                  <span className=\"text-sm text-muted-foreground\">No pending alerts at this time</span>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n\n        {/* OPD Management Section - Added as per request to be at the bottom */}\n        <Card className=\"border-purple-200 bg-purple-50 dark:bg-purple-900/10 dark:border-purple-800\">\n          <CardHeader className=\"flex flex-row items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-xl flex items-center gap-2 text-purple-700 dark:text-purple-400\">\n                <Activity className=\"h-6 w-6\" />\n                OPD Department\n              </CardTitle>\n              <CardDescription>Manage Out-Patient Department details</CardDescription>\n            </div>\n            <Button onClick={() => navigate('/opd/dashboard')} className=\"bg-purple-600 hover:bg-purple-700 text-white\">\n              View OPD Details <ArrowUpRight className=\"ml-2 h-4 w-4\" />\n            </Button>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-purple-100 dark:border-purple-900/50\">\n                <p className=\"text-sm text-muted-foreground\">Today's Visits</p>\n                <p className=\"text-2xl font-bold text-purple-600\">{todayAppointments.length}</p>\n              </div>\n              <div className=\"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-purple-100 dark:border-purple-900/50\">\n                <p className=\"text-sm text-muted-foreground\">Active Doctors</p>\n                <p className=\"text-2xl font-bold text-purple-600\">{activeDoctors}</p>\n              </div>\n              <div className=\"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-purple-100 dark:border-purple-900/50\">\n                <p className=\"text-sm text-muted-foreground\">Pending Bills</p>\n                <p className=\"text-2xl font-bold text-purple-600\">{pendingBillsTotal}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div >\n    </DashboardLayout >\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminPatients.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPatients'. Either include it or remove the dependency array.","line":140,"column":8,"nodeType":"ArrayExpression","endLine":140,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPatients, filters]","fix":{"range":[5963,5972],"text":"[fetchPatients, filters]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { DataTable } from \"@/components/dashboard/DataTable\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Users, Download, Filter as FilterIcon, Search, Trash2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { PatientRegistrationDialog } from \"@/components/patients/PatientRegistrationDialog\";\nimport { PatientDetailsDialog } from \"@/components/patients/PatientDetailsDialog\";\nimport { printPatientCard } from \"@/utils/printPatientCard\";\nimport { downloadPatientCardPDF } from \"@/utils/downloadPatientPDF\";\nimport { PatientFilterPanel } from \"@/components/patients/PatientFilterPanel\";\nimport { FilterChips } from \"@/components/patients/FilterChips\";\nimport { SavedViews } from \"@/components/patients/SavedViews\";\nimport { PatientFilter } from \"@/types/filters\";\nimport { patientService } from \"@/services/patientService\";\nimport { Patient } from \"@/types\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n    Pagination,\n    PaginationContent,\n    PaginationItem,\n    PaginationLink,\n    PaginationNext,\n    PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\nimport { format } from \"date-fns\";\nimport { DatePicker } from \"@/components/ui/date-picker\";\nimport {\n    AlertDialog,\n    AlertDialogAction,\n    AlertDialogCancel,\n    AlertDialogContent,\n    AlertDialogDescription,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogTitle,\n    AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { toast } from \"sonner\";\n\nexport default function AdminPatients() {\n    const [patients, setPatients] = useState<Patient[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [meta, setMeta] = useState({ page: 1, totalPages: 1, total: 0 });\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\n\n    // Date Filtering State (Default: None for \"All Patients\" view)\n    const [selectedDate, setSelectedDate] = useState<Date | undefined>(undefined);\n\n    // Filter State\n    const [filters, setFilters] = useState<PatientFilter>({\n        page: 1,\n        pageSize: 15,\n        sortBy: 'created_at',\n        sortDir: 'desc',\n        date: undefined\n    });\n\n\n    const columns = [\n        { key: \"uhid\", header: \"ID\" },\n        { key: \"full_name\", header: \"Name\" },\n        { key: \"gender\", header: \"Gender\", render: (p: any) => <span className=\"capitalize\">{p.gender}</span> },\n        { key: \"phone\", header: \"Phone\" },\n        { key: \"blood_group\", header: \"Blood Group\" },\n        {\n            key: \"status\", header: \"Status\", render: (p: any) => (\n                <Badge variant={p.status === 'active' ? 'default' : 'secondary'}>\n                    {p.status}\n                </Badge>\n            )\n        },\n        {\n            key: \"actions\",\n            header: \"Actions\",\n            render: (p: any) => (\n                <div className=\"flex items-center gap-2\">\n                    <PatientDetailsDialog patientId={p.uhid} patient={p}>\n                        <Button variant=\"ghost\" size=\"sm\">View</Button>\n                    </PatientDetailsDialog>\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => downloadPatientCardPDF(p)}>\n                        <Download className=\"h-4 w-4\" />\n                    </Button>\n\n                    <AlertDialog>\n                        <AlertDialogTrigger asChild>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-destructive hover:text-destructive hover:bg-destructive/10\">\n                                <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                        </AlertDialogTrigger>\n                        <AlertDialogContent>\n                            <AlertDialogHeader>\n                                <AlertDialogTitle>Delete Patient Record</AlertDialogTitle>\n                                <AlertDialogDescription>\n                                    Are you sure you want to delete the record for <strong>{p.full_name}</strong>? This action cannot be undone and will remove all associated data, including bills and prescriptions.\n                                </AlertDialogDescription>\n                            </AlertDialogHeader>\n                            <AlertDialogFooter>\n                                <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                <AlertDialogAction\n                                    onClick={() => handleDelete(p.uhid)}\n                                    className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                                >\n                                    Delete\n                                </AlertDialogAction>\n                            </AlertDialogFooter>\n                        </AlertDialogContent>\n                    </AlertDialog>\n                </div>\n            )\n        }\n    ];\n\n    const fetchPatients = async () => {\n        setLoading(true);\n        try {\n            const response = await patientService.getPatients(filters);\n            setPatients(response.items || []);\n            // Assuming response structure has meta, if not fallbacks\n            setMeta({\n                page: filters.page || 1,\n                totalPages: response.meta?.totalPages || response.totalPages || 1,\n                total: response.meta?.total || response.total || (response.items?.length || 0)\n            });\n        } catch (error) {\n            console.error(\"Failed to fetch patients\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Debounce search/filter changes\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            fetchPatients();\n        }, 300);\n        return () => clearTimeout(timer);\n    }, [filters]);\n\n    const handleFilterChange = (newFilters: PatientFilter) => {\n        setFilters({ ...newFilters, page: 1 }); // Reset to page 1 on filter change\n    };\n\n    const handleClearFilters = () => {\n        setSelectedDate(undefined);\n        setFilters({\n            page: 1,\n            pageSize: 15,\n            sortBy: 'created_at',\n            sortDir: 'desc',\n            date: undefined,\n            search: ''\n        });\n    };\n\n\n    const handleRemoveFilter = (key: keyof PatientFilter) => {\n        if (key === 'date') {\n            setSelectedDate(undefined);\n        }\n        const newFilters = { ...filters };\n        delete newFilters[key];\n        setFilters({ ...newFilters, page: 1 });\n    };\n\n    const handlePageChange = (page: number) => {\n        if (page < 1 || page > meta.totalPages) return;\n        setFilters(prev => ({ ...prev, page }));\n    };\n\n    const handleDateChange = (date: Date | undefined) => {\n        setSelectedDate(date);\n        setFilters(prev => ({\n            ...prev,\n            date: date ? format(date, 'yyyy-MM-dd') : undefined,\n            page: 1\n        }));\n    };\n\n    const handleDelete = async (uhid: string) => {\n        try {\n            await patientService.deletePatient(uhid);\n            toast.success(\"Patient record deleted successfully\");\n            fetchPatients(); // Refresh the list\n        } catch (error) {\n            console.error(\"Failed to delete patient\", error);\n            toast.error(\"Failed to delete patient record\");\n        }\n    };\n\n\n    return (\n        <DashboardLayout role=\"admin\">\n            <div className=\"space-y-6\">\n                <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                            <Users className=\"h-6 w-6\" />\n                            Patient Management\n                        </h1>\n                        <p className=\"text-muted-foreground\">View and manage patient records</p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <PatientRegistrationDialog onRegister={() => fetchPatients()}>\n                            <Button className=\"gap-2\">\n                                <Plus className=\"h-4 w-4\" /> Register Patient\n                            </Button>\n                        </PatientRegistrationDialog>\n                    </div>\n                </div>\n\n                <Card>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center\">\n                            <div>\n                                <CardTitle>All Patients</CardTitle>\n                                <CardDescription>Total {meta.total} registered patients</CardDescription>\n                            </div>\n\n                            <div className=\"flex items-center gap-2 w-full md:w-auto\">\n                                <DatePicker\n                                    date={selectedDate}\n                                    setDate={handleDateChange}\n                                    placeholder=\"Filter by Date\"\n                                />\n                                <div className=\"relative flex-1 md:w-64\">\n\n                                    <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                                    <Input\n                                        placeholder=\"Search patients...\"\n                                        className=\"pl-8\"\n                                        value={filters.search || ''}\n                                        onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value, page: 1 }))}\n                                    />\n                                </div>\n                                <Button variant=\"outline\" size=\"icon\" onClick={() => setIsFilterOpen(true)}>\n                                    <FilterIcon className=\"h-4 w-4\" />\n                                </Button>\n                                <SavedViews currentFilters={filters} onApply={handleFilterChange} />\n                            </div>\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        <FilterChips\n                            filters={filters}\n                            onRemove={handleRemoveFilter}\n                            onClearAll={handleClearFilters}\n                        />\n\n                        <DataTable\n                            data={patients}\n                            columns={columns}\n                            emptyMessage={loading ? \"Loading...\" : \"No patients found matching your filters\"}\n                        />\n\n                        {/* Pagination */}\n                        {meta.totalPages > 1 && (\n                            <div className=\"mt-4 flex justify-end\">\n                                <Pagination>\n                                    <PaginationContent>\n                                        <PaginationItem>\n                                            <PaginationPrevious\n                                                onClick={() => handlePageChange((filters.page || 1) - 1)}\n                                                className={filters.page === 1 ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n\n                                        <div className=\"flex items-center px-4 text-sm font-medium\">\n                                            Page {filters.page} of {meta.totalPages}\n                                        </div>\n\n                                        <PaginationItem>\n                                            <PaginationNext\n                                                onClick={() => handlePageChange((filters.page || 1) + 1)}\n                                                className={filters.page === meta.totalPages ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n                                    </PaginationContent>\n                                </Pagination>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                <PatientFilterPanel\n                    isOpen={isFilterOpen}\n                    onOpenChange={setIsFilterOpen}\n                    filters={filters}\n                    onApply={handleFilterChange}\n                    onClear={handleClearFilters}\n                />\n            </div>\n        </DashboardLayout>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\AdminPharmacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\Departments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\Reports.tsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":74,"column":21,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":74,"endColumn":76,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2822,2978],"text":"{ const patientsRes = await patientService.getPatients();\n                    await generatePatientReport(patientsRes.items || []);\n                    break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":78,"column":21,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":78,"endColumn":70,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3031,3178],"text":"{ const billsRes = await billingService.getBills();\n                    await generateBillingReport(billsRes.items || []);\n                    break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":82,"column":21,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":82,"endColumn":71,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3227,3360],"text":"{ const labOrders = await labService.getLabOrders();\n                    await generateLabReport(labOrders);\n                    break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":86,"column":21,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":86,"endColumn":77,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3418,3564],"text":"{ const records = await medicalRecordService.getRecords();\n                    await generateConsultationReport(records);\n                    break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Download, FileText, Activity, Server, Users, Database, TrendingUp, Calendar, Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState, useEffect } from \"react\";\nimport { billingService } from \"@/services/billingService\";\nimport { patientService } from \"@/services/patientService\";\nimport { labService } from \"@/services/labService\";\nimport { medicalRecordService } from \"@/services/medicalRecordService\";\nimport { formatCurrency } from \"@/utils/format\";\nimport { format } from \"date-fns\";\n\nimport {\n    generatePatientReport,\n    generateBillingReport,\n    generateLabReport,\n    generateConsultationReport,\n    generateFullAnalyticsReport\n} from \"@/utils/reportGenerator\";\n\nexport default function Reports() {\n    const { toast } = useToast();\n    const [loading, setLoading] = useState(true);\n    const [exporting, setExporting] = useState<string | null>(null);\n    const [systemStats, setSystemStats] = useState({\n        totalPatients: 0,\n        totalBills: 0,\n        totalLabOrders: 0,\n        totalConsultations: 0,\n        totalRevenue: 0,\n    });\n\n    useEffect(() => {\n        const fetchSystemStats = async () => {\n            try {\n                const [patientsRes, billsRes, labOrders, records] = await Promise.all([\n                    patientService.getPatients(),\n                    billingService.getBills(),\n                    labService.getLabOrders().catch(() => []),\n                    medicalRecordService.getRecords().catch(() => [])\n                ]);\n\n                const bills = billsRes?.items || [];\n                const patients = patientsRes?.items || [];\n                const totalRevenue = bills.reduce((acc: number, b: any) => acc + (b.grandTotal || 0), 0);\n\n                setSystemStats({\n                    totalPatients: patients.length,\n                    totalBills: bills.length,\n                    totalLabOrders: labOrders.length,\n                    totalConsultations: records.length,\n                    totalRevenue,\n                });\n            } catch (error) {\n                console.error(\"Failed to fetch system stats:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchSystemStats();\n    }, []);\n\n    const handleExportReport = async (reportId: string, reportName: string) => {\n        setExporting(reportId);\n        toast({\n            title: \"Export Started\",\n            description: `Generating ${reportName}...`,\n        });\n\n        try {\n            switch (reportId) {\n                case 'patient':\n                    const patientsRes = await patientService.getPatients();\n                    await generatePatientReport(patientsRes.items || []);\n                    break;\n                case 'billing':\n                    const billsRes = await billingService.getBills();\n                    await generateBillingReport(billsRes.items || []);\n                    break;\n                case 'lab':\n                    const labOrders = await labService.getLabOrders();\n                    await generateLabReport(labOrders);\n                    break;\n                case 'consultation':\n                    const records = await medicalRecordService.getRecords();\n                    await generateConsultationReport(records);\n                    break;\n                case 'full-analytics':\n                    await generateFullAnalyticsReport(systemStats);\n                    break;\n                default:\n                    console.warn(\"Unknown report type:\", reportId);\n            }\n            toast({\n                title: \"Export Complete\",\n                description: `${reportName} has been downloaded.`,\n                variant: \"default\",\n                className: \"bg-green-600 text-white\"\n            });\n        } catch (error) {\n            console.error(\"Export failed:\", error);\n            toast({\n                title: \"Export Failed\",\n                description: \"Could not generate report. Please try again.\",\n                variant: \"destructive\"\n            });\n        } finally {\n            setExporting(null);\n        }\n    };\n\n    const systemReports = [\n        { id: 'patient', name: 'Patient Registry Report', description: 'Complete list of all registered patients', icon: Users, count: systemStats.totalPatients },\n        { id: 'billing', name: 'Billing Summary Report', description: 'All billing transactions and revenue', icon: TrendingUp, count: systemStats.totalBills },\n        { id: 'lab', name: 'Lab Orders Report', description: 'All laboratory test orders', icon: Activity, count: systemStats.totalLabOrders },\n        { id: 'consultation', name: 'Consultation Report', description: 'All OPD consultations and diagnoses', icon: FileText, count: systemStats.totalConsultations },\n    ];\n\n    const analyticsReports = [\n        { id: 'revenue', name: 'Revenue Analytics', value: formatCurrency(systemStats.totalRevenue), description: 'Total revenue from all sources' },\n        { id: 'daily-avg', name: 'Daily Average', value: formatCurrency(systemStats.totalRevenue / 30), description: 'Estimated daily average (30 days)' },\n        { id: 'generated', name: 'Report Generated', value: format(new Date(), 'dd MMM yyyy'), description: 'Current report date' },\n    ];\n\n    return (\n        <DashboardLayout role=\"admin\">\n            <div className=\"space-y-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                        <FileText className=\"h-6 w-6\" />\n                        Reports & Analytics\n                    </h1>\n                    <p className=\"text-muted-foreground\">View system reports and analytics summaries</p>\n                </div>\n\n                {loading ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                    </div>\n                ) : (\n                    <>\n                        {/* System Reports */}\n                        <Card>\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <Server className=\"h-5 w-5\" />\n                                    System Reports\n                                </CardTitle>\n                                <CardDescription>Download or export system-level reports</CardDescription>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"grid gap-4 md:grid-cols-2\">\n                                    {systemReports.map((report) => (\n                                        <div key={report.id} className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"p-2 rounded-lg bg-primary/10\">\n                                                    <report.icon className=\"h-5 w-5 text-primary\" />\n                                                </div>\n                                                <div>\n                                                    <div className=\"font-medium\">{report.name}</div>\n                                                    <div className=\"text-sm text-muted-foreground\">{report.description}</div>\n                                                    <div className=\"text-xs text-primary mt-1\">{report.count} records</div>\n                                                </div>\n                                            </div>\n                                            <Button\n                                                variant=\"outline\"\n                                                size=\"sm\"\n                                                onClick={() => handleExportReport(report.id, report.name)}\n                                                disabled={exporting !== null}\n                                            >\n                                                {exporting === report.id ? (\n                                                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                                ) : (\n                                                    <Download className=\"h-4 w-4 mr-2\" />\n                                                )}\n                                                Export\n                                            </Button>\n                                        </div>\n                                    ))}\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        {/* Analytics Summary */}\n                        <Card>\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <Database className=\"h-5 w-5\" />\n                                    Analytics Summary\n                                </CardTitle>\n                                <CardDescription>Key metrics and performance indicators</CardDescription>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"grid gap-4 md:grid-cols-3\">\n                                    {analyticsReports.map((metric) => (\n                                        <div key={metric.id} className=\"p-4 border rounded-lg text-center\">\n                                            <div className=\"text-2xl font-bold text-primary\">{metric.value}</div>\n                                            <div className=\"font-medium mt-1\">{metric.name}</div>\n                                            <div className=\"text-sm text-muted-foreground\">{metric.description}</div>\n                                        </div>\n                                    ))}\n                                </div>\n                                <div className=\"mt-4 flex justify-end\">\n                                    <Button\n                                        onClick={() => handleExportReport('full-analytics', 'Full Analytics Report')}\n                                        disabled={exporting !== null}\n                                    >\n                                        {exporting === 'full-analytics' ? (\n                                            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                        ) : (\n                                            <Download className=\"h-4 w-4 mr-2\" />\n                                        )}\n                                        Export Full Report\n                                    </Button>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </>\n                )}\n            </div>\n        </DashboardLayout>\n    );\n}\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\Settings.tsx","messages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":112,"column":29,"nodeType":"BlockStatement","messageId":"unexpected","endLine":112,"endColumn":32,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4190,4191],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Settings as SettingsIcon, Loader2, Pencil, X, Eye, EyeOff } from \"lucide-react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { api } from \"@/services/api\";\nimport { toast } from \"sonner\";\n\ninterface ProfileData {\n    displayName: string;\n    contactNumber: string;\n    email: string;\n}\n\ninterface HospitalData {\n    name: string;\n    email: string;\n    phone: string;\n    address: string;\n}\n\nexport default function Settings() {\n    const [loading, setLoading] = useState(false);\n    const [saving, setSaving] = useState(false);\n    const [passwordDialogOpen, setPasswordDialogOpen] = useState(false);\n    const [changingPassword, setChangingPassword] = useState(false);\n    const [isEditing, setIsEditing] = useState(false);\n\n    // System Preferences state\n    const [notificationsEnabled, setNotificationsEnabled] = useState(true);\n    const [maintenanceMode, setMaintenanceMode] = useState(false);\n\n    // Original profile data (for cancel functionality)\n    const [originalProfileData, setOriginalProfileData] = useState<ProfileData>({\n        displayName: \"\",\n        contactNumber: \"\",\n        email: \"\",\n    });\n\n    // Profile form state\n    const [profileData, setProfileData] = useState<ProfileData>({\n        displayName: \"\",\n        contactNumber: \"\",\n        email: \"\",\n    });\n\n    // Hospital profile state\n    const [isEditingHospital, setIsEditingHospital] = useState(false);\n    const [savingHospital, setSavingHospital] = useState(false);\n    const [hospitalData, setHospitalData] = useState<HospitalData>({\n        name: \"Swetha SaiPhani Clinic\",\n        email: \"admin@hospital.com\",\n        phone: \"+91 98765 43210\",\n        address: \"Karimnagar, Telangana\",\n    });\n    const [originalHospitalData, setOriginalHospitalData] = useState<HospitalData>({\n        name: \"Swetha SaiPhani Clinic\",\n        email: \"admin@hospital.com\",\n        phone: \"+91 98765 43210\",\n        address: \"Karimnagar, Telangana\",\n    });\n\n    // Password form state\n    const [passwordData, setPasswordData] = useState({\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\",\n    });\n    const [showCurrentPassword, setShowCurrentPassword] = useState(false);\n    const [showNewPassword, setShowNewPassword] = useState(false);\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n    // Fetch current user profile on load\n    useEffect(() => {\n        const fetchProfile = async () => {\n            setLoading(true);\n            try {\n                const user = await api.get<any>('/users/me');\n                setProfileData({\n                    displayName: user.full_name || user.name || \"Admin\",\n                    contactNumber: user.phone || \"\",\n                    email: user.email || \"\",\n                });\n                setOriginalProfileData({\n                    displayName: user.full_name || user.name || \"Admin\",\n                    contactNumber: user.phone || \"\",\n                    email: user.email || \"\",\n                });\n            } catch (error) {\n                console.error(\"Failed to fetch profile\", error);\n                // Use defaults from localStorage if API fails\n                const storedUser = localStorage.getItem('user');\n                if (storedUser) {\n                    try {\n                        const parsed = JSON.parse(storedUser);\n                        setProfileData({\n                            displayName: parsed.full_name || parsed.name || \"Admin\",\n                            contactNumber: parsed.phone || \"\",\n                            email: parsed.email || \"\",\n                        });\n                    } catch { }\n                }\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchProfile();\n    }, []);\n\n    const handleUpdateProfile = async () => {\n        setSaving(true);\n        try {\n            // Split displayName into firstName and lastName\n            const names = profileData.displayName.trim().split(' ');\n            const firstName = names[0] || \"\";\n            const lastName = names.slice(1).join(' ') || \"\";\n\n            await api.updateProfile({\n                firstName,\n                lastName,\n                phone: profileData.contactNumber,\n                email: profileData.email,\n            });\n            toast.success(\"Profile updated successfully\");\n            setIsEditing(false);\n            // Update original data after successful save\n            setOriginalProfileData({ ...profileData });\n        } catch (error: any) {\n            console.error(\"Failed to update profile\", error);\n            toast.error(error.message || \"Failed to update profile\");\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const handleChangePassword = async () => {\n        // Validation\n        if (!passwordData.currentPassword || !passwordData.newPassword) {\n            toast.error(\"Please fill in all password fields\");\n            return;\n        }\n        if (passwordData.newPassword !== passwordData.confirmPassword) {\n            toast.error(\"New passwords do not match\");\n            return;\n        }\n        if (passwordData.newPassword.length < 6) {\n            toast.error(\"New password must be at least 6 characters\");\n            return;\n        }\n\n        setChangingPassword(true);\n        try {\n            await api.changePassword({\n                currentPassword: passwordData.currentPassword,\n                newPassword: passwordData.newPassword,\n            });\n            toast.success(\"Password changed successfully\");\n            setPasswordDialogOpen(false);\n            setPasswordData({ currentPassword: \"\", newPassword: \"\", confirmPassword: \"\" });\n        } catch (error: any) {\n            console.error(\"Failed to change password\", error);\n            toast.error(error.message || \"Failed to change password\");\n        } finally {\n            setChangingPassword(false);\n        }\n    };\n\n    const getInitials = (name: string) => {\n        return name\n            .split(\" \")\n            .map((n) => n[0])\n            .join(\"\")\n            .toUpperCase()\n            .substring(0, 2);\n    };\n\n    return (\n        <DashboardLayout role=\"admin\">\n            <div className=\"space-y-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                        <SettingsIcon className=\"h-6 w-6\" />\n                        Settings\n                    </h1>\n                    <p className=\"text-muted-foreground\">Manage system configurations</p>\n                </div>\n\n                <div className=\"grid gap-6\">\n                    <Card>\n                        <CardHeader className=\"pb-4 flex flex-row items-center justify-between\">\n                            <div>\n                                <CardTitle>Personal Profile</CardTitle>\n                                <CardDescription>Update your personal information and login credentials</CardDescription>\n                            </div>\n                            {!loading && !isEditing && (\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsEditing(true)}>\n                                    <Pencil className=\"h-4 w-4 mr-1\" />\n                                    Edit\n                                </Button>\n                            )}\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            {loading ? (\n                                <div className=\"flex items-center justify-center py-8\">\n                                    <Loader2 className=\"h-6 w-6 animate-spin\" />\n                                </div>\n                            ) : (\n                                <>\n                                    <div className=\"flex items-center gap-4 mb-4\">\n                                        <Avatar className=\"h-16 w-16\">\n                                            <AvatarFallback className=\"bg-primary text-primary-foreground text-xl font-bold\">\n                                                {getInitials(profileData.displayName || \"AD\")}\n                                            </AvatarFallback>\n                                        </Avatar>\n                                        <div>\n                                            <h3 className=\"font-semibold text-lg\">{profileData.displayName || \"Administrator\"}</h3>\n                                            <p className=\"text-sm text-muted-foreground\">{profileData.email}</p>\n                                        </div>\n                                    </div>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <Label>Display Name</Label>\n                                            <Input\n                                                value={profileData.displayName}\n                                                onChange={(e) => setProfileData({ ...profileData, displayName: e.target.value })}\n                                                placeholder=\"Enter your name\"\n                                                disabled={!isEditing}\n                                                className={!isEditing ? \"bg-muted\" : \"\"}\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label>Email</Label>\n                                            <Input\n                                                type=\"email\"\n                                                value={profileData.email}\n                                                onChange={(e) => setProfileData({ ...profileData, email: e.target.value })}\n                                                placeholder=\"Enter your email\"\n                                                disabled={!isEditing}\n                                                className={!isEditing ? \"bg-muted\" : \"\"}\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <Label>Contact Number</Label>\n                                            <Input\n                                                value={profileData.contactNumber}\n                                                onChange={(e) => setProfileData({ ...profileData, contactNumber: e.target.value })}\n                                                placeholder=\"+91 98765 43210\"\n                                                disabled={!isEditing}\n                                                className={!isEditing ? \"bg-muted\" : \"\"}\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"flex gap-2 pt-2\">\n                                        {isEditing ? (\n                                            <>\n                                                <Button onClick={handleUpdateProfile} disabled={saving}>\n                                                    {saving && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                                                    Save Changes\n                                                </Button>\n                                                <Button variant=\"outline\" onClick={() => setPasswordDialogOpen(true)}>\n                                                    Change Password\n                                                </Button>\n                                                <Button\n                                                    variant=\"ghost\"\n                                                    onClick={() => {\n                                                        setProfileData({ ...originalProfileData });\n                                                        setIsEditing(false);\n                                                    }}\n                                                >\n                                                    <X className=\"h-4 w-4 mr-1\" />\n                                                    Cancel\n                                                </Button>\n                                            </>\n                                        ) : (\n                                            <Button variant=\"outline\" onClick={() => setPasswordDialogOpen(true)}>\n                                                Change Password\n                                            </Button>\n                                        )}\n                                    </div>\n                                </>\n                            )}\n                        </CardContent>\n                    </Card>\n\n                    <Card>\n                        <CardHeader className=\"flex flex-row items-center justify-between\">\n                            <div>\n                                <CardTitle>Hospital Profile</CardTitle>\n                                <CardDescription>General hospital information</CardDescription>\n                            </div>\n                            {!isEditingHospital && (\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsEditingHospital(true)}>\n                                    <Pencil className=\"h-4 w-4 mr-1\" />\n                                    Edit\n                                </Button>\n                            )}\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className=\"space-y-2\">\n                                    <Label>Hospital Name</Label>\n                                    <Input\n                                        value={hospitalData.name}\n                                        onChange={(e) => setHospitalData({ ...hospitalData, name: e.target.value })}\n                                        disabled={!isEditingHospital}\n                                        className={!isEditingHospital ? \"bg-muted\" : \"\"}\n                                    />\n                                </div>\n                                <div className=\"space-y-2\">\n                                    <Label>Contact Email</Label>\n                                    <Input\n                                        type=\"email\"\n                                        value={hospitalData.email}\n                                        onChange={(e) => setHospitalData({ ...hospitalData, email: e.target.value })}\n                                        disabled={!isEditingHospital}\n                                        className={!isEditingHospital ? \"bg-muted\" : \"\"}\n                                    />\n                                </div>\n                                <div className=\"space-y-2\">\n                                    <Label>Phone Number</Label>\n                                    <Input\n                                        value={hospitalData.phone}\n                                        onChange={(e) => setHospitalData({ ...hospitalData, phone: e.target.value })}\n                                        disabled={!isEditingHospital}\n                                        className={!isEditingHospital ? \"bg-muted\" : \"\"}\n                                    />\n                                </div>\n                                <div className=\"space-y-2\">\n                                    <Label>Address</Label>\n                                    <Input\n                                        value={hospitalData.address}\n                                        onChange={(e) => setHospitalData({ ...hospitalData, address: e.target.value })}\n                                        disabled={!isEditingHospital}\n                                        className={!isEditingHospital ? \"bg-muted\" : \"\"}\n                                    />\n                                </div>\n                            </div>\n                            {isEditingHospital ? (\n                                <div className=\"flex gap-2 pt-2\">\n                                    <Button\n                                        onClick={() => {\n                                            // Here you would call an API to save hospital settings\n                                            toast.success(\"Hospital profile updated successfully\");\n                                            setOriginalHospitalData({ ...hospitalData });\n                                            setIsEditingHospital(false);\n                                        }}\n                                        disabled={savingHospital}\n                                    >\n                                        {savingHospital && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                                        Save Changes\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        onClick={() => {\n                                            setHospitalData({ ...originalHospitalData });\n                                            setIsEditingHospital(false);\n                                        }}\n                                    >\n                                        <X className=\"h-4 w-4 mr-1\" />\n                                        Cancel\n                                    </Button>\n                                </div>\n                            ) : (\n                                <p className=\"text-sm text-muted-foreground\">\n                                    Click Edit to modify hospital settings.\n                                </p>\n                            )}\n                        </CardContent>\n                    </Card>\n\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>System Preferences</CardTitle>\n                            <CardDescription>Application wide settings</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"flex items-center justify-between p-2 border rounded\">\n                                <span>Enable System Notifications</span>\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                        setNotificationsEnabled(!notificationsEnabled);\n                                        toast.success(`System Notifications ${!notificationsEnabled ? 'enabled' : 'disabled'}`);\n                                    }}\n                                    className={notificationsEnabled ? \"bg-green-50 text-green-700 border-green-200\" : \"bg-red-50 text-red-700 border-red-200\"}\n                                >\n                                    {notificationsEnabled ? 'Enabled' : 'Disabled'}\n                                </Button>\n                            </div>\n                            <div className=\"flex items-center justify-between p-2 border rounded\">\n                                <span>Maintenance Mode</span>\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                        setMaintenanceMode(!maintenanceMode);\n                                        toast.success(`Maintenance Mode ${!maintenanceMode ? 'enabled' : 'disabled'}`);\n                                    }}\n                                    className={maintenanceMode ? \"bg-orange-50 text-orange-700 border-orange-200\" : \"bg-gray-50 text-gray-700 border-gray-200\"}\n                                >\n                                    {maintenanceMode ? 'Enabled' : 'Disabled'}\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Change Password Dialog */}\n            <Dialog open={passwordDialogOpen} onOpenChange={setPasswordDialogOpen}>\n                <DialogContent>\n                    <DialogHeader>\n                        <DialogTitle>Change Password</DialogTitle>\n                        <DialogDescription>\n                            Enter your current password and choose a new one.\n                        </DialogDescription>\n                    </DialogHeader>\n                    <div className=\"space-y-4 py-4\">\n                        <div className=\"space-y-2\">\n                            <Label>Current Password</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    type={showCurrentPassword ? \"text\" : \"password\"}\n                                    value={passwordData.currentPassword}\n                                    onChange={(e) => setPasswordData({ ...passwordData, currentPassword: e.target.value })}\n                                    placeholder=\"Enter current password\"\n                                    className=\"pr-10\"\n                                />\n                                <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                    onClick={() => setShowCurrentPassword(!showCurrentPassword)}\n                                >\n                                    {showCurrentPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                </Button>\n                            </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label>New Password</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    type={showNewPassword ? \"text\" : \"password\"}\n                                    value={passwordData.newPassword}\n                                    onChange={(e) => setPasswordData({ ...passwordData, newPassword: e.target.value })}\n                                    placeholder=\"Enter new password\"\n                                    className=\"pr-10\"\n                                />\n                                <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                    onClick={() => setShowNewPassword(!showNewPassword)}\n                                >\n                                    {showNewPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                </Button>\n                            </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                            <Label>Confirm New Password</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    type={showConfirmPassword ? \"text\" : \"password\"}\n                                    value={passwordData.confirmPassword}\n                                    onChange={(e) => setPasswordData({ ...passwordData, confirmPassword: e.target.value })}\n                                    placeholder=\"Confirm new password\"\n                                    className=\"pr-10\"\n                                />\n                                <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                                >\n                                    {showConfirmPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                </Button>\n                            </div>\n                        </div>\n                    </div>\n                    <DialogFooter>\n                        <Button variant=\"outline\" onClick={() => setPasswordDialogOpen(false)}>\n                            Cancel\n                        </Button>\n                        <Button onClick={handleChangePassword} disabled={changingPassword}>\n                            {changingPassword && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                            Change Password\n                        </Button>\n                    </DialogFooter>\n                </DialogContent>\n            </Dialog>\n        </DashboardLayout >\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\Staff.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\StaffManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDAppointments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDConsultation.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":210,"column":21,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":210,"endColumn":34,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[8514,8527],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from \"react\";\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { DataTable } from \"@/components/dashboard/DataTable\";\nimport { medicalRecordService, MedicalRecord } from \"@/services/medicalRecordService\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Stethoscope, Eye, Activity, Pill, User, Calendar, FileText, RefreshCw, Loader2, Download, Printer } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { toast } from \"sonner\";\nimport { format } from \"date-fns\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport { getTransparentTableStyles } from \"@/utils/pdfUtils\";\n\nexport default function OPDConsultation() {\n    const [records, setRecords] = useState<MedicalRecord[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [refreshing, setRefreshing] = useState(false);\n    const [selectedRecord, setSelectedRecord] = useState<MedicalRecord | null>(null);\n    const [isGeneratingPdf, setIsGeneratingPdf] = useState(false);\n\n    const fetchRecords = useCallback(async (showRefreshToast = false) => {\n        try {\n            if (showRefreshToast) setRefreshing(true);\n            const data = await medicalRecordService.getRecords();\n            setRecords(data);\n            if (showRefreshToast) toast.success(\"Records refreshed\");\n        } catch (error) {\n            console.error(\"Failed to fetch medical records:\", error);\n            toast.error(\"Failed to load consultation records\");\n            setRecords([]);\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchRecords();\n        const interval = setInterval(() => fetchRecords(), 30000);\n        return () => clearInterval(interval);\n    }, [fetchRecords]);\n\n    const getPatientName = (record: MedicalRecord) => {\n        return record.patient\n            ? `${record.patient.firstName} ${record.patient.lastName}`.trim()\n            : \"Unknown Patient\";\n    };\n\n    const getDoctorName = (record: MedicalRecord) => {\n        return record.doctor\n            ? `Dr. ${record.doctor.firstName} ${record.doctor.lastName}`.trim()\n            : \"Unknown Doctor\";\n    };\n\n    const formatDate = (dateString: string) => {\n        try {\n            return format(new Date(dateString), 'dd MMM yyyy');\n        } catch {\n            return dateString;\n        }\n    };\n\n    const handlePrint = async () => {\n        if (!selectedRecord) return;\n        setIsGeneratingPdf(true);\n\n        try {\n            const doc = new jsPDF();\n            const pageWidth = doc.internal.pageSize.getWidth();\n            const pageHeight = doc.internal.pageSize.getHeight();\n\n            // Helpers\n            const getBase64ImageFromUrl = async (imageUrl: string): Promise<string> => {\n                try {\n                    const res = await fetch(imageUrl);\n                    const blob = await res.blob();\n                    return new Promise((resolve, reject) => {\n                        const reader = new FileReader();\n                        reader.onload = () => resolve(reader.result as string);\n                        reader.onerror = () => reject(new Error(\"Failed to convert image to base64\"));\n                        reader.readAsDataURL(blob);\n                    });\n                } catch (error) {\n                    console.error(\"Error loading image:\", imageUrl, error);\n                    return \"\";\n                }\n            };\n\n            const loadImage = (src: string): Promise<HTMLImageElement> => {\n                return new Promise((resolve, reject) => {\n                    const img = new Image();\n                    img.onload = () => resolve(img);\n                    img.onerror = reject;\n                    img.src = src;\n                });\n            };\n\n            // 1. Add Background Template\n            try {\n                const headerUrl = '/header_template.jpg';\n                const headerBase64 = await getBase64ImageFromUrl(headerUrl);\n                doc.addImage(headerBase64, 'JPEG', 0, 0, 210, 297);\n            } catch (error) {\n                console.error(\"Failed to load background template\", error);\n            }\n\n            const startY = 60; // Below header area of template\n\n            doc.setTextColor(0, 0, 0);\n\n            // Report Title\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.setFontSize(16);\n            doc.text(\"Consultation Record\", 14, startY);\n\n            // Patient Info\n            doc.setFontSize(10);\n            doc.setFont(\"helvetica\", \"normal\");\n\n            let yPos = startY + 10;\n            const leftColX = 14;\n            const rightColX = pageWidth / 2 + 10;\n\n            // Row 1\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Patient Name:\", leftColX, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.text(getPatientName(selectedRecord), leftColX + 30, yPos);\n\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Date:\", rightColX, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.text(formatDate(selectedRecord.date || selectedRecord.createdAt), rightColX + 15, yPos);\n\n            yPos += 8;\n\n            // Row 2\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Doctor:\", leftColX, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.text(getDoctorName(selectedRecord), leftColX + 30, yPos);\n\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Ref ID:\", rightColX, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.text(`#${selectedRecord.id.slice(0, 8)}`, rightColX + 15, yPos);\n\n            yPos += 15;\n\n            // Clinical Info\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Clinical Assessment\", 14, yPos);\n            doc.line(14, yPos + 2, pageWidth - 14, yPos + 2);\n            yPos += 10;\n\n            // Chief Complaint\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Chief Complaint:\", 14, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            const splitComplaint = doc.splitTextToSize(selectedRecord.chiefComplaint || '-', pageWidth - 50);\n            doc.text(splitComplaint, 50, yPos);\n            yPos += (splitComplaint.length * 5) + 5;\n\n            // Diagnosis\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Diagnosis:\", 14, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            const splitDiagnosis = doc.splitTextToSize(selectedRecord.diagnosis || '-', pageWidth - 50);\n            doc.text(splitDiagnosis, 50, yPos);\n            yPos += (splitDiagnosis.length * 5) + 5;\n\n            // Notes\n            doc.setFont(\"helvetica\", \"bold\");\n            doc.text(\"Treatment Notes:\", 14, yPos);\n            doc.setFont(\"helvetica\", \"normal\");\n            const splitNotes = doc.splitTextToSize(selectedRecord.treatmentNotes || '-', pageWidth - 50);\n            doc.text(splitNotes, 50, yPos);\n            yPos += (splitNotes.length * 5) + 10;\n\n            // Vitals (if any)\n            if (selectedRecord.vitals) {\n                const v = selectedRecord.vitals;\n                const vitalsData = [\n                    ['BP', v.bloodPressureSystolic ? `${v.bloodPressureSystolic}/${v.bloodPressureDiastolic} mmHg` : '-'],\n                    ['Heart Rate', v.heartRate ? `${v.heartRate} bpm` : '-'],\n                    ['Temp', v.temperature ? `${v.temperature} Â°F` : '-'],\n                    ['SpO2', v.oxygenSaturation ? `${v.oxygenSaturation} %` : '-']\n                ].filter(item => item[1] !== '-');\n\n                if (vitalsData.length > 0) {\n                    // We can put vitals in a simple table or inline\n                    // Let's use autoTable for cleanliness\n                    autoTable(doc, {\n                        ...getTransparentTableStyles(),\n                        startY: yPos,\n                        head: [['Vitals', 'Value']],\n                        body: vitalsData,\n                        tableWidth: 80,\n                        margin: { left: 14 }\n                    });\n                    // @ts-ignore\n                    yPos = doc.lastAutoTable.finalY + 10;\n                }\n            }\n\n            // Prescriptions\n            if (selectedRecord.prescriptions && selectedRecord.prescriptions.length > 0) {\n                doc.setFont(\"helvetica\", \"bold\");\n                doc.setFontSize(11);\n                doc.text(\"Prescriptions\", 14, yPos);\n                yPos += 5;\n\n                const presRows = selectedRecord.prescriptions.map(p => [\n                    p.medicineName,\n                    p.dosage,\n                    p.frequency,\n                    p.duration,\n                    p.instructions || '-'\n                ]);\n\n                autoTable(doc, {\n                    ...getTransparentTableStyles(),\n                    startY: yPos,\n                    head: [['Medicine', 'Dosage', 'Frequency', 'Duration', 'Instructions']],\n                    body: presRows,\n                    columnStyles: { 4: { cellWidth: 50 } }\n                });\n            }\n\n            // Footer\n            const pageCount = (doc as any).internal.getNumberOfPages();\n            for (let i = 1; i <= pageCount; i++) {\n                doc.setPage(i);\n                doc.text(`Generated on ${format(new Date(), \"PPpp\")}`, 14, doc.internal.pageSize.height - 10);\n                doc.text(`Page ${i} of ${pageCount}`, pageWidth - 14, doc.internal.pageSize.height - 10, { align: \"right\" });\n            }\n\n            // Print\n            doc.autoPrint();\n            window.open(doc.output('bloburl'), '_blank');\n            toast.success(\"Consultation record opened for printing\");\n\n        } catch (error) {\n            console.error(\"Failed to generate PDF:\", error);\n            toast.error(\"Failed to generate PDF\");\n        } finally {\n            setIsGeneratingPdf(false);\n        }\n    };\n\n    const columns = [\n        {\n            key: \"date\",\n            header: \"Date\",\n            render: (r: MedicalRecord) => <span>{formatDate(r.date || r.createdAt)}</span>\n        },\n        {\n            key: \"patient\",\n            header: \"Patient\",\n            render: (r: MedicalRecord) => <span>{getPatientName(r)}</span>\n        },\n        {\n            key: \"doctor\",\n            header: \"Doctor\",\n            render: (r: MedicalRecord) => <span>{getDoctorName(r)}</span>\n        },\n        { key: \"diagnosis\", header: \"Diagnosis\" },\n        {\n            key: \"treatmentNotes\",\n            header: \"Notes\",\n            render: (r: MedicalRecord) => (\n                <span className=\"truncate max-w-xs block\">{r.treatmentNotes}</span>\n            )\n        },\n        {\n            key: \"actions\",\n            header: \"Actions\",\n            render: (r: MedicalRecord) => (\n                <Button variant=\"ghost\" size=\"icon\" onClick={() => setSelectedRecord(r)}>\n                    <Eye className=\"h-4 w-4\" />\n                </Button>\n            ),\n        },\n    ];\n\n    return (\n        <DashboardLayout role=\"admin\">\n            <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                            <Stethoscope className=\"h-6 w-6\" />\n                            OPD Consultations\n                        </h1>\n                        <p className=\"text-muted-foreground\">History of outpatient consultations</p>\n                    </div>\n                    <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => fetchRecords(true)}\n                        disabled={refreshing}\n                    >\n                        {refreshing ? (\n                            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                            <RefreshCw className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Refresh\n                    </Button>\n                </div>\n\n                <Card>\n                    <CardHeader>\n                        <CardTitle>Consultation Records</CardTitle>\n                        <CardDescription>\n                            Recent patient visits and diagnoses (auto-refreshes every 30 seconds)\n                        </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        {loading ? (\n                            <div className=\"flex items-center justify-center py-8\">\n                                <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                            </div>\n                        ) : (\n                            <DataTable\n                                data={records}\n                                columns={columns}\n                                emptyMessage=\"No consultation records found\"\n                            />\n                        )}\n                    </CardContent>\n                </Card>\n\n                <Dialog open={!!selectedRecord} onOpenChange={(open) => !open && setSelectedRecord(null)}>\n                    <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n                        <DialogHeader className=\"flex flex-row items-start justify-between\">\n                            <div>\n                                <DialogTitle className=\"text-xl\">Consultation Details</DialogTitle>\n                                <DialogDescription>\n                                    Reference ID: #{selectedRecord?.id.slice(0, 8)}\n                                </DialogDescription>\n                            </div>\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={handlePrint}\n                                disabled={isGeneratingPdf}\n                            >\n                                {isGeneratingPdf ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Printer className=\"h-4 w-4 mr-2\" />}\n                                Print\n                            </Button>\n                        </DialogHeader>\n\n                        {selectedRecord && (\n                            <div className=\"space-y-6\">\n                                {/* Header Info */}\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted/50 rounded-lg\">\n                                    <div>\n                                        <div className=\"text-sm text-muted-foreground mb-1\">Date</div>\n                                        <div className=\"font-medium flex items-center gap-2\">\n                                            <Calendar className=\"w-4 h-4\" />\n                                            {formatDate(selectedRecord.date || selectedRecord.createdAt)}\n                                        </div>\n                                    </div>\n                                    <div>\n                                        <div className=\"text-sm text-muted-foreground mb-1\">Patient</div>\n                                        <div className=\"font-medium flex items-center gap-2\">\n                                            <User className=\"w-4 h-4\" />\n                                            {getPatientName(selectedRecord)}\n                                        </div>\n                                    </div>\n                                    <div className=\"col-span-2\">\n                                        <div className=\"text-sm text-muted-foreground mb-1\">Doctor</div>\n                                        <div className=\"font-medium flex items-center gap-2\">\n                                            <Stethoscope className=\"w-4 h-4\" />\n                                            {getDoctorName(selectedRecord)}\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"grid md:grid-cols-2 gap-6\">\n                                    {/* Clinical Info */}\n                                    <div className=\"space-y-4\">\n                                        <div>\n                                            <h3 className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\n                                                <FileText className=\"w-4 h-4 text-blue-500\" />\n                                                Clinical Assessment\n                                            </h3>\n                                            <Card className=\"p-4 space-y-3\">\n                                                <div>\n                                                    <span className=\"text-xs font-semibold uppercase text-muted-foreground\">Chief Complaint</span>\n                                                    <p className=\"text-sm mt-1\">{selectedRecord.chiefComplaint || '-'}</p>\n                                                </div>\n                                                <Separator />\n                                                <div>\n                                                    <span className=\"text-xs font-semibold uppercase text-muted-foreground\">Diagnosis</span>\n                                                    <p className=\"text-sm mt-1 font-medium\">{selectedRecord.diagnosis}</p>\n                                                    {selectedRecord.icdCode && (\n                                                        <Badge variant=\"outline\" className=\"mt-1 text-xs\">{selectedRecord.icdCode}</Badge>\n                                                    )}\n                                                </div>\n                                                <Separator />\n                                                <div>\n                                                    <span className=\"text-xs font-semibold uppercase text-muted-foreground\">Treatment Notes</span>\n                                                    <p className=\"text-sm mt-1 text-muted-foreground leading-relaxed\">\n                                                        {selectedRecord.treatmentNotes || '-'}\n                                                    </p>\n                                                </div>\n                                            </Card>\n                                        </div>\n                                    </div>\n\n                                    {/* Vitals & Prescriptions */}\n                                    <div className=\"space-y-6\">\n                                        {selectedRecord.vitals && (\n                                            <div>\n                                                <h3 className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\n                                                    <Activity className=\"w-4 h-4 text-green-500\" />\n                                                    Vitals\n                                                </h3>\n                                                <div className=\"grid grid-cols-2 gap-3\">\n                                                    {selectedRecord.vitals.bloodPressureSystolic && (\n                                                        <div className=\"p-3 bg-secondary/50 rounded-lg\">\n                                                            <div className=\"text-xs text-muted-foreground\">BP</div>\n                                                            <div className=\"font-semibold\">\n                                                                {selectedRecord.vitals.bloodPressureSystolic}/{selectedRecord.vitals.bloodPressureDiastolic}\n                                                                <span className=\"text-xs font-normal text-muted-foreground\"> mmHg</span>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                    {selectedRecord.vitals.heartRate && (\n                                                        <div className=\"p-3 bg-secondary/50 rounded-lg\">\n                                                            <div className=\"text-xs text-muted-foreground\">Heart Rate</div>\n                                                            <div className=\"font-semibold\">\n                                                                {selectedRecord.vitals.heartRate}\n                                                                <span className=\"text-xs font-normal text-muted-foreground\"> bpm</span>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                    {selectedRecord.vitals.temperature && (\n                                                        <div className=\"p-3 bg-secondary/50 rounded-lg\">\n                                                            <div className=\"text-xs text-muted-foreground\">Temperature</div>\n                                                            <div className=\"font-semibold\">\n                                                                {selectedRecord.vitals.temperature}\n                                                                <span className=\"text-xs font-normal text-muted-foreground\"> Â°F</span>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                    {selectedRecord.vitals.oxygenSaturation && (\n                                                        <div className=\"p-3 bg-secondary/50 rounded-lg\">\n                                                            <div className=\"text-xs text-muted-foreground\">SpO2</div>\n                                                            <div className=\"font-semibold\">\n                                                                {selectedRecord.vitals.oxygenSaturation}\n                                                                <span className=\"text-xs font-normal text-muted-foreground\"> %</span>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {selectedRecord.prescriptions && selectedRecord.prescriptions.length > 0 && (\n                                            <div>\n                                                <h3 className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\n                                                    <Pill className=\"w-4 h-4 text-purple-500\" />\n                                                    Prescriptions\n                                                </h3>\n                                                <div className=\"space-y-2\">\n                                                    {selectedRecord.prescriptions.map((med, idx) => (\n                                                        <div key={idx} className=\"p-3 border rounded-lg text-sm bg-card hover:bg-accent/50 transition-colors\">\n                                                            <div className=\"font-medium text-primary\">{med.medicineName}</div>\n                                                            <div className=\"text-xs text-muted-foreground mt-1 flex gap-2\">\n                                                                <Badge variant=\"secondary\" className=\"text-[10px] h-5\">{med.dosage}</Badge>\n                                                                <Badge variant=\"secondary\" className=\"text-[10px] h-5\">{med.frequency}</Badge>\n                                                                <Badge variant=\"secondary\" className=\"text-[10px] h-5\">{med.duration}</Badge>\n                                                            </div>\n                                                            {med.instructions && (\n                                                                <div className=\"text-xs text-muted-foreground mt-2 italic\">\n                                                                    \"{med.instructions}\"\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </DialogContent>\n                </Dialog>\n            </div>\n        </DashboardLayout>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDPrescriptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDRegistration.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\opd\\OPDReports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\pathology\\PathologyDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\pathology\\PathologyReports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\pathology\\PathologyRequests.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\admin\\pathology\\PathologyResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\Consultation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\DoctorAppointments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\DoctorDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\DoctorLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\DoctorPatients.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPatients'. Either include it or remove the dependency array.","line":73,"column":8,"nodeType":"ArrayExpression","endLine":73,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPatients, filters]","fix":{"range":[2837,2846],"text":"[fetchPatients, filters]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { DataTable } from \"@/components/dashboard/DataTable\";\nimport { patientService } from \"@/services/patientService\";\nimport { Patient } from \"@/types\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Users, Filter as FilterIcon, Search } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ConsultationActions } from \"@/components/doctor/ConsultationActions\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { toast } from \"sonner\";\nimport { PatientFilterPanel } from \"@/components/patients/PatientFilterPanel\";\nimport { FilterChips } from \"@/components/patients/FilterChips\";\nimport { SavedViews } from \"@/components/patients/SavedViews\";\nimport { PatientFilter } from \"@/types/filters\";\nimport {\n    Pagination,\n    PaginationContent,\n    PaginationItem,\n    PaginationLink,\n    PaginationNext,\n    PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\nimport { format } from \"date-fns\";\nimport { DatePicker } from \"@/components/ui/date-picker\";\n\nexport default function DoctorPatients() {\n    const [patients, setPatients] = useState<Patient[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [meta, setMeta] = useState({ page: 1, totalPages: 1, total: 0 });\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\n\n    // Date Filtering State (Default: Today)\n    const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\n\n    // Filter State\n    const [filters, setFilters] = useState<PatientFilter>({\n        page: 1,\n        pageSize: 15,\n        sortBy: 'created_at',\n        sortDir: 'desc',\n        date: format(new Date(), 'yyyy-MM-dd')\n    });\n\n    const fetchPatients = async () => {\n\n        setLoading(true);\n        try {\n            const response = await patientService.getPatients(filters);\n            setPatients(Array.isArray(response) ? response : (response.items || []));\n            // Assuming response structure has meta, if not fallbacks\n            setMeta({\n                page: filters.page || 1,\n                totalPages: response.meta?.totalPages || response.totalPages || 1,\n                total: response.meta?.total || response.total || (response.items?.length || 0)\n            });\n        } catch (error) {\n            console.error(\"Failed to fetch patients\", error);\n            toast.error(\"Failed to load patients\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Debounce search/filter changes\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            fetchPatients();\n        }, 300);\n        return () => clearTimeout(timer);\n    }, [filters]);\n\n    const handleFilterChange = (newFilters: PatientFilter) => {\n        setFilters({ ...newFilters, page: 1 });\n    };\n\n    const handleClearFilters = () => {\n        const today = new Date();\n        setSelectedDate(today);\n        setFilters({\n            page: 1,\n            pageSize: 15,\n            sortBy: 'created_at',\n            sortDir: 'desc',\n            date: format(today, 'yyyy-MM-dd')\n        });\n    };\n\n    const handleRemoveFilter = (key: keyof PatientFilter) => {\n        const newFilters = { ...filters };\n        delete newFilters[key];\n        setFilters({ ...newFilters, page: 1 });\n    };\n\n    const handlePageChange = (page: number) => {\n        if (page < 1 || page > meta.totalPages) return;\n        setFilters(prev => ({ ...prev, page }));\n    };\n\n    const handleDateChange = (date: Date | undefined) => {\n        setSelectedDate(date);\n        setFilters(prev => ({\n            ...prev,\n            date: date ? format(date, 'yyyy-MM-dd') : undefined,\n            page: 1\n        }));\n    };\n\n\n    const columns = [\n        { key: \"full_name\", header: \"Name\" },\n        { key: \"gender\", header: \"Gender\", render: (p: any) => <span className=\"capitalize\">{p.gender}</span> },\n        { key: \"age\", header: \"Age\", render: (p: any) => p.age || 'N/A' },\n        { key: \"blood_group\", header: \"Blood Group\" },\n        { key: \"phone\", header: \"Contact\" },\n        {\n            key: \"status\", header: \"Status\", render: (p: any) => (\n                <Badge variant={p.status === 'active' ? 'default' : 'secondary'}>\n                    {p.status}\n                </Badge>\n            )\n        },\n        {\n            key: \"actions\",\n            header: \"Actions\",\n            render: (p: any) => (\n                <ConsultationActions patient={p} />\n            )\n        }\n    ];\n\n    return (\n        <DashboardLayout role=\"doctor\">\n            <div className=\"space-y-6\">\n                <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                            <Users className=\"h-6 w-6\" />\n                            My Patients\n                        </h1>\n                        <p className=\"text-muted-foreground\">Patients under your care</p>\n                    </div>\n                </div>\n\n                <Card>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center\">\n                            <div>\n                                <CardTitle>Patient List</CardTitle>\n                                <CardDescription>Total {meta.total} registered patients assigned to you</CardDescription>\n                            </div>\n\n                            <div className=\"flex items-center gap-2 w-full md:w-auto\">\n                                <DatePicker\n                                    date={selectedDate}\n                                    setDate={handleDateChange}\n                                    placeholder=\"Filter by Date\"\n                                />\n                                <div className=\"relative flex-1 md:w-64\">\n                                    <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                                    <Input\n                                        placeholder=\"Search patients...\"\n                                        className=\"pl-8\"\n                                        value={filters.search || ''}\n                                        onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value, page: 1 }))}\n                                    />\n                                </div>\n                                <Button variant=\"outline\" size=\"icon\" onClick={() => setIsFilterOpen(true)}>\n                                    <FilterIcon className=\"h-4 w-4\" />\n                                </Button>\n                                <SavedViews currentFilters={filters} onApply={handleFilterChange} />\n                            </div>\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        <FilterChips\n                            filters={filters}\n                            onRemove={handleRemoveFilter}\n                            onClearAll={handleClearFilters}\n                        />\n\n                        {loading ? (\n                            <div className=\"flex justify-center p-4\">Loading...</div>\n                        ) : (\n                            <DataTable\n                                data={patients}\n                                columns={columns}\n                                emptyMessage=\"No patients found matching your filters\"\n                            />\n                        )}\n\n                        {/* Pagination */}\n                        {meta.totalPages > 1 && (\n                            <div className=\"mt-4 flex justify-end\">\n                                <Pagination>\n                                    <PaginationContent>\n                                        <PaginationItem>\n                                            <PaginationPrevious\n                                                onClick={() => handlePageChange((filters.page || 1) - 1)}\n                                                className={filters.page === 1 ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n\n                                        <div className=\"flex items-center px-4 text-sm font-medium\">\n                                            Page {filters.page} of {meta.totalPages}\n                                        </div>\n\n                                        <PaginationItem>\n                                            <PaginationNext\n                                                onClick={() => handlePageChange((filters.page || 1) + 1)}\n                                                className={filters.page === meta.totalPages ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n                                    </PaginationContent>\n                                </Pagination>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                <PatientFilterPanel\n                    isOpen={isFilterOpen}\n                    onOpenChange={setIsFilterOpen}\n                    filters={filters}\n                    onApply={handleFilterChange}\n                    onClear={handleClearFilters}\n                />\n            </div>\n        </DashboardLayout>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\DoctorSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\LabResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\MedicalRecords.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\doctor\\Prescriptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabPendingTests.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabResultsEntry.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabSampleCollection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\lab\\LabTestCatalog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\opd\\OpdDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientBilling.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'toast'. Either include it or remove the dependency array.","line":45,"column":8,"nodeType":"ArrayExpression","endLine":45,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [toast]","fix":{"range":[1725,1727],"text":"[toast]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Receipt, Calendar, CreditCard, Download } from \"lucide-react\";\nimport { formatCurrency } from \"@/utils/format\";\nimport { useEffect, useState } from \"react\";\nimport { patientService } from \"@/services/patientService\";\nimport {\n    addWatermark,\n    addHeaderLogo,\n    generatePdfFilename,\n    maskData,\n    getTransparentTableStyles,\n    getBase64ImageFromUrl\n} from \"@/utils/pdfUtils\";\n\nconst PatientBilling = () => {\n    const [myBills, setMyBills] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const { toast } = useToast();\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const profile = await patientService.getMyProfile();\n                const data = await patientService.getPatientBills(profile.uhid); // Changed to uhid\n                setMyBills(data || []);\n            } catch (error) {\n                console.error(\"Failed to fetch bills:\", error);\n                toast({\n                    title: \"Error\",\n                    description: \"Failed to load billing history\",\n                    variant: \"destructive\"\n                });\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchData();\n    }, []);\n\n    if (loading) {\n        return <div className=\"p-8 text-center\">Loading billing history...</div>;\n    }\n\n    const handleDownloadInvoice = async (bill: any) => {\n        const doc = new jsPDF();\n        const pageWidth = doc.internal.pageSize.getWidth();\n        const pageHeight = doc.internal.pageSize.getHeight();\n\n        // 1. Generate filename & Check Masking Status\n        const patientName = bill.patient\n            ? `${bill.patient.firstName} ${bill.patient.lastName}`\n            : (bill.patient_name || 'Patient');\n\n        const billId = bill.id || bill.bill_id || bill.billNumber || 'unknown_id';\n        const billNum = bill.billNumber || bill.bill_id || 'N/A';\n\n        const { filename, isMasked } = generatePdfFilename(patientName, billNum, billId);\n\n        // 2. Add Background Template\n        try {\n            if (!isMasked) {\n                const headerUrl = '/header_template.jpg';\n                const headerBase64 = await getBase64ImageFromUrl(headerUrl);\n                doc.addImage(headerBase64, 'JPEG', 0, 0, 210, 297);\n            }\n        } catch (error) {\n            console.error(\"Failed to load background template\", error);\n            // Fallback to watermark if template fails\n            await addWatermark(doc);\n        }\n\n        // 3. Title (Positioned below the header template area)\n        const startY = 60;\n        doc.setFontSize(16);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setTextColor(0, 0, 0);\n        doc.text(isMasked ? \"INVOICE (Masked Copy)\" : \"INVOICE\", 14, startY);\n\n        // 4. Invoice Details\n        const displayPatientName = isMasked ? maskData(patientName, 'name') : patientName;\n\n        doc.setFontSize(10);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(`Invoice #: ${billNum}`, 14, startY + 8);\n        doc.text(`Date: ${new Date(bill.createdAt || bill.created_at || Date.now()).toLocaleDateString()}`, 14, startY + 13);\n        doc.text(`Patient: ${displayPatientName}`, 14, startY + 18);\n        doc.text(`Status: ${bill.status || 'N/A'}`, 14, startY + 23);\n\n        let currentY = startY + 28;\n        if (bill.medicalRecord?.diagnosis) {\n            doc.text(`Diagnosis: ${bill.medicalRecord.diagnosis}`, 14, currentY);\n            currentY += 5;\n        }\n\n        // 5. Items Table\n        const items = bill.items || [];\n        const tableData = items.map((item: any, index: number) => [\n            index + 1,\n            item.description,\n            (item.category || 'General').charAt(0).toUpperCase() + (item.category || 'General').slice(1),\n            item.quantity || 1,\n            `Rs. ${Number(item.unitPrice || 0).toFixed(2)}`,\n            `Rs. ${Number(item.total || 0).toFixed(2)}`\n        ]);\n\n        autoTable(doc, {\n            ...getTransparentTableStyles(),\n            startY: currentY + 5,\n            head: [['#', 'Description', 'Category', 'Qty', 'Unit Price', 'Total']],\n            body: tableData,\n            columnStyles: {\n                0: { cellWidth: 10 },\n                1: { cellWidth: 80 },\n                4: { cellWidth: 30, halign: 'right' },\n                5: { cellWidth: 30, halign: 'right' }\n            }\n        });\n\n        const finalY = (doc as any).lastAutoTable.finalY + 10;\n        const labelX = pageWidth - 80;\n        const valueX = pageWidth - 20;\n\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(\"Subtotal:\", labelX, finalY, { align: \"right\" });\n        doc.text(`Rs. ${Number(bill.subtotal || 0).toFixed(2)}`, valueX, finalY, { align: \"right\" });\n\n        if (Number(bill.discount) > 0) {\n            doc.text(\"Discount:\", labelX, finalY + 7, { align: \"right\" });\n            doc.text(`- Rs. ${Number(bill.discount).toFixed(2)}`, valueX, finalY + 7, { align: \"right\" });\n            // Adjust finalY logic for dynamic rows... simplified here for fixed structure\n        }\n\n        // Simplified Total section matching UnifiedBilling roughly\n        const totalAmount = Number(bill.grandTotal || bill.total || 0);\n\n        doc.setFont(\"helvetica\", \"bold\");\n        // Check if discount existed to push y down\n        const totalY = Number(bill.discount) > 0 ? finalY + 14 : finalY + 7;\n\n        doc.text(\"Total Amount:\", labelX, totalY, { align: \"right\" });\n        doc.text(`Rs. ${totalAmount.toFixed(2)}`, valueX, totalY, { align: \"right\" });\n\n        // Payment Info\n        if (bill.status === 'PAID') {\n            doc.setFont(\"helvetica\", \"normal\");\n            doc.setFontSize(9);\n            const paymentInfo = `Paid via ${bill.payment_method || 'Unknown'} on ${new Date(bill.updatedAt || new Date()).toLocaleDateString()}`;\n            doc.text(paymentInfo, pageWidth - 14, totalY + 10, { align: \"right\" });\n        }\n\n        // Footer is handled by the background template\n        doc.save(filename);\n\n        toast({\n            title: isMasked ? \"Masked Invoice Downloaded\" : \"Download Complete\",\n            description: \"Invoice downloaded successfully.\",\n        });\n    };\n\n    const getStatusColor = (status: string) => {\n        // Handle undefined status safely\n        switch (status?.toLowerCase()) {\n            case 'paid': return 'bg-green-100 text-green-800';\n            case 'pending': return 'bg-yellow-100 text-yellow-800';\n            case 'overdue': return 'bg-red-100 text-red-800';\n            default: return 'bg-gray-100 text-gray-800';\n        }\n    };\n\n    return (\n        <DashboardLayout role=\"patient\">\n            <div className=\"space-y-6\">\n                <h1 className=\"text-3xl font-bold tracking-tight\">Billing & Payments</h1>\n\n                <div className=\"grid gap-6\">\n                    {myBills.map((bill) => (\n                        <Card key={bill.id} className=\"overflow-hidden shadow-sm\">\n                            <CardHeader className=\"bg-muted/50 pb-4\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"space-y-1\">\n                                        <CardTitle className=\"text-lg flex items-center gap-2\">\n                                            <Receipt className=\"h-5 w-5 text-blue-600\" />\n                                            Invoice #{bill.billNumber || bill.bill_id}\n                                        </CardTitle>\n                                        <div className=\"text-sm text-muted-foreground flex items-center gap-4\">\n                                            <span className=\"flex items-center gap-1\">\n                                                <Calendar className=\"h-4 w-4\" />\n                                                {new Date(bill.createdAt || bill.created_at).toLocaleDateString()}\n                                            </span>\n                                            {/* bill type is not standard, remove or fix logic */}\n                                            {/* <Badge variant=\"secondary\" className=\"uppercase text-xs\">{bill.type || 'General'}</Badge> */}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center gap-3\">\n                                        <Badge className={getStatusColor(bill.status)}>\n                                            {(bill.status || 'Unknown').toUpperCase()}\n                                        </Badge>\n                                        <Button\n                                            variant=\"outline\"\n                                            size=\"sm\"\n                                            className=\"h-8 gap-2\"\n                                            onClick={() => handleDownloadInvoice(bill)}\n                                        >\n                                            <Download className=\"h-4 w-4\" />\n                                            Download\n                                        </Button>\n                                    </div>\n                                </div>\n                            </CardHeader>\n                            <CardContent className=\"p-0\">\n                                <Table>\n                                    <TableHeader>\n                                        <TableRow>\n                                            <TableHead className=\"w-[50%]\">Description</TableHead>\n                                            <TableHead>Category</TableHead>\n                                            <TableHead className=\"text-right\">Amount</TableHead>\n                                        </TableRow>\n                                    </TableHeader>\n                                    <TableBody>\n                                        {(bill.items || []).map((item: any) => (\n                                            <TableRow key={item.id}>\n                                                <TableCell className=\"font-medium\">{item.description}</TableCell>\n                                                <TableCell className=\"capitalize text-muted-foreground\">{item.category || 'General'}</TableCell>\n                                                <TableCell className=\"text-right\">{formatCurrency(item.total)}</TableCell>\n                                            </TableRow>\n                                        ))}\n                                        <TableRow className=\"bg-muted/20 hover:bg-muted/20\">\n                                            <TableCell colSpan={2} className=\"text-right font-medium\">Subtotal</TableCell>\n                                            <TableCell className=\"text-right font-medium\">{formatCurrency(bill.subtotal)}</TableCell>\n                                        </TableRow>\n                                        {Number(bill.discount) > 0 && (\n                                            <TableRow className=\"bg-muted/20 hover:bg-muted/20\">\n                                                <TableCell colSpan={2} className=\"text-right font-medium text-green-600\">Discount</TableCell>\n                                                <TableCell className=\"text-right font-medium text-green-600\">-{formatCurrency(bill.discount)}</TableCell>\n                                            </TableRow>\n                                        )}\n                                        <TableRow className=\"bg-muted/50 hover:bg-muted/50\">\n                                            <TableCell colSpan={2} className=\"text-right font-bold text-lg\">Total</TableCell>\n                                            {/* Fix NaN issue by using grandTotal */}\n                                            <TableCell className=\"text-right font-bold text-lg\">{formatCurrency(bill.grandTotal || bill.total)}</TableCell>\n                                        </TableRow>\n                                    </TableBody>\n                                </Table>\n                                {bill.status === 'PAID' && (\n                                    <div className=\"bg-green-50/50 p-3 text-xs text-green-700 flex items-center justify-end gap-2 px-6 border-t\">\n                                        <CreditCard className=\"h-3 w-3\" />\n                                        Paid via {bill.payment_method || 'Unknown'} on {new Date(bill.updatedAt || new Date()).toLocaleDateString()}\n                                    </div>\n                                )}\n                            </CardContent>\n                        </Card>\n                    ))}\n\n                    {myBills.length === 0 && (\n                        <div className=\"text-center py-12 text-muted-foreground bg-muted/20 rounded-lg border border-dashed\">\n                            <p>No billing records found.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </DashboardLayout>\n    );\n};\n\nexport default PatientBilling;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientLabResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientMedicalRecords.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientPrescriptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientReports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\patient\\PatientSettings.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'toast'. Either include it or remove the dependency array.","line":51,"column":8,"nodeType":"ArrayExpression","endLine":51,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [toast]","fix":{"range":[2059,2061],"text":"[toast]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { useState, useEffect } from 'react';\nimport { DashboardLayout } from '@/components/layout/DashboardLayout';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Separator } from '@/components/ui/separator';\nimport { useToast } from '@/components/ui/use-toast';\nimport { User, Lock, Mail, Phone, Calendar, MapPin, AlertCircle, CheckCircle2, Eye, EyeOff } from 'lucide-react';\nimport { patientService } from '@/services/patientService';\nimport { api } from '@/services/api';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\nconst PatientSettings = () => {\n    const { toast } = useToast();\n    const [loading, setLoading] = useState(true);\n    const [profile, setProfile] = useState<any>(null);\n\n    // Password change state\n    const [passwordForm, setPasswordForm] = useState({\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n    });\n    const [passwordLoading, setPasswordLoading] = useState(false);\n    const [passwordSuccess, setPasswordSuccess] = useState(false);\n\n    // Password visibility toggles\n    const [showCurrentPassword, setShowCurrentPassword] = useState(false);\n    const [showNewPassword, setShowNewPassword] = useState(false);\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n    useEffect(() => {\n        const fetchProfile = async () => {\n            try {\n                const data = await patientService.getMyProfile();\n                setProfile(data);\n            } catch (error) {\n                console.error('Failed to fetch profile', error);\n                toast({\n                    variant: 'destructive',\n                    title: 'Error',\n                    description: 'Failed to load profile data'\n                });\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchProfile();\n    }, []);\n\n    const handlePasswordChange = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setPasswordSuccess(false);\n\n        // Validation\n        if (passwordForm.newPassword.length < 8) {\n            toast({\n                variant: 'destructive',\n                title: 'Validation Error',\n                description: 'New password must be at least 8 characters long'\n            });\n            return;\n        }\n\n        if (passwordForm.newPassword !== passwordForm.confirmPassword) {\n            toast({\n                variant: 'destructive',\n                title: 'Validation Error',\n                description: 'New passwords do not match'\n            });\n            return;\n        }\n\n        setPasswordLoading(true);\n        try {\n            await api.changePassword({\n                currentPassword: passwordForm.currentPassword,\n                newPassword: passwordForm.newPassword\n            });\n\n            setPasswordSuccess(true);\n            setPasswordForm({\n                currentPassword: '',\n                newPassword: '',\n                confirmPassword: ''\n            });\n\n            toast({\n                title: 'Password Changed',\n                description: 'Your password has been successfully updated.'\n            });\n        } catch (error: any) {\n            // Extract detailed error message from API response\n            let errorMessage = 'Failed to change password.';\n            if (error.message) {\n                errorMessage = error.message;\n            }\n            // Check for validation details\n            if (error.response?.data?.details?.length > 0) {\n                errorMessage = error.response.data.details.map((d: any) => d.message).join('. ');\n            } else if (error.response?.data?.message) {\n                errorMessage = error.response.data.message;\n            }\n\n            toast({\n                variant: 'destructive',\n                title: 'Password Change Failed',\n                description: errorMessage\n            });\n        } finally {\n            setPasswordLoading(false);\n        }\n    };\n\n    if (loading) {\n        return (\n            <DashboardLayout role=\"patient\">\n                <div className=\"flex items-center justify-center h-64\">\n                    <p className=\"text-muted-foreground\">Loading profile...</p>\n                </div>\n            </DashboardLayout>\n        );\n    }\n\n    return (\n        <DashboardLayout role=\"patient\">\n            <div className=\"space-y-6 animate-fade-in max-w-4xl mx-auto\">\n                <div>\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Profile Settings</h1>\n                    <p className=\"text-muted-foreground mt-2\">Manage your account settings and password</p>\n                </div>\n\n                {/* Profile Information */}\n                <Card>\n                    <CardHeader>\n                        <CardTitle className=\"flex items-center gap-2\">\n                            <User className=\"h-5 w-5\" />\n                            Profile Information\n                        </CardTitle>\n                        <CardDescription>Your personal details and contact information</CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"space-y-6\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Full Name</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <User className=\"h-4 w-4 text-muted-foreground\" />\n                                    <span className=\"font-medium\">{profile?.full_name || 'N/A'}</span>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">UHID</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <span className=\"font-mono font-bold text-primary\">{profile?.uhid || 'N/A'}</span>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Email</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                                    <span>{profile?.email || 'N/A'}</span>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Phone</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                                    <span>{profile?.phone || 'N/A'}</span>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Date of Birth</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                                    <span>{profile?.date_of_birth ? new Date(profile.date_of_birth).toLocaleDateString() : 'N/A'}</span>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Gender</Label>\n                                <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <span className=\"capitalize\">{profile?.gender?.toLowerCase() || 'N/A'}</span>\n                                </div>\n                            </div>\n                        </div>\n                        {profile?.address && (\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-muted-foreground text-sm\">Address</Label>\n                                <div className=\"flex items-start gap-2 p-3 bg-muted/50 rounded-lg\">\n                                    <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                                    <span>{profile.address}</span>\n                                </div>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                {/* Change Password */}\n                <Card>\n                    <CardHeader>\n                        <CardTitle className=\"flex items-center gap-2\">\n                            <Lock className=\"h-5 w-5\" />\n                            Change Password\n                        </CardTitle>\n                        <CardDescription>Update your password to secure your account</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        {passwordSuccess && (\n                            <Alert className=\"mb-6 border-green-200 bg-green-50 dark:bg-green-900/20\">\n                                <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                                <AlertDescription className=\"text-green-800 dark:text-green-200\">\n                                    Your password has been changed successfully!\n                                </AlertDescription>\n                            </Alert>\n                        )}\n\n                        <form onSubmit={handlePasswordChange} className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"currentPassword\">Current Password</Label>\n                                <div className=\"relative\">\n                                    <Input\n                                        id=\"currentPassword\"\n                                        type={showCurrentPassword ? 'text' : 'password'}\n                                        placeholder=\"Enter your current password\"\n                                        value={passwordForm.currentPassword}\n                                        onChange={(e) => setPasswordForm(prev => ({ ...prev, currentPassword: e.target.value }))}\n                                        required\n                                        className=\"pr-10\"\n                                    />\n                                    <Button\n                                        type=\"button\"\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                        onClick={() => setShowCurrentPassword(!showCurrentPassword)}\n                                    >\n                                        {showCurrentPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                    </Button>\n                                </div>\n                                <p className=\"text-xs text-muted-foreground\">\n                                    If this is your first login, your current password is your phone number.\n                                </p>\n                            </div>\n\n                            <Separator />\n\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"newPassword\">New Password</Label>\n                                <div className=\"relative\">\n                                    <Input\n                                        id=\"newPassword\"\n                                        type={showNewPassword ? 'text' : 'password'}\n                                        placeholder=\"Enter new password\"\n                                        value={passwordForm.newPassword}\n                                        onChange={(e) => setPasswordForm(prev => ({ ...prev, newPassword: e.target.value }))}\n                                        required\n                                        minLength={8}\n                                        className=\"pr-10\"\n                                    />\n                                    <Button\n                                        type=\"button\"\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                        onClick={() => setShowNewPassword(!showNewPassword)}\n                                    >\n                                        {showNewPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                    </Button>\n                                </div>\n                                <p className=\"text-xs text-muted-foreground\">\n                                    Password must be at least 8 characters with uppercase, lowercase, and a number.\n                                </p>\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\n                                <div className=\"relative\">\n                                    <Input\n                                        id=\"confirmPassword\"\n                                        type={showConfirmPassword ? 'text' : 'password'}\n                                        placeholder=\"Confirm your new password\"\n                                        value={passwordForm.confirmPassword}\n                                        onChange={(e) => setPasswordForm(prev => ({ ...prev, confirmPassword: e.target.value }))}\n                                        required\n                                        className=\"pr-10\"\n                                    />\n                                    <Button\n                                        type=\"button\"\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                                        onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                                    >\n                                        {showConfirmPassword ? <EyeOff className=\"h-4 w-4 text-muted-foreground\" /> : <Eye className=\"h-4 w-4 text-muted-foreground\" />}\n                                    </Button>\n                                </div>\n                            </div>\n\n                            <Alert className=\"bg-amber-50 dark:bg-amber-900/20 border-amber-200\">\n                                <AlertCircle className=\"h-4 w-4 text-amber-600\" />\n                                <AlertDescription className=\"text-amber-800 dark:text-amber-200\">\n                                    After changing your password, you will need to use the new password to log in.\n                                </AlertDescription>\n                            </Alert>\n\n                            <Button type=\"submit\" disabled={passwordLoading} className=\"w-full sm:w-auto\">\n                                {passwordLoading ? 'Changing Password...' : 'Change Password'}\n                            </Button>\n                        </form>\n                    </CardContent>\n                </Card>\n            </div>\n        </DashboardLayout>\n    );\n};\n\nexport default PatientSettings;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyAlerts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyDispensing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyInventory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacyPendingOrders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\pharmacy\\PharmacySettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionAppointments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionLabResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionPatients.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'selectedDate'. Either include it or remove the dependency array.","line":68,"column":8,"nodeType":"ArrayExpression","endLine":68,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [page, searchQuery, selectedDate]","fix":{"range":[2641,2660],"text":"[page, searchQuery, selectedDate]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { DashboardLayout } from '@/components/layout/DashboardLayout';\nimport { DataTable } from '@/components/dashboard/DataTable';\nimport { StatusBadge } from '@/components/dashboard/StatusBadge';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Users, UserPlus, Search, Download, Edit } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { PatientRegistrationDialog } from '@/components/patients/PatientRegistrationDialog';\nimport { PatientDetailsDialog } from '@/components/patients/PatientDetailsDialog';\nimport { printPatientCard } from '@/utils/printPatientCard';\nimport { patientService } from '@/services/patientService';\nimport { Patient } from '@/types';\nimport {\n    Pagination,\n    PaginationContent,\n    PaginationItem,\n    PaginationLink,\n    PaginationNext,\n    PaginationPrevious,\n} from '@/components/ui/pagination';\n\nimport { format } from 'date-fns';\nimport { DatePicker } from '@/components/ui/date-picker';\n\nexport default function ReceptionPatients() {\n    const [patients, setPatients] = useState<Patient[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [page, setPage] = useState(1);\n    const [meta, setMeta] = useState({ page: 1, totalPages: 1, total: 0 });\n\n    // Date Filtering State (Default: Today)\n    const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\n\n    const PAGE_SIZE = 15;\n\n\n    const fetchPatients = useCallback(async () => {\n        setLoading(true);\n        try {\n            const query: Record<string, string | number> = {\n                page,\n                pageSize: PAGE_SIZE,\n                sortBy: 'created_at',\n                sortDir: 'desc',\n            };\n            if (selectedDate) {\n                query.date = format(selectedDate, 'yyyy-MM-dd');\n            }\n            if (searchQuery.trim()) {\n                query.search = searchQuery.trim();\n            }\n\n\n            const response = await patientService.getPatients(query);\n            setPatients(response.items || []);\n            setMeta({\n                page: page,\n                totalPages: response.meta?.totalPages || response.totalPages || 1,\n                total: response.meta?.total || response.total || (response.items?.length || 0),\n            });\n        } catch (error) {\n            console.error('Failed to fetch patients', error);\n        } finally {\n            setLoading(false);\n        }\n    }, [page, searchQuery]);\n\n    // Debounce search, immediately fetch on page change\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            fetchPatients();\n        }, 300);\n        return () => clearTimeout(timer);\n    }, [fetchPatients]);\n\n    const handlePageChange = (newPage: number) => {\n        if (newPage < 1 || newPage > meta.totalPages) return;\n        setPage(newPage);\n    };\n\n    const handleSearchChange = (value: string) => {\n        setSearchQuery(value);\n        setPage(1); // Reset to page 1 on new search\n    };\n\n    // Generate page numbers for pagination\n    const getPageNumbers = (): number[] => {\n        const pages: number[] = [];\n        const total = meta.totalPages;\n        const current = page;\n\n        if (total <= 5) {\n            for (let i = 1; i <= total; i++) pages.push(i);\n        } else {\n            // Always show first, last, current, and neighbors\n            const start = Math.max(2, current - 1);\n            const end = Math.min(total - 1, current + 1);\n\n            pages.push(1);\n            if (start > 2) pages.push(-1); // ellipsis marker\n            for (let i = start; i <= end; i++) pages.push(i);\n            if (end < total - 1) pages.push(-1); // ellipsis marker\n            pages.push(total);\n        }\n        return pages;\n    };\n\n    const columns = [\n        { key: 'uhid', header: 'Patient ID' },\n        { key: 'full_name', header: 'Name' },\n        { key: 'phone', header: 'Phone' },\n        { key: 'email', header: 'Email' },\n        {\n            key: 'status',\n            header: 'Status',\n            render: (patient: any) => (\n                <StatusBadge status={patient.status} />\n            )\n        },\n        {\n            key: 'actions',\n            header: 'Actions',\n            render: (patient: any) => (\n                <div className=\"flex items-center gap-2\">\n                    <PatientDetailsDialog patientId={patient.uhid} showMedicalRecords={false}>\n                        <Button variant=\"ghost\" size=\"sm\">View Details</Button>\n                    </PatientDetailsDialog>\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => printPatientCard(patient, [], false)}>\n                        <Download className=\"h-4 w-4\" />\n                    </Button>\n                    <PatientRegistrationDialog patientToEdit={patient} onRegister={() => fetchPatients()}>\n                        <Button variant=\"ghost\" size=\"sm\">\n                            <Edit className=\"h-4 w-4\" />\n                        </Button>\n                    </PatientRegistrationDialog>\n                </div>\n            )\n        }\n    ];\n\n    const handleDateChange = (date: Date | undefined) => {\n        setSelectedDate(date);\n        setPage(1);\n    };\n\n    return (\n        <DashboardLayout role=\"receptionist\">\n            <div className=\"space-y-6\">\n                <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n                            <Users className=\"h-6 w-6\" />\n                            Patient Registration\n                        </h1>\n                        <p className=\"text-muted-foreground\">Manage patient records and registrations</p>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                        <DatePicker\n                            date={selectedDate}\n                            setDate={handleDateChange}\n                            placeholder=\"Filter by Date\"\n                        />\n                        <PatientRegistrationDialog onRegister={() => fetchPatients()}>\n                            <Button>\n                                <UserPlus className=\"h-4 w-4 mr-2\" />\n                                Register New Patient\n                            </Button>\n                        </PatientRegistrationDialog>\n                    </div>\n                </div>\n\n\n                <Card>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center\">\n                            <div>\n                                <CardTitle>All Patients</CardTitle>\n                                <CardDescription>\n                                    {loading ? 'Loading...' : `Total ${meta.total} registered patients`}\n                                </CardDescription>\n                            </div>\n                            <div className=\"relative w-full md:w-64\">\n                                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                                <Input\n                                    placeholder=\"Search patients...\"\n                                    className=\"pl-8\"\n                                    value={searchQuery}\n                                    onChange={(e) => handleSearchChange(e.target.value)}\n                                />\n                            </div>\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        <DataTable\n                            data={patients}\n                            columns={columns}\n                            emptyMessage={loading ? 'Loading...' : 'No patients found'}\n                        />\n\n                        {/* Pagination Controls */}\n                        {meta.totalPages > 1 && (\n                            <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-between gap-3\">\n                                <div className=\"text-sm text-muted-foreground\">\n                                    Showing page {page} of {meta.totalPages} ({meta.total} total patients)\n                                </div>\n                                <Pagination>\n                                    <PaginationContent>\n                                        <PaginationItem>\n                                            <PaginationPrevious\n                                                onClick={() => handlePageChange(page - 1)}\n                                                className={page === 1 ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n\n                                        {getPageNumbers().map((pageNum, idx) => (\n                                            <PaginationItem key={idx}>\n                                                {pageNum === -1 ? (\n                                                    <span className=\"flex h-9 w-9 items-center justify-center text-muted-foreground\">â€¦</span>\n                                                ) : (\n                                                    <PaginationLink\n                                                        onClick={() => handlePageChange(pageNum)}\n                                                        isActive={pageNum === page}\n                                                        className=\"cursor-pointer\"\n                                                    >\n                                                        {pageNum}\n                                                    </PaginationLink>\n                                                )}\n                                            </PaginationItem>\n                                        ))}\n\n                                        <PaginationItem>\n                                            <PaginationNext\n                                                onClick={() => handlePageChange(page + 1)}\n                                                className={page === meta.totalPages ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n                                            />\n                                        </PaginationItem>\n                                    </PaginationContent>\n                                </Pagination>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n            </div>\n        </DashboardLayout>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionQueue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\pages\\reception\\ReceptionSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\scripts\\seed_specific_doctors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\appointmentService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\billingService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\labService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\medicalRecordService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\notificationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\patientService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\pharmacyService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\services\\staffService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\test\\example.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\types\\filters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\types\\label.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\cache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\consultationUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\downloadLabReport.ts","messages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":106,"column":33,"nodeType":"BlockStatement","messageId":"unexpected","endLine":106,"endColumn":36,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4272,4273],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport { toast } from \"sonner\";\nimport { LabOrder } from '@/types';\nimport {\n    getBase64ImageFromUrl,\n    generatePdfFilename,\n    maskData,\n    getTransparentTableStyles\n} from \"@/utils/pdfUtils\";\n\n/**\n * Download Lab Report PDF using the standardized background template\n */\nexport const downloadLabReportPDF = async (order: LabOrder, forceMasked: boolean = false) => {\n    try {\n        const doc = new jsPDF();\n        const pageWidth = doc.internal.pageSize.getWidth();\n        const pageHeight = doc.internal.pageSize.getHeight();\n\n        // Handle patient name safely\n        let patientName = (order as any).patient_name || 'Patient';\n        if (!patientName || patientName === 'Patient') {\n            if (order.patient) {\n                patientName = `${order.patient.firstName || ''} ${order.patient.lastName || ''}`.trim() || 'Patient';\n            }\n        }\n\n        const orderId = order.id || (order as any).order_id || 'LAB-N/A';\n        const { filename, isMasked: generatedIsMasked } = generatePdfFilename(patientName, orderId, order.id || '', false);\n        const isMasked = forceMasked || generatedIsMasked;\n        const finalFilename = isMasked ? filename.replace('.pdf', '_Masked.pdf') : `Lab_Report_${filename}`;\n\n        // 1. Add Background Template\n        try {\n            if (!isMasked) {\n                const headerUrl = '/header_template.jpg';\n                const headerBase64 = await getBase64ImageFromUrl(headerUrl);\n                doc.addImage(headerBase64, 'JPEG', 0, 0, 210, 297);\n            }\n        } catch (error) {\n            console.error(\"Failed to load background template\", error);\n        }\n\n        // 2. Report Header Info\n        const startY = 60;\n        doc.setFontSize(10);\n        doc.setTextColor(0, 0, 0);\n\n        if (isMasked) {\n            doc.saveGraphicsState();\n            doc.setTextColor(220, 220, 220);\n            doc.setFontSize(60);\n            doc.text(\"MASKED COPY\", pageWidth / 2, pageHeight / 2, { align: 'center', angle: -30 });\n            doc.restoreGraphicsState();\n\n            doc.setFontSize(14);\n            doc.setFont('helvetica', 'bold');\n            doc.setTextColor(0, 0, 0);\n            doc.text(\"LAB REPORT (MASKED)\", pageWidth / 2, 20, { align: 'center' });\n        }\n\n        // Patient Details Section\n        doc.setFont('helvetica', 'bold');\n        doc.text(\"Patient Name:\", 14, startY);\n        doc.setFont('helvetica', 'normal');\n        doc.text(isMasked ? maskData(patientName, 'name') : patientName, 45, startY);\n\n        doc.setFont('helvetica', 'bold');\n        doc.text(\"Patient ID:\", 14, startY + 5);\n        doc.setFont('helvetica', 'normal');\n        doc.text((order as any).patient_id || (order as any).patientId || (order.patient as any)?.uhid || 'N/A', 45, startY + 5);\n\n        // Order Details Section\n        const rightColX = 120;\n        doc.setFont('helvetica', 'bold');\n        doc.text(\"Order ID:\", rightColX, startY);\n        doc.setFont('helvetica', 'normal');\n        doc.text(String(orderId), rightColX + 30, startY);\n\n        doc.setFont('helvetica', 'bold');\n        doc.text(\"Status:\", rightColX, startY + 5);\n        doc.setFont('helvetica', 'normal');\n        doc.text((order.status || 'Ordered').toUpperCase(), rightColX + 30, startY + 5);\n\n        // 3. Test Results\n        let currentY = startY + 25;\n        const tests = (order as any).tests || [];\n\n        if (tests.length > 0) {\n            tests.forEach((test: any, index: number) => {\n                doc.setFontSize(12);\n                doc.setFont('helvetica', 'bold');\n                doc.text(`Test ${index + 1}: ${test.test_name || 'Details'}`, 14, currentY);\n                currentY += 8;\n\n                // Results Table\n                let params: any[] = [];\n                if (test.result && test.result.result && test.result.result.parameters) {\n                    params = test.result.result.parameters;\n                } else if (typeof test.result === 'string' && test.result.startsWith('{')) {\n                    try {\n                        const parsed = JSON.parse(test.result);\n                        params = parsed.result?.parameters || [];\n                    } catch (e) { }\n                }\n\n                if (params.length > 0) {\n                    const tableData = params.map((p: any) => [\n                        p.name || '-',\n                        `${p.value || ''} ${p.unit || ''}`,\n                        p.normalRange || '-'\n                    ]);\n\n                    autoTable(doc, {\n                        ...getTransparentTableStyles(),\n                        startY: currentY,\n                        head: [['Parameter', 'Result', 'Normal Range']],\n                        body: tableData,\n                        columnStyles: {\n                            0: { cellWidth: 80 },\n                            1: { cellWidth: 50, fontStyle: 'bold' },\n                            2: { cellWidth: 50 }\n                        }\n                    });\n                    currentY = (doc as any).lastAutoTable.finalY + 15;\n                } else if (test.result) {\n                    doc.setFontSize(10);\n                    doc.setFont('helvetica', 'normal');\n                    const resStr = typeof test.result === 'string' ? test.result : JSON.stringify(test.result);\n                    const splitRes = doc.splitTextToSize(`Result: ${resStr}`, pageWidth - 28);\n                    doc.text(splitRes, 20, currentY);\n                    currentY += (splitRes.length * 5) + 10;\n                }\n            });\n        } else {\n            doc.setFont('helvetica', 'italic');\n            doc.text(\"No test details recorded.\", 14, currentY);\n        }\n\n        // 4. Notes & Remarks\n        if (order.notes) {\n            if (currentY > 250) { doc.addPage(); currentY = 20; }\n            doc.setFontSize(10);\n            doc.setFont('helvetica', 'bold');\n            doc.text(\"Clinical Remarks:\", 14, currentY);\n            doc.setFont('helvetica', 'normal');\n            const splitNotes = doc.splitTextToSize(order.notes, pageWidth - 28);\n            doc.text(splitNotes, 14, currentY + 5);\n        }\n\n        doc.save(finalFilename);\n        toast.success(\"Lab Report downloaded successfully\");\n\n    } catch (error) {\n        console.error(\"Failed to generate Lab Report PDF\", error);\n        toast.error(\"Failed to generate PDF\");\n    }\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\downloadPatientPDF.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\downloadPharmacyBill.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\pdfCore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\pdfUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\printInvoice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\printLabelUtils.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\printPatientCard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\utils\\reportGenerator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\test_proxy.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\test_route.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\admin\\Desktop\\complete_swetha_saiphani_frontend-master\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]